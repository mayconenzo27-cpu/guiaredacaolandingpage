try{let e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="e752ce66-aa7d-424e-97f0-387f2eb1d6af",e._sentryDebugIdIdentifier="sentry-dbid-e752ce66-aa7d-424e-97f0-387f2eb1d6af")}catch(e){}(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7355],{4349:(e,t,a)=>{"use strict";a.d(t,{Bj:()=>r,C9:()=>o,Fj:()=>i,t:()=>n});var s=a(69147);let l="lovable_hash_prompt_";function r(e){try{let t=localStorage.getItem(l+e);if(!t)return null;let a=JSON.parse(t);if(Date.now()-a.timestamp>36e5)return n(e),null;return a}catch(t){return s.logging.error("Failed to retrieve or parse hash prompt for key: ".concat(e),{error:t}),n(e),null}}function n(e){try{localStorage.removeItem(l+e)}catch(e){}}function i(){try{let e=Object.keys(localStorage),t=Date.now();e.forEach(e=>{if(e.startsWith(l))try{let a=localStorage.getItem(e);if(a){let s=JSON.parse(a);t-s.timestamp>36e5&&localStorage.removeItem(e)}}catch(t){localStorage.removeItem(e)}})}catch(e){}}function o(){let e=window.location.hash.substring(1);if(!e)return null;try{let t=new URLSearchParams(e),a=t.get("prompt");if(a){if(a.length>5e4)return null;let e=t.getAll("images"),s=function(e,t){if(e.length>5e4)throw Error("Prompt exceeds maximum length of ".concat(5e4," characters"));let a=crypto.randomUUID(),s={prompt:e,images:t,timestamp:Date.now()};try{return localStorage.setItem(l+a,JSON.stringify(s)),a}catch(e){throw Error("Failed to store prompt data")}}(a,e.length>0?e:void 0);return window.history.replaceState({},"",window.location.pathname+window.location.search),s}}catch(e){s.logging.error("Error processing hash fragment on load",{error:e})}return null}},5943:(e,t,a)=>{"use strict";a.d(t,{G7:()=>o,L$:()=>u,h_:()=>m,oI:()=>d,uB:()=>i,xL:()=>c});var s=a(99289),l=a(37876);a(11405),a(6072);var r=a(26551),n=a(97757);function i(e){let{className:t,...a}=e;return(0,s.jsx)(l.uB,{"data-slot":"command",className:(0,r.cn)("flex h-full w-full flex-col overflow-hidden rounded-xl bg-popover text-popover-foreground",t),...a})}function o(e){let{className:t,...a}=e;return(0,s.jsxs)("div",{"data-slot":"command-input-wrapper",className:"flex h-9 items-center gap-2 border-b px-3",children:[(0,s.jsx)(n.A,{name:"search",className:"size-4 shrink-0 opacity-50"}),(0,s.jsx)(l.uB.Input,{"data-slot":"command-input",className:(0,r.cn)("flex h-10 w-full rounded-xl bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground focus-visible:outline-none disabled:cursor-not-allowed disabled:opacity-50",t),...a})]})}function d(e){let{className:t,...a}=e;return(0,s.jsx)(l.uB.List,{"data-slot":"command-list",className:(0,r.cn)("max-h-[300px] scroll-py-1 overflow-y-auto overflow-x-hidden",t),...a})}function c(e){let{...t}=e;return(0,s.jsx)(l.uB.Empty,{"data-slot":"command-empty",className:"py-6 text-center text-sm",...t})}function u(e){let{className:t,...a}=e;return(0,s.jsx)(l.uB.Group,{"data-slot":"command-group",className:(0,r.cn)("overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground",t),...a})}function m(e){let{className:t,...a}=e;return(0,s.jsx)(l.uB.Item,{"data-slot":"command-item",className:(0,r.cn)("relative flex cursor-default select-none items-center gap-2 rounded-lg px-2 py-1.5 text-sm outline-none data-[disabled=true]:pointer-events-none data-[selected=true]:bg-accent data-[selected=true]:text-accent-foreground data-[disabled=true]:opacity-50 [&_svg:not([class*='size-'])]:size-4 [&_svg:not([class*='text-'])]:text-muted-foreground [&_svg]:pointer-events-none [&_svg]:shrink-0",t),...a})}},14635:(e,t,a)=>{"use strict";a.d(t,{S:()=>o});var s=a(99289),l=a(3204),r=a(11405),n=a(26551),i=a(97757);let o=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(l.bL,{ref:t,className:(0,n.cn)("peer h-4 w-4 shrink-0 rounded-sm border border-primary shadow data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",a),...r,children:(0,s.jsx)(l.C1,{className:(0,n.cn)("flex items-center justify-center text-current"),children:(0,s.jsx)(i.A,{name:"check",className:"h-4 w-4"})})})});o.displayName=l.bL.displayName},16015:(e,t,a)=>{"use strict";a.d(t,{U:()=>n});var s=a(99289),l=a(97115),r=a(26551);let n=e=>{let{plan:t,className:a}=e,n=(0,l._R)(t);return(0,s.jsx)("span",{className:(0,r.cn)("rounded-full px-2 py-px text-[10px] font-medium uppercase transition-colors duration-150 ease-in-out","free"===t?"bg-muted text-muted-foreground":"bg-brand-twilight-primary text-brand-twilight-primary-foreground",a),children:n})}},17169:(e,t,a)=>{"use strict";var s;a.d(t,{s:()=>s}),function(e){var t;(t=e.status||(e.status={})).CONNECTED="connected",t.FAILED="failed",t.NEEDS_REFRESH="needs_refresh"}(s||(s={}))},23660:(e,t,a)=>{"use strict";a.d(t,{g:()=>x});var s=a(99289),l=a(19550),r=a.n(l),n=a(11405),i=a(5943),o=a(9562),d=a(5531),c=a(97757),u=a(17169),m=a(62593),p=a(77987);let x=e=>{var t;let{organization:a,reconnectOrg:l,isWorkspaceAdmin:n}=e;return a.status===u.s.status.NEEDS_REFRESH?(0,s.jsx)(o.Q,{showTooltip:!0,tooltipContent:n?"Click to reconnect to Supabase":"Ask an admin of your workspace to reconnect to Supabase",children:(0,s.jsxs)(d._2,{onClick:()=>l({supabaseOrgId:a.id}),className:"flex items-center gap-2 text-destructive-primary",disabled:!n,children:[(0,s.jsx)(c.A,{name:"warning_fill",size:"small",className:"text-destructive-primary"}),(0,s.jsx)("span",{className:"truncate",children:a.name})]})}):(0,s.jsxs)(d.lv,{children:[(0,s.jsx)(d.nV,{className:"text-sm",children:(0,s.jsx)("span",{className:"truncate",children:a.name})}),(0,s.jsxs)(d.M5,{className:"w-56 p-0",children:[(0,s.jsxs)(i.uB,{children:[(0,s.jsx)(i.G7,{placeholder:"Search projects...",autoFocus:!0}),(0,s.jsxs)(i.oI,{className:"max-h-60",children:[(0,s.jsx)(i.xL,{children:"No projects found."}),(0,s.jsx)(i.L$,{children:null==(t=a.projects)?void 0:t.map(e=>(0,s.jsx)(h,{project:e},e.id))})]})]}),(0,s.jsx)(d.mB,{className:"mt-0"}),(0,s.jsx)("div",{className:"px-1 pb-1",children:(0,s.jsx)(d._2,{asChild:!0,children:(0,s.jsxs)(r(),{href:"https://supabase.com/dashboard/new/".concat(a.id),target:"_blank",rel:"noopener noreferrer",className:"flex w-full items-center gap-2",children:[(0,s.jsx)(c.A,{name:"add",size:"small"}),"Create project",(0,s.jsx)(c.A,{name:"arrow_outward",size:"small",className:"ml-auto"})]})})})]})]},a.id)},h=e=>{let{project:t}=e,a=(0,p.L)(t),{setSelectedProject:l,setOpen:r}=(0,m.C)(),d=(0,n.useCallback)(()=>{l(t),r(!1)},[t,l,r]);return(0,s.jsx)(o.Q,{showTooltip:!a,side:"left",tooltipContent:"Check project status in Supabase.",children:(0,s.jsxs)(i.h_,{onSelect:d,disabled:!a,className:"group flex w-full items-center",value:t.name,children:[(0,s.jsx)("span",{className:"truncate",children:t.name}),!a&&(0,s.jsx)(c.A,{name:"warning_fill",size:"small",className:"ml-auto text-destructive-primary"})]},t.id)})}},31196:(e,t,a)=>{"use strict";a.d(t,{AF:()=>d,UO:()=>m,xO:()=>c,yk:()=>u});var s=a(11405),l=a(98213),r=a(99490),n=a(66608),i=a(69147),o=a(40074);let d="supabaseOAuthNonce",c="supabaseOAuthCodeVerifier",u=r.Ik({workspaceId:r.Yj(),userId:r.Yj().optional(),nonce:r.Yj()}),m=e=>{let[t,a]=(0,s.useState)(!1),{userData:r}=(0,n.ur)();return{handleConnect:(0,s.useCallback)(async t=>{a(!0);try{let s=window.location.origin,n=crypto.randomUUID();try{localStorage.setItem(d,n)}catch(e){i.logging.error("Error storing nonce in localStorage:",{error:e}),l.toast.error("Failed to initiate Supabase OAuth flow",{description:"Try clearing browser local storage and try again."}),a(!1);return}let u=btoa(JSON.stringify({workspaceId:e,userId:null==r?void 0:r.id,nonce:n})),m=o.env.NEXT_PUBLIC_SUPABASE_OAUTH_CLIENT_ID||"dbd565fc-4637-4cb6-ab68-0af4b5708417",x=function(){let e=new Uint8Array(32);return crypto.getRandomValues(e),btoa(String.fromCharCode.apply(null,Array.from(e))).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}(),h=await p(x);localStorage.setItem(c,x);let g=new URL("https://api.supabase.com/v1/oauth/authorize");g.searchParams.set("response_type","code"),g.searchParams.set("client_id",m),g.searchParams.set("redirect_uri","".concat(s,"/supabase/callback")),g.searchParams.set("state",u),g.searchParams.set("code_challenge",h),g.searchParams.set("code_challenge_method","S256"),(null==t?void 0:t.supabaseOrgId)&&g.searchParams.set("organization_slug",encodeURIComponent(t.supabaseOrgId));let f=window.open(g.toString(),"_blank","width=600,height=700,left=100,top=100");f?f.focus():window.location.href=g.toString()}catch(e){i.logging.error("Error initiating Supabase connection:",{error:e}),l.toast.error("Connection Error",{description:"An error occurred while connecting to Supabase. Please try again."})}finally{a(!1)}},[e,null==r?void 0:r.id]),isConnecting:t}};async function p(e){let t=new TextEncoder().encode(e),a=await crypto.subtle.digest("SHA-256",t);return btoa(String.fromCharCode.apply(null,Array.from(new Uint8Array(a)))).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}},39226:(e,t,a)=>{"use strict";a.d(t,{z:()=>n});var s=a(99289),l=a(4099),r=a(5790);let n=e=>{var t;let{isInteractive:a=!1,className:n,workspace:i,...o}=e,d=(0,r.Q)(null==i?void 0:i.id),c=null==i?void 0:i.name,u=null!=(t=null==i?void 0:i.image_url)?t:void 0;return(0,s.jsx)(l._,{name:c,isInteractive:a,photoSrc:u,userColor:d,className:n,isWorkspace:!0,...o})}},47355:(e,t,a)=>{"use strict";a.d(t,{CreateForm:()=>e5});var s=a(99289),l=a(51252),r=a(22291),n=a(81797),i=a(11405),o=a(98213),d=a(9627),c=a(62276),u=a(37079),m=a(90820),p=a(44593),x=a(4991),h=a(48591),g=a(31167),f=a(74975),j=a(43328),b=a(77233),v=a(23594),N=a(76974),w=a(78769),y=a(23719),_=a(50610),C=a(69201),A=a(12180),k=a(58032),S=a(76704),I=a(66608),E=a(67017),T=a(97115),D=a(26551),R=a(49944),O=a(9562),P=a(97757),L=a(60527),z=a(99017),F=a(95358),M=a(9070),U=a(82162),V=a(33979),W=a(31126);let B=e=>{let{visibility:t,setVisibility:a,onClick:l,disabled:r,className:n,customPrivateDescription:i,customPublicDescription:o,redirectToSubscription:d=!1,workspacePlan:c,workspace:u}=e,m=(0,S.c3)("VisibilitySelection"),p=(0,I.OM)({workspacePlan:c}),x=(0,I.W6)({workspacePlan:c}),h=(0,F.BK)(),{openSettings:g}=(0,M.t)();return(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)(V.z,{className:n,disabled:r,defaultValue:"public",value:t,onValueChange:e=>{a(e)},children:[(0,s.jsxs)("div",{className:"flex items-start gap-2",children:[(0,s.jsx)(V.C,{value:"public",id:"public",disabled:(null==u?void 0:u.disable_publish)===!0,onClick:()=>{(null==u?void 0:u.disable_publish)||null==l||l()}}),(0,s.jsxs)(U.Label,{htmlFor:"public",className:(0,D.cn)("flex w-full justify-between",(null==u?void 0:u.disable_publish)&&"opacity-50"),children:[(0,s.jsxs)("div",{className:"flex w-full cursor-pointer flex-col gap-0.5",children:[(0,s.jsxs)("div",{className:"flex items-center gap-1 text-sm font-medium leading-tight",children:[m("public.title"),(null==u?void 0:u.disable_publish)&&(0,s.jsxs)("span",{className:"text-xs text-muted-foreground",children:["(",m("public.publishingDisabled"),")"]})]}),o||(0,s.jsx)("span",{className:"font-normal leading-normal text-muted-foreground",children:m((null==u?void 0:u.disable_publish)?"public.publishingDisabledDescription":"public.description")})]}),(0,s.jsx)("div",{className:"flex items-center",children:(0,s.jsxs)(z.m_,{delayDuration:300,children:[(0,s.jsx)(z.k$,{children:(0,s.jsx)(P.A,{name:"info",className:"mt-0.5 h-4 w-4 text-muted-foreground"})}),(0,s.jsx)(z.ZI,{className:"max-w-[35ch]",children:(0,s.jsxs)("p",{children:["Anyone can remix this project. This means copy and build on it. To stop remixing,"," ",(0,s.jsx)("span",{className:"cursor-pointer underline hover:underline",onClick:()=>{if(!d)return void h(F.KU.PRO_PRIVATE_PROJECT);g("billing")},children:"upgrade"})," ","to make it private."]})})]})})]})]}),(0,s.jsxs)("div",{className:"flex w-full items-start gap-2",children:[(0,s.jsx)(V.C,{value:"private",id:"private",onClick:e=>{if(p)null==l||l();else{if(e.preventDefault(),!d)return void h(F.KU.PRO_PRIVATE_PROJECT);g("billing")}}}),(0,s.jsxs)(U.Label,{htmlFor:"private",className:(0,D.cn)("flex w-full cursor-pointer flex-col gap-0.5"),children:[(0,s.jsxs)("div",{className:"flex items-center gap-1 text-sm font-medium leading-tight",children:[m("workspace.title"),u&&(0,s.jsx)(W.M,{workspace:u,requiredPlanCategory:"pro"})]}),i||(0,s.jsx)("span",{className:"font-normal leading-normal text-muted-foreground",children:m("workspace.description")})]})]}),(0,s.jsxs)("div",{className:"flex w-full items-start gap-2",children:[(0,s.jsx)(V.C,{value:"draft",id:"draft",onClick:e=>{if(x)null==l||l();else{if(e.preventDefault(),!d)return void h(F.KU.BIZ_PERSONAL_PROJECT);g("billing")}}}),(0,s.jsxs)(U.Label,{htmlFor:"draft",className:"flex w-full cursor-pointer flex-col gap-0.5",children:[(0,s.jsxs)("div",{className:"flex items-center gap-1 text-sm font-medium leading-tight",children:[m("draft.title"),u&&(0,s.jsx)(W.M,{workspace:u,requiredPlanCategory:"biz"})]}),i||(0,s.jsx)("p",{className:"flex items-center gap-1",children:(0,s.jsx)("span",{className:"font-normal leading-normal text-muted-foreground",children:m("draft.description")})})]})]})]})})};var G=a(39975);let K=e=>{let{visibility:t,setVisibility:a,className:l,currentWorkspacePlan:r,disabled:n,disabledTooltipContent:o,workspace:d}=e,c=(0,S.c3)("ChatInputCreateProjectVisibility"),m=(0,E.A)(480),{authUser:p}=(0,u.Z2)(),{userData:x}=(0,I.ur)(),[h,g]=(0,i.useState)(!1),{chatInputFormRef:f}=(0,G.N)(),{isFreeOrInactivePlan:j,isBizOrEnterprisePlan:b}=(0,T.cb)(r),v=(0,i.useRef)(null==d?void 0:d.id);return(0,i.useEffect)(()=>{if(!t||(null==d?void 0:d.id)!==v.current){if(v.current=null==d?void 0:d.id,null==d?void 0:d.default_project_visibility)return void a(d.default_project_visibility);r&&(j?a("public"):b?a("draft"):a("private"))}},[r,a,t,null==d?void 0:d.default_project_visibility,null==d?void 0:d.id,j,b]),(0,s.jsx)(O.Q,{showTooltip:n&&!!o,tooltipContent:(0,s.jsx)("p",{children:o}),children:(0,s.jsxs)(L.AM,{open:h,onOpenChange:g,children:[(0,s.jsxs)(z.m_,{children:[(0,s.jsx)(z.k$,{asChild:!0,children:(0,s.jsx)(L.Wv,{asChild:!0,children:(0,s.jsx)(R.$,{variant:"outline",size:"sm",className:(0,D.cn)(l,"flex h-8 items-center justify-center gap-1 rounded-full text-muted-foreground focus-visible:ring-0"),children:void 0===x&&p?(0,s.jsx)("div",{className:"w-[60px]"}):"draft"===t?(0,s.jsxs)("div",{className:"flex items-center gap-1 duration-200 animate-in fade-in",children:[(0,s.jsx)(P.A,{name:"draft",size:"small"}),(0,s.jsx)("span",{className:"hidden md:flex",children:c("draft")})]}):"private"===t?(0,s.jsxs)("div",{className:"flex items-center gap-1 duration-200 animate-in fade-in",children:[(0,s.jsx)(P.A,{name:"workspaces",size:"small"}),(0,s.jsx)("span",{className:"hidden md:flex",children:c("workspace")})]}):(0,s.jsxs)("div",{className:"flex items-center gap-1 duration-200 animate-in fade-in",children:[(0,s.jsx)(P.A,{name:"globe",size:"small"}),(0,s.jsx)("span",{className:"hidden md:flex",children:c("public")})]})})})}),(0,s.jsx)(z.ZI,{className:"border-background bg-background text-foreground",children:c("changeVisibility")})]}),(0,s.jsx)(L.hl,{align:"start",className:"w-auto gap-0 bg-popover",children:(0,s.jsx)(B,{visibility:t,setVisibility:e=>{a(e),g(!1),f.current&&!m&&f.current.focus()},workspacePlan:r,workspace:d,className:"flex flex-col gap-4",disabled:n})})]})})};var H=a(67230);let $=e=>{let{className:t,iconSize:a="large",disabled:l=!1,isSendingDisabled:r=!1}=e;return(0,s.jsx)("button",{id:"chatinput-send-message-button",type:"submit",className:(0,D.cn)("flex h-8 w-8 items-center justify-center rounded-full bg-foreground transition-opacity duration-150 ease-out disabled:cursor-not-allowed disabled:opacity-50",t),disabled:r||l,children:(0,s.jsx)(P.A,{name:"arrow_upward_alt_600",size:a,className:"text-background"})})};var Q=a(47354),Y=a(64394),J=a(74846),X=a(86077),Z=a(55753),q=a(34958),ee=a(1965),et=a(34936),ea=a(33256),es=a(4349),el=a(69147),er=a(24159),en=a(273),ei=a(79312);let eo=()=>{let{store:e}=(0,g.Xl)(),t=e(e=>e.message),[a,l]=(0,i.useState)([]),[r,n]=(0,i.useState)(!1);return((0,i.useEffect)(()=>{if(t){let e=(0,_.E)(t);l(e),e.length>0&&n(!1)}else l([])},[t]),0===a.length||r)?null:(0,s.jsx)("div",{className:"absolute -bottom-48 left-0 right-0 z-20 mb-4 flex w-full flex-col rounded-lg border border-orange-500/50 bg-orange-900 md:-bottom-40",children:(0,s.jsxs)("div",{className:"flex items-start justify-between gap-2 py-2 pb-4 pl-3 pr-2",children:[(0,s.jsxs)("div",{className:"flex flex-1 items-start gap-2",children:[(0,s.jsx)(P.A,{name:"info",className:"mt-0.5 text-base text-orange-500","aria-label":"Warning"}),(0,s.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,s.jsx)("span",{className:"text-sm font-medium text-foreground",children:"Sensitive API key detected"}),(0,s.jsxs)("span",{className:"text-sm text-foreground",children:["API keys detected in your message. Create your project first, then connect Supabase to store API keys securely as secrets instead of including them in messages.",(0,s.jsx)("p",{className:"mt-2",children:(0,s.jsx)(R.$,{variant:"link",size:"sm",asChild:!0,className:"pl-0",children:(0,s.jsxs)("a",{href:"https://docs.lovable.dev/features/security",target:"_blank",rel:"noreferrer",children:[(0,s.jsx)(P.A,{name:"help",className:"h-4 w-4 text-foreground"}),(0,s.jsx)("span",{className:"text-xs text-foreground",children:"Learn more about security"}),(0,s.jsx)(P.A,{name:"arrow_outward",className:"h-4 w-4 text-foreground"})]})})})]})]})]}),(0,s.jsx)("button",{type:"button",className:"flex h-7 w-7 items-center justify-center",onClick:()=>{n(!0)},children:(0,s.jsx)(P.A,{name:"close",className:"h-3 w-3 text-foreground"})})]})})};var ed=a(19550),ec=a.n(ed),eu=a(62593),em=a(23660),ep=a(5531),ex=a(24238),eh=a(31196),eg=a(2904),ef=a(7545),ej=a(77987),eb=a(88852),ev=a(17169);function eN(e){let{workspaceId:t,onSupabaseProjectSelect:a,disabled:l=!1,onClose:r}=e,[n,o]=(0,i.useState)(!1),[d,c]=(0,i.useState)(""),{supabaseOrganizations:u}=(0,eg.G)({workspaceId:t});(0,eg.f)({workspaceId:t});let m=(0,j.j4)(e=>e.membership),p=(null==m?void 0:m.role)==="admin"||(null==m?void 0:m.role)==="owner",{handleConnect:x,isConnecting:h}=(0,eh.UO)(t),g=(0,C.D)(),f=()=>{o(!1),c(""),null==r||r()},b=(0,i.useMemo)(()=>{if(!d.trim())return u;let e=d.toLowerCase();return null==u?void 0:u.map(t=>{var a;return{...t,projects:null==(a=t.projects)?void 0:a.filter(t=>t.name.toLowerCase().includes(e))}}).filter(e=>e.projects&&e.projects.length>0)},[u,d]);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(ep._2,{onClick:e=>{e.preventDefault(),o(!0)},className:"text-sm",disabled:l,onSelect:e=>e.preventDefault(),children:[(0,s.jsx)(P.A,{name:"database",className:"h-4 w-4"}),"Connect Database"]}),(0,s.jsx)(ef.cj.Root,{license:"commercial",presented:n,onPresentedChange:o,children:(0,s.jsx)(ef.cj.Portal,{children:(0,s.jsxs)(ef.cj.View,{className:"z-[10000]",children:[(0,s.jsx)(ef.cj.Backdrop,{themeColorDimming:"auto"}),(0,s.jsxs)(ef.cj.Content,{className:"flex h-[65vh] flex-col gap-3 rounded-t-2xl p-4",children:[(0,s.jsx)(ef.s6.Root,{children:(0,s.jsx)(ef.cj.Handle,{children:"Connect database"})}),(0,s.jsx)(ef.cj.BleedingBackground,{className:"rounded-t-2xl border-t bg-background"}),(0,s.jsxs)("div",{className:"flex max-h-full flex-1 flex-col gap-2",children:[(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(P.A,{name:"search",className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),(0,s.jsx)(eb.p,{placeholder:"Search projects...",value:d,onChange:e=>c(e.target.value),className:"pl-9",autoFocus:!0})]}),g&&!d&&(0,s.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,s.jsx)("p",{className:"px-1 text-sm font-medium text-muted-foreground",children:"Lovable"}),(0,s.jsxs)("button",{className:"flex items-center gap-2 rounded-md px-3 py-2 text-left hover:bg-muted",onClick:()=>{a("lovable"),f()},disabled:l,children:[(0,s.jsx)(P.A,{name:"database"}),(0,s.jsx)("span",{className:"text-base",children:"Lovable Cloud"})]})]}),(0,s.jsx)("p",{className:"px-1 text-sm font-medium text-muted-foreground",children:"Supabase Projects"}),(0,s.jsx)("div",{className:"min-h-0 flex-1 overflow-y-auto pr-1",children:b&&b.length>0?b.map(e=>{var t;return e.status===ev.s.status.NEEDS_REFRESH?(0,s.jsxs)("button",{onClick:()=>x({supabaseOrgId:e.id}),className:"mb-3 flex w-full items-center gap-2 rounded-md px-2 py-2 text-left text-destructive-primary hover:bg-muted",disabled:!p,children:[(0,s.jsx)(P.A,{name:"warning_fill",size:"small",className:"flex-shrink-0 text-destructive-primary"}),(0,s.jsx)("span",{className:"truncate text-sm",children:e.name})]},e.id):(0,s.jsxs)("div",{className:"mb-3",children:[(0,s.jsx)("p",{className:"px-1 text-sm font-medium text-muted-foreground",children:e.name}),(0,s.jsxs)("div",{className:"mt-1 flex flex-col gap-0.5",children:[null==(t=e.projects)?void 0:t.map(e=>{let t=(0,ej.L)(e);return(0,s.jsx)(O.Q,{showTooltip:!t,tooltipContent:"Check project status in Supabase.",children:(0,s.jsxs)("button",{className:(0,D.cn)("flex w-full items-center gap-1 rounded-md px-3 py-1.5 text-left hover:bg-muted disabled:opacity-50",!t&&"opacity-50"),onClick:()=>{if(t)a(e),f();else window.open("https://supabase.com/dashboard/project/".concat(e.id),"_blank")},children:[(0,s.jsx)("span",{className:"truncate text-base",children:e.name}),!t&&(0,s.jsx)(P.A,{name:"arrow_outward"})]})},e.id)}),(0,s.jsxs)("a",{href:"https://supabase.com/dashboard/new/".concat(e.id),target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 rounded-md px-3 py-1.5 text-base hover:bg-muted",children:[(0,s.jsx)("span",{children:"Create project"}),(0,s.jsx)(P.A,{name:"arrow_outward"})]})]})]},e.id)}):d?(0,s.jsxs)("p",{className:"px-2 py-4 text-center text-base text-muted-foreground",children:['No projects found matching "',d,'"']}):(0,s.jsx)("p",{className:"px-2 py-4 text-center text-base text-muted-foreground",children:"No projects found"})}),(0,s.jsx)(O.Q,{showTooltip:!p,tooltipContent:"You are not an admin of this workspace",children:(0,s.jsxs)("button",{onClick:()=>x(),className:"mt-auto flex items-center gap-2 rounded-md px-2 py-2 text-base hover:bg-muted",disabled:h||!p||l,children:[(0,s.jsx)(P.A,{name:"add"}),"Add organization"]})})]})]})]})})})]})}function ew(e){let{workspaceId:t,selectedSupabaseProject:a,onSupabaseProjectSelect:l,disabled:r=!1}=e,n=(0,ex.a)(),{supabaseOrganizations:i}=(0,eg.G)({workspaceId:t});(0,eg.f)({workspaceId:t});let o=(0,j.j4)(e=>e.membership),d=(null==o?void 0:o.role)==="admin"||(null==o?void 0:o.role)==="owner",{handleConnect:c,isConnecting:u}=(0,eh.UO)(t),m=(0,C.D)();return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(ep.mB,{}),n?(0,s.jsx)(eN,{workspaceId:t,selectedSupabaseProject:a,onSupabaseProjectSelect:l,disabled:r}):(0,s.jsxs)(ep.lv,{children:[(0,s.jsxs)(ep.nV,{className:"flex items-center gap-2 text-sm",disabled:r,children:[(0,s.jsx)(P.A,{name:"database",className:"h-4 w-4"}),"Connect Database"]}),(0,s.jsx)(ep.M5,{className:"w-48",children:(0,s.jsxs)(eu.B,{setSelectedProject:l,setOpen:()=>{},children:[m&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(ep.lp,{className:"text-xs font-medium text-muted-foreground",children:"Lovable"}),(0,s.jsxs)(ep._2,{onClick:()=>l("lovable"),className:"text-sm",disabled:r,children:[(0,s.jsx)(P.A,{name:"database",className:"h-4 w-4"}),"Lovable Cloud"]})]}),(0,s.jsx)(ep.lp,{className:"text-xs font-medium text-muted-foreground",children:"Supabase Projects"}),null==i?void 0:i.map(e=>(0,s.jsx)(em.g,{organization:e,reconnectOrg:c,isWorkspaceAdmin:d},e.id)),(0,s.jsx)(O.Q,{showTooltip:!d,tooltipContent:"You are not an admin of this workspace",children:(0,s.jsxs)(ep._2,{onClick:()=>c(),className:"text-sm",disabled:u||!d||r,children:[(0,s.jsx)(P.A,{name:"add",size:"small"}),"Add organization"]})})]})})]})]})}var ey=a(52983),e_=a(2418);let eC={src:"/_next/static/media/modal-attach-image.a9312b4f.png",height:736,width:1472,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAECAMAAACEE47CAAAALVBMVEUYDDIsHE4jFERQOIA5J13y4v/77P+1kuRCLm+jg9E7J2PWvPTOt+p6WrjDpukyd0olAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAJ0lEQVR4nAXBiQEAIAgDsSsFf91/XBOqtRkgap+3CNEd6ZC4TvDIDwrwAI+AKn8QAAAAAElFTkSuQmCC",blurWidth:8,blurHeight:4};function eA(e){let{isOpen:t,onOpenChange:a,onAttachImages:l,onDismiss:r,children:n,allowAnyFile:o=!1}=e,d=(0,S.c3)("AttachImageModal"),[c,u]=(0,i.useState)({x:0,y:0});return(0,i.useEffect)(()=>{if(!t)return;let e=e=>{let{clientX:t,clientY:a}=e,{innerWidth:s,innerHeight:l}=window;u({x:(t/s-.5)*20,y:(a/l-.5)*20})};return window.addEventListener("mousemove",e),()=>window.removeEventListener("mousemove",e)},[t]),(0,s.jsxs)(L.AM,{open:t,onOpenChange:a,children:[(0,s.jsx)(L.Wv,{asChild:!0,children:n}),(0,s.jsx)(L.hl,{className:"w-80 rounded-3.5xl px-4 py-5",align:"start",sideOffset:8,children:(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsx)("div",{className:"relative h-24 w-full overflow-hidden rounded-2xl",children:(0,s.jsx)("div",{className:"absolute inset-0 transition-transform ease-out",style:{transform:"scale(1.8) translateX(".concat(c.x,"px) translateY(").concat(c.y,"px)")},children:(0,s.jsx)(e_.default,{src:eC,alt:"Upload visual references",fill:!0,className:"object-cover"})})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-lg",children:d(o?"titleFiles":"title")}),(0,s.jsx)("p",{className:"mt-1 text-sm text-muted-foreground",children:d(o?"descriptionFiles":"description")})]}),(0,s.jsx)("div",{className:"flex gap-2",children:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(R.$,{size:"sm",onClick:()=>{a(!1),l()},className:"rounded-full",type:"button",children:d(o?"addFiles":"addImages")}),(0,s.jsx)(R.$,{size:"sm",variant:"outline",onClick:()=>{r(),a(!1)},className:"rounded-full",type:"button",children:d("dismiss")})]})})]})})]})}var ek=a(81784);function eS(e){var t;let{isLovableAdmin:a,onSettingsClick:l,handleTemplatesClick:r,workspace:o,disabled:d=!1,workspaceId:c,selectedSupabaseProject:u,onSupabaseProjectSelect:m}=e,p=(0,S.c3)("AttachImageActionModal"),x=(0,h.G8)(),[g,f]=(0,i.useState)(!1),[b,v]=(0,ey.V)("has_seen_attach_image_modal",{defaultValue:!1}),{dropzoneElement:N,openFileUploadFromDropdown:w,getInputProps:y}=(0,ek.F)({portalTargetRef:null}),_=()=>{n.bC.capture(er.yD.CREATE_FORM.ATTACH_CLICKED,{has_seen_attach_modal:b}),b?w():f(!0)},{isBizOrEnterprisePlan:C}=(0,T.cb)(null==o?void 0:o.plan),{userData:A}=(0,I.ur)(),k=(0,j.j4)(e=>e.currentWorkspace),E=null!=(t=null==o?void 0:o.disable_figma_import)&&t;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(ep.rI,{onOpenChange:d?void 0:e=>{e&&n.bC.capture(er.yD.CREATE_FORM.DROPDOWN_CLICKED)},children:[(0,s.jsx)(ep.ty,{asChild:!0,children:(0,s.jsx)(R.$,{variant:"outline",size:"sm",className:"h-8 w-8 rounded-full p-0 text-muted-foreground hover:text-foreground",type:"button",disabled:d,children:(0,s.jsx)(P.A,{name:"add",size:"default",className:"text-muted-foreground"})})}),(0,s.jsxs)(ep.SQ,{align:"start",className:"min-w-52",children:[!E&&(0,s.jsx)(ep._2,{asChild:!0,disabled:d,children:(0,s.jsxs)(ec(),{href:d?"#":"https://www.figma.com/community/plugin/747985167520967365",target:d?void 0:"_blank",rel:d?void 0:"noopener noreferrer",onClick:d?void 0:()=>{n.bC.capture(er.yD.CREATE_FORM.FIGMA_IMPORT_CLICKED)},children:[(0,s.jsx)(P.A,{name:"figma_logo_color",size:"small",className:"text-muted-foreground"}),p("importFromFigma")]})}),a&&(0,s.jsxs)(ep._2,{onClick:d?void 0:l,disabled:d,children:[(0,s.jsx)(P.A,{name:"manufacturing",size:"small",className:"text-muted-foreground"}),p("advancedSettings")]}),C&&(null==A?void 0:A.id)&&(0,s.jsxs)(ep._2,{onClick:d?void 0:r,disabled:d,children:[(0,s.jsx)(P.A,{name:"file_export"}),p("templates")," ",k&&(0,s.jsx)(W.M,{workspace:k,requiredPlanCategory:"biz"})]}),(0,s.jsx)(ew,{workspaceId:c,selectedSupabaseProject:u,onSupabaseProjectSelect:m,disabled:d})]})]}),(0,s.jsx)("div",{children:(0,s.jsxs)(z.m_,{children:[(0,s.jsx)(z.k$,{asChild:!0,children:b?(0,s.jsxs)(R.$,{variant:"outline",size:"sm",className:"h-8 gap-1.5 rounded-full px-3 text-muted-foreground hover:text-foreground",type:"button",onClick:d?void 0:_,disabled:d,children:[(0,s.jsx)(P.A,{name:x?"attach_file":"add_photo_alternate",size:"small"}),(0,s.jsx)("span",{className:"hidden md:flex",children:p("attach")})]}):(0,s.jsx)(eA,{isOpen:!d&&g,onOpenChange:d?()=>{}:e=>{f(e),!e&&g&&v(!0)},onAttachImages:d?()=>{}:()=>{n.bC.capture(er.yD.CREATE_FORM.ATTACH_ADD_IMAGES_CLICKED),w()},onDismiss:d?()=>{}:()=>n.bC.capture(er.yD.CREATE_FORM.ATTACH_DISMISSED),allowAnyFile:x,children:(0,s.jsxs)(R.$,{variant:"outline",size:"sm",className:"h-8 gap-1.5 rounded-full px-3 text-muted-foreground hover:text-foreground",type:"button",disabled:d,onClick:_,children:[(0,s.jsx)(P.A,{name:"add_photo_alternate",size:"small"}),(0,s.jsx)("span",{className:"hidden md:flex",children:p("attach")})]})})}),(0,s.jsx)(z.ZI,{className:"border-background bg-background text-foreground",children:p("tooltip")})]})}),N,(0,s.jsx)("input",{id:"file-upload",className:"hidden",...y()})]})}let eI=JSON.parse('{"y":[{"name":"shadcn/ui + typescript","id":"vite_react_shadcn_ts","experimental":false,"description":"Build front-end with React, Tailwind, Vite & TypeScript","technologies":["vite","react","shadcnui","tailwind","typescript"]},{"name":"shadcn/ui + typescript (minor)","id":"vite_react_shadcn_ts_20250728_minor","experimental":true,"description":"Build front-end with React, Tailwind, Vite & TypeScript","technologies":["vite","react","shadcnui","tailwind","typescript"]},{"name":"shadcn/ui + typescript (major)","id":"vite_react_shadcn_ts_20250728_major","experimental":true,"description":"Build front-end with React, Tailwind, Vite & TypeScript","technologies":["vite","react","shadcnui","tailwind","typescript"]},{"name":"Next.js","id":"nextjs","experimental":true,"description":"Build with Next.js, TypeScript, React, Tailwind","technologies":["nextjs","typescript","react","shadcnui","tailwind"]},{"name":"Custom Tech Stack","id":"custom","experimental":false,"description":"Use a customized tech stack","technologies":[]}],"Z":[{"id":"nextjs","name":"Next.js"},{"id":"nodejs","name":"Node.js"},{"id":"express","name":"Express.js"},{"id":"html","name":"HTML"},{"id":"css","name":"CSS"},{"id":"javascript","name":"JavaScript"},{"id":"typescript","name":"TypeScript"},{"id":"sqlite","name":"SQLite"},{"id":"supabase","name":"Supabase"},{"id":"vite","name":"Vite"},{"id":"cloudflare","name":"Cloudflare"},{"id":"react","name":"React"},{"id":"tailwind","name":"Tailwind"},{"id":"chakraui","name":"Chakra UI"},{"id":"daisyui","name":"Daisy UI"},{"id":"shadcnui","name":"shadcn/ui"},{"id":"typescript","name":"TypeScript"}]}'),eE=e=>{let{id:t}=e,a=eI.Z.find(e=>e.id===t),l=null;"shadcnui"===t&&(l="ShadcnLogo");let r=l?X.Xy[l]:null;return r?(0,s.jsx)(r,{className:"h-10 w-10"}):(0,s.jsx)(e_.default,{src:"/img/technologies/".concat(t,".").concat({chakraui:"png"}[t]||"svg"),alt:"".concat(t," logo"),width:40,height:40,title:null==a?void 0:a.name,style:"shadcnui"===t?{filter:"invert(100%)"}:"nextjs"===t?{border:"1px solid white",borderRadius:"50%"}:{}})};var eT=a(82176),eD=a(79960),eR=a.n(eD);let eO=e=>{let{value:t,onChange:a,className:l}=e,r=n.Ay.isFeatureEnabled("experimental_tech_stacks")||!1,o=(0,i.useMemo)(()=>eI.y.filter(e=>!e.experimental||r),[r]);return(0,i.useEffect)(()=>{o.find(e=>e.id===t)||a(o[0].id)},[o,a,t]),(0,s.jsx)("div",{className:l,children:(0,s.jsxs)(eT.l6,{required:!0,value:t,onValueChange:e=>{if(el.logging.info("_value",{value:e}),"custom"===e)return void window.open("https://antonosika.typeform.com/to/KbocJ7pz","_blank");a(e)},children:[(0,s.jsx)(eT.bq,{className:"h-15 max-w-full ".concat(eR().button),id:"tech-stack-selector-trigger",children:(0,s.jsx)(eT.yv,{placeholder:"Select a Tech Stack"})}),(0,s.jsx)(eT.gC,{className:"max-w-xs sm:max-w-[600px] md:max-w-3xl",children:(0,s.jsxs)(eT.s3,{children:[(0,s.jsx)(eT.TR,{children:"Tech Stacks"}),o.map(e=>(0,s.jsx)(eT.eb,{value:e.id,className:"group",children:(0,s.jsxs)("div",{className:"flex flex-col",children:[(0,s.jsx)("div",{children:e.name}),(0,s.jsx)("div",{className:"text-sm text-gray-500 group-hover:text-primary",children:e.description})]})},e.id))]})})]})})};var eP=a(40177),eL=a(14635),ez=a(6072);function eF(e){var t;let{isLovableAdmin:a,onSettingsClick:l,handleTemplatesClick:r,workspace:i,disabled:o=!1,workspaceId:d,selectedSupabaseProject:c,onSupabaseProjectSelect:u}=e,m=(0,h.G8)(),{dropzoneElement:p,openFileUploadFromDropdown:x,getInputProps:g}=(0,ek.F)({portalTargetRef:null}),{isBizOrEnterprisePlan:f}=(0,T.cb)(null==i?void 0:i.plan),b=(0,j.j4)(e=>e.currentWorkspace),{userData:v}=(0,I.ur)(),N=null!=(t=null==i?void 0:i.disable_figma_import)&&t;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(ep.rI,{onOpenChange:o?void 0:e=>{e&&n.bC.capture(er.yD.CREATE_FORM.DROPDOWN_CLICKED)},children:[(0,s.jsx)(ep.ty,{asChild:!0,children:(0,s.jsx)(R.$,{variant:"outline",size:"sm",className:"h-8 w-8 rounded-full p-0 text-muted-foreground hover:text-foreground",type:"button",disabled:o,children:(0,s.jsx)(P.A,{name:"add",size:"default",className:"text-muted-foreground"})})}),(0,s.jsxs)(ep.SQ,{align:"start",className:"w-48",children:[(0,s.jsxs)(ep._2,{onClick:o?void 0:()=>{n.bC.capture(er.yD.CREATE_FORM.DROPDOWN_ATTACH_CLICKED),x()},disabled:o,children:[(0,s.jsx)(P.A,{name:m?"attach_file":"add_photo_alternate",size:"small",className:"text-muted-foreground"}),m?"Attach":"Attach Image"]}),!N&&(0,s.jsx)(ep._2,{asChild:!0,disabled:o,children:(0,s.jsxs)(ec(),{href:o?"#":"https://www.figma.com/community/plugin/747985167520967365",target:o?void 0:"_blank",rel:o?void 0:"noopener noreferrer",onClick:o?void 0:()=>{n.bC.capture(er.yD.CREATE_FORM.FIGMA_IMPORT_CLICKED)},children:[(0,s.jsx)(P.A,{name:"figma_logo_color",size:"small",className:"text-muted-foreground"}),"Import from Figma"]})}),f&&(null==v?void 0:v.id)&&(0,s.jsxs)(ep._2,{onClick:o?void 0:r,disabled:o,children:[(0,s.jsx)(P.A,{name:"file_export"}),"Use a template"," ",b&&(0,s.jsx)(W.M,{workspace:b,requiredPlanCategory:"biz"})]}),a&&(0,s.jsxs)(ep._2,{onClick:o?void 0:l,disabled:o,children:[(0,s.jsx)(P.A,{name:"manufacturing",size:"small",className:"text-muted-foreground"}),"Advanced Settings"]}),d&&u&&(0,s.jsx)(ew,{workspaceId:d,selectedSupabaseProject:c,onSupabaseProjectSelect:u,disabled:o})]})]}),p,(0,s.jsx)("input",{id:"file-upload",className:"hidden",...g()})]})}let eM=e=>{let{chatModeEnabled:t,setChatModeEnabled:a,techStack:l,setTechStack:r,isSettingsDialogOpen:o,setIsSettingsDialogOpen:d,openTemplatesDialog:c,disabled:u=!1,workspaceId:m,selectedSupabaseProject:p,onSupabaseProjectSelect:x}=e,h=(0,q.WW)(),{selectedTechnologies:g}=(0,i.useMemo)(()=>{if(l){let e=eI.y.find(e=>e.id===l);if(e){let{technologies:t,description:a}=e;return{selectedTechnologies:t.map(e=>eI.Z.find(t=>t.id===e)),techStackDescription:a}}}return{selectedTechnologies:[],techStackDescription:""}},[l]),f=function(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"control",s=(0,eP._C)(e),l=t[a];return(n.Ay.capture("$feature_flag_called",{$feature_flag_response:s,$feature_flag:e}),"boolean"!=typeof s&&s&&s in t)?t[s]:l}(eP.Gi.LaunchpadFormUploadImageModal,{control:eF,variant1:eS}),b=(0,j.j4)(e=>e.currentWorkspace),{isBizOrEnterprisePlan:v}=(0,T.cb)(null==b?void 0:b.plan),N=(0,F.BK)();return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(f,{isLovableAdmin:h,onSettingsClick:()=>d(!0),handleTemplatesClick:()=>{v?c():N(F.KU.BIZ_TEMPLATES)},workspace:b,disabled:u,workspaceId:m,selectedSupabaseProject:p,onSupabaseProjectSelect:x}),(0,s.jsx)(ez.lG,{onOpenChange:d,open:o,children:(0,s.jsxs)(ez.Cf,{children:[(0,s.jsxs)(ez.c7,{children:[(0,s.jsx)(ez.L3,{children:"Advanced Settings"}),(0,s.jsx)(ez.rr,{children:"Make advanced or experimental changes before starting a new project"})]}),(0,s.jsxs)("div",{className:"flex w-full flex-col items-center",children:[h&&(0,s.jsx)("div",{className:"mb-3 flex w-full flex-col gap-2",children:(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(eL.S,{id:"chat-mode",checked:t,onCheckedChange:e=>a(e),disabled:u}),(0,s.jsx)(U.Label,{htmlFor:"chat-mode",children:"Enable Chat Mode"})]})}),(0,s.jsxs)("div",{className:"mb-2 w-full",children:[(0,s.jsx)("p",{className:"mb-1 text-sm font-medium",children:"Tech Stack"}),(0,s.jsx)("div",{className:u?"pointer-events-none opacity-50":"",children:(0,s.jsx)(eO,{className:"w-full",value:l,onChange:e=>{e&&!u&&r(e)}})})]}),(0,s.jsx)("div",{className:"mb-3 flex w-full items-center justify-between",children:(0,s.jsx)("div",{className:"flex-grow text-sm text-muted-foreground",children:"The tech stack to be used for initial generation."})}),(0,s.jsx)("div",{className:"flex gap-4",children:g.map(e=>(0,s.jsxs)("div",{className:"flex flex-col items-center gap-2",children:[(0,s.jsx)(U.Label,{children:e.name}),(0,s.jsx)(eE,{id:e.id})]},e.name))})]})]})})]})};var eU=a(44767);let eV=e=>{let{suggestion:t,onClick:a}=e,{label:l,prompt:r,icon:o}=t,d=(0,i.useCallback)(()=>{n.Ay.capture(er.yD.EXAMPLE_PROMPT.CLICKED,{label:l}),a(r,l)},[a,r,l]);return(0,s.jsxs)(R.$,{onClick:d,className:"flex cursor-pointer items-center rounded-full border border-muted-border bg-muted font-normal text-muted-foreground transition-colors duration-150 ease-in-out",variant:"outline",children:[(0,s.jsx)(P.A,{name:o||"arrow_upward",size:"small"}),l]})},eW=e=>{let{onClick:t,suggestions:a,disabled:l=!1}=e,r=a&&a.length>0;return(0,s.jsx)("div",{className:"h-[40px]",children:!!r&&!l&&(0,s.jsx)(eU.P.div,{initial:{opacity:0},animate:{opacity:1},transition:{ease:"easeOut",duration:.5},children:(0,s.jsx)("div",{className:"mt-4 flex w-screen justify-start gap-2.5 overflow-x-auto px-2 py-1 scrollbar-hide md:mt-5 md:justify-center",children:null==a?void 0:a.map(e=>(0,s.jsx)(eV,{suggestion:e,onClick:t},e.label))})})})};var eB=a(34363),eG=a(44794),eK=a(36104);let eH=e=>{var t,a;let{projectId:l,setSelectedTemplateId:r,openTemplatesDialog:n}=e,{data:i,isLoading:o}=(0,eB.I)(eK.c.projectDetails({projectId:l})),d=(0,E.A)("md");return i||o?(0,s.jsxs)("div",{className:"group/attached-template relative flex flex-wrap gap-2",children:[(0,s.jsxs)("button",{className:(0,D.cn)("flex h-16 w-16 items-center justify-center bg-muted p-0 transition-opacity duration-150 ease-in-out hover:opacity-80",d&&"h-24 w-24"),type:"button",onClick:n,children:[o?(0,s.jsx)(eG.y,{size:"small"}):(0,s.jsx)(e_.default,{src:null!=(t=null==i?void 0:i.latest_screenshot_url)?t:"",alt:"Screenshot of ".concat(null!=(a=null==i?void 0:i.name)?a:"template project"),fill:!0,sizes:"(max-width: 768px) 100vw, (max-width: 1200px) 50vw, 33vw",style:{objectFit:"cover",objectPosition:"top"},draggable:"false",className:"rounded-xl border border-muted-border"}),(0,s.jsx)("div",{className:"absolute inset-px rounded-xl bg-gradient-to-t from-background/50 to-background/0"}),(0,s.jsx)(P.A,{name:"file_export",size:d?"default":"small",className:"absolute bottom-1.5 left-1.5 text-foreground"})]}),(0,s.jsxs)(z.m_,{instant:!0,children:[(0,s.jsx)(z.k$,{asChild:!0,children:(0,s.jsx)("button",{className:(0,D.cn)("absolute -right-0.5 -top-0.5 z-[10000] flex items-center justify-center rounded-full border bg-primary text-xs text-primary-foreground opacity-0 shadow shadow-background/25 transition-opacity duration-150 ease-out group-hover/attached-template:opacity-100",d&&"h-5 w-5 opacity-100"),onClick:()=>{r(void 0)},children:(0,s.jsx)(P.A,{name:"close_small",size:d?"default":"small"})})}),(0,s.jsx)(z.ZI,{children:"Remove template"})]})]},l):null};var e$=a(72384),eQ=a(27317),eY=a(7099);let eJ=e=>{let{isOpen:t,setIsOpen:a,setSelectedTemplateId:l}=e,r=(0,j.j4)(e=>e.currentWorkspace);return(0,s.jsx)(ez.lG,{open:t,onOpenChange:a,children:(0,s.jsxs)(ez.Cf,{className:"md:max-w-4xl",children:[(0,s.jsxs)(ez.c7,{className:"mb-4 border-b pb-4",children:[(0,s.jsx)(ez.L3,{children:"Use a template"}),(0,s.jsxs)(ez.rr,{children:["Select a project from ",(0,s.jsx)("span",{className:"font-medium",children:null==r?void 0:r.name})," and tell Lovable how to use it. Set projects as templates in project settings."]})]}),(0,s.jsx)(eX,{setSelectedTemplateId:l,closeDialog:()=>{a(!1)}})]})})},eX=e=>{var t;let{setSelectedTemplateId:a,closeDialog:l}=e,r=(0,j.j4)(e=>e.currentWorkspace),{data:n,isLoading:i}=(0,eB.I)(e$.y.templates({workspaceId:null!=(t=null==r?void 0:r.id)?t:""}));return(0,s.jsx)("div",{className:"flex flex-1",children:(0,s.jsxs)("div",{className:"grid max-h-[500px] w-full grid-cols-1 gap-6 overflow-y-auto md:grid-cols-2 lg:grid-cols-3",children:[i&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(eQ.p,{}),(0,s.jsx)(eQ.p,{}),(0,s.jsx)(eQ.p,{})]}),!i&&(n&&n.length>0?n.map(e=>(0,s.jsx)(eY.U,{project:e,subtitleType:"created-by",isCommunityProject:!1,positionIndex:0,isTemplate:!0,selectTemplate:()=>{a(e.id),l()}},e.id)):(0,s.jsxs)("div",{className:"col-span-full flex h-[300px] w-full flex-col items-center justify-center gap-2 text-center text-sm text-muted-foreground",children:[(0,s.jsx)(P.A,{name:"file_export",size:"large"}),(0,s.jsx)("p",{children:"Set a project as a template in project settings."})]}))]})})};var eZ=a(88134),eq=a(90465),e0=a(40879);let e1=e=>{let{disabled:t=!1}=e,a=(0,S.c3)("TypeWriter"),l=(0,e0.ot)(),r=(0,eq.d)({words:l.TypeWriter.words,prefix:a("prefix")});return(0,s.jsx)(eZ.h,{autoSize:!0,minHeight:80,shouldAutoFocus:!t,placeholder:t?"Viewers can only view existing projects":r,enableSlashCommands:!1,isChatModeActive:!1,disabled:t})},e5=e=>{let{promptSuggestions:t}=e;return(0,s.jsx)(g.Ar,{localStorageKey:"create-form",children:(0,s.jsx)(e2,{promptSuggestions:t})})},e2=e=>{let{promptSuggestions:t}=e,a=(0,r.useRouter)(),S=(0,l.jE)(),I=(0,J.X5)(),[E,T]=(0,i.useState)(""),[D,O]=(0,i.useState)(void 0),[L,z]=(0,i.useState)(!1),[F,M]=(0,i.useState)(!1),U=(0,h.G8)(),{store:V}=(0,g.Xl)(),W=V(e=>e.message),B=V(e=>e.setMessage),ed=V(e=>e.setImages),ec=(0,g.Uw)(e=>e.suggestionLabel),eu=(0,g.Uw)(e=>e.setSuggestionLabel),em=(0,g.Uw)(e=>e.images),ep=(0,h.zJ)(),ex=(0,q.WW)(),[eh,eg]=(0,d.A)("chat-mode-enabled",{defaultValue:!1}),{currentWorkspaceId:ef,setCurrentWorkspaceId:ej}=(0,j.Dx)(),[eb,ev]=(0,i.useState)(!1),[eN,ew]=(0,i.useState)(!1),[ey,e_]=(0,i.useState)(!1),eC=(0,N.Mu)(e=>e.isLoading),eA=(0,r.useSearchParams)(),ek=eA.get("promptKey"),eS=eA.get("prompt"),eI=eA.get("autosubmit"),eE=eA.get("builder_token"),eT=(0,i.useMemo)(()=>ek?(0,es.Bj)(ek):null,[ek]),eD=(null==eT?void 0:eT.prompt)||eS,[eR,eO]=(0,i.useState)(!1),eP=()=>eO(!0),[eL,ez]=(0,i.useState)(void 0);(0,i.useEffect)(()=>{let e=eA.get("templateId");e&&ez(e)},[eA,ez]);let eF=(0,C.D)(),[eU,eV]=(0,i.useState)(null);(0,i.useEffect)(()=>{eV(null)},[ef,eF]);let eB=(0,j.j4)(e=>e.currentWorkspace),{permitted:eG}=(0,v.J)(ei.eZ.CreateWorkspaceProjects),{permitted:eK}=(0,v.J)(ei.eZ.ManageWorkspaceSupabase),{disableChangeVisibility:e$,disabledTooltipContent:eQ,disableFormActions:eY,disableSubmission:eX,disableModelSelector:eZ,disableConnectSupabase:eq,disablePromptSuggestions:e0,showActionButtons:e5}=(0,i.useMemo)(()=>{let e=eG?void 0:"You don't have permission to create projects in this workspace. Contact a workspace admin for access.";return{disableChangeVisibility:!eG,disabledTooltipContent:e,disableFormActions:!1,disableSubmission:!1,disableModelSelector:!1,disableConnectSupabase:!eG||!eK,disablePromptSuggestions:!eG,showActionButtons:!0}},[eG,eK]),{selectedModel:e2}=(0,b.Y$)(),{store:e4}=(0,g.Xl)(),e7=(0,i.useCallback)((e,t)=>{eX||(B(e),eu(t))},[B,eu,eX]),e9=(0,i.useCallback)(async e=>{let{body:t,options:s}=e;try{let e,l=e4.getState(),r=(0,y.wL)(t),n={description:r.message||"Implement exactly the screenshot and nothing else",tech_stack:E||void 0,example_prompt_label:ec||void 0,visibility:D,images_added_via_dropdown:l.imagesAddedViaDropdown&&l.images.length>0||void 0,template_project_id:eL,...eU&&"object"==typeof eU?{supabase_project_config:{supabase_organization_id:eU.organization_id,supabase_project_id:eU.id}}:{},...r.image_urls&&r.image_urls.length>0&&(!U||r.from_hash_fragment)?{image_urls:r.image_urls}:{}};if("lovable"===eU&&delete n.supabase_project_config,!ef)return void o.toast.error("We had trouble finding your workspace.",{description:"Please try again later or contact support if the problem persists."});"auto"!==e2&&null!==e2&&(e=e2);let i={id:r.id,message:r.message,images:l.images,ai_message_id:r.ai_message_id||void 0,chatOnly:!!eh||!0===r.chat_only||void 0,builderToken:r.builder_token||void 0,model:e};n.initial_message={...r,model:e};let d=(0,ea.P)(),c=await d.post("/workspaces/".concat(ef,"/projects"),n);S.invalidateQueries({queryKey:en.workspaceKeys.all}),S.setQueryData(en.gO.initialPrompt(c.id),i),ek&&(0,es.t)(ek),a.push("/projects/"+c.id),setTimeout(()=>{var e;null==s||null==(e=s.clear)||e.call(s)},1e3)}catch(a){var l;null==s||null==(l=s.restore)||l.call(s);let e=401===a.status,t=402===a.status;if(a instanceof ee.L&&"rate_limited"===a.type)return void o.toast.error("We are currently under heavy load, please try again later.");if(e)return;if(t){n.Ay.capture("out_of_credits_dialog_opened"),I();return}(0,et.Ni)(a),el.logging.error("Create project error",a);return}},[e4,E,ec,D,eL,eU,ef,eh,e2,U,S,a,I,ek]),e3=(0,i.useCallback)(async e=>{let{body:t,options:a}=e;if((0,_.u)(t.message)){n.Ay.capture(er.$6.CREATION.API_KEY_DETECTED),M(!0);return}await e9({body:{...t,model:ex&&"auto"!==e2&&null!==e2?e2:void 0},options:a})},[e9,ex,e2]),{sendChatMessage:e6,isSendingDisabled:e8,isSubmitting:te,AuthDialogComponent:tt}=(e=>{let{onSubmit:t}=e,{authUser:a,authState:l}=(0,u.Z2)(),[r,n]=(0,i.useState)(!1),[o,d]=(0,i.useState)(!1),c=(0,h.G8)(),{store:j,clearEditorState:b,restoreEditorState:v}=(0,g.Xl)(),N=j(e=>e.images),w=j(e=>e.message),y=(0,i.useMemo)(()=>N.some(e=>!e.uploaded),[N]),_=(0,i.useMemo)(()=>0===w.length||a&&y||(0,x.rn)(w)||o||"loading"===l,[w,a,y,o,l]);return{sendChatMessage:(0,i.useCallback)(async()=>{if(!_){if(!a)return void n(!0);d(!0);try{let e={id:(0,m.g_)(),message:w,...c?{files:N.map(e=>({file_id:e.id,file_name:e.name,type:f.g.USER_UPLOAD}))}:{images:N.map(e=>({image_id:e.id,type:f.g.USER_UPLOAD}))},optimisticImageUrls:N.map(e=>e.url),chat_only:!1,agent_mode_enabled:!1};await t({body:e,options:{clear:b,restore:v}})}finally{d(!1)}}},[a,_,w,N,t,b,v,c]),isSendingDisabled:_,isSubmitting:o,AuthDialogComponent:(0,s.jsx)(p.H,{open:r,onOpenChange:n})}})({onSubmit:e3}),ta=(0,i.useRef)(!1);(0,i.useEffect)(()=>{(null==eT?void 0:eT.images)&&eT.images.length>0&&ed(eT.images.map((e,t)=>{try{return{id:"hash-image-".concat(e,"-").concat(t),url:decodeURIComponent(e),name:"Image ".concat(t+1),size:0,type:"image/jpeg",uploaded:!0,uploading:!1}}catch(t){return el.logging.error("Error decoding malformed image URL from hash fragment for UI",{error:t,url:e}),null}}).filter(e=>null!=e))},[null==eT?void 0:eT.images,ed]);let ts=(0,i.useMemo)(()=>{let e=((null==eT?void 0:eT.images)||[]).map(e=>{try{return decodeURIComponent(e.trim())}catch(t){return el.logging.error("Error decoding malformed image URL from hash fragment",{error:t,url:e}),null}}).filter(e=>!!e),t=eA.getAll("images").map(e=>{try{return decodeURIComponent(e.trim())}catch(t){return el.logging.error("Error decoding malformed image URL from query params",{error:t,url:e}),null}}).filter(e=>!!e);return e.length>0?e:t},[eA,null==eT?void 0:eT.images]);return(0,i.useEffect)(()=>{if(!ta.current)if(eE&&ef){ta.current=!0;let e=(0,c.A)();e9({body:{message:"Build a pixel perfect UI clone of this Figma design!",builder_token:eE,id:e}}),n.Ay.capture("builder_io_figma_import_request_sent",{project_id:e})}else eD&&"true"===eI&&!eC&&(eN?ey&&ef&&(ta.current=!0,e_(!1),e9({body:{message:eD,id:(0,c.A)(),image_urls:ts.length>0?ts:void 0,from_hash_fragment:!!(null==eT?void 0:eT.images)}})):(ew(!0),ev(!0)))},[e9,eD,eI,eE,ef,ts,eC,eN,ew,ey,e_,null==eT?void 0:eT.images]),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(w.c,{isOpen:F,onDismiss:()=>M(!1),onConfirm:()=>{M(!1),W&&(n.Ay.capture(er.$6.CREATION.API_KEY_WARNING_DISMISSED),e9({body:{message:W,id:(0,c.A)()}}))}}),(0,s.jsx)(eJ,{isOpen:eR,setIsOpen:eO,selectedTemplateId:eL,setSelectedTemplateId:ez}),(0,s.jsx)(Z.AX,{open:eb,onOpenChange:e=>{ev(e),e||ey||(ek&&(0,es.t)(ek),a.replace("/"))},onWorkspaceSelect:e=>{ej(e),e_(!0),ev(!1)},selectedWorkspaceId:ef}),(0,s.jsx)("div",{className:"w-full max-w-3xl",children:(0,s.jsx)("div",{className:"relative w-full",children:(0,s.jsxs)("div",{className:"flex w-full flex-col items-center",children:[(0,s.jsx)("div",{className:"relative size-full",children:(0,s.jsxs)(G._,{onSendChatMessage:e3,isSubmitting:te,children:[(0,s.jsx)(eo,{}),(0,s.jsxs)(A.V,{className:"w-full rounded-3.5xl border border-muted-border bg-muted text-base shadow-xl transition-all duration-150 ease-in-out focus-within:border-foreground/20 hover:border-foreground/10 focus-within:hover:border-foreground/20",onSubmit:eX?()=>{}:e6,AuthDialogComponent:tt,children:[(em.length>0||!!eL)&&(0,s.jsx)("div",{className:"p-1 pb-0",children:(0,s.jsx)(H.d,{children:eL&&(0,s.jsx)(eH,{projectId:eL,setSelectedTemplateId:ez,openTemplatesDialog:eP})})}),(0,s.jsx)(e1,{disabled:eX}),(0,s.jsx)(x.eh,{}),(0,s.jsxs)(k.Z,{className:"flex-wrap items-center",children:[(0,s.jsx)(eM,{chatModeEnabled:eh,setChatModeEnabled:eg,techStack:E,setTechStack:T,isSettingsDialogOpen:L,setIsSettingsDialogOpen:z,openTemplatesDialog:eP,disabled:eY,workspaceId:ef||"",selectedSupabaseProject:eU,onSupabaseProjectSelect:eV}),(0,s.jsx)(K,{disabled:e$,visibility:D,setVisibility:O,currentWorkspacePlan:(null==eB?void 0:eB.plan)||null,disabledTooltipContent:eQ,workspace:eB||void 0}),eU&&(0,s.jsx)("div",{className:eq?"pointer-events-none opacity-50":"",children:(0,s.jsxs)(R.$,{variant:"default",size:"sm",className:"flex h-8 max-w-32 items-center gap-1 rounded-full pr-2 focus-visible:ring-0 md:max-w-40",onClick:()=>eV(null),disabled:eq,children:["lovable"===eU?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(P.A,{name:"database",className:"h-4 w-4 flex-shrink-0"}),(0,s.jsx)("span",{className:"hidden truncate text-sm font-medium md:flex",children:"Lovable Cloud"})]}):"object"==typeof eU&&eU?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(X.Xy.Supabase,{className:"mr-0.5 h-3.5 w-3.5 flex-shrink-0"}),(0,s.jsx)("span",{className:"hidden truncate text-sm font-medium md:flex",children:eU.name})]}):null,(0,s.jsx)(P.A,{name:"close",size:"small",className:"h-3.5 w-3.5 opacity-70"})]})}),(0,s.jsxs)("div",{className:"ml-auto flex items-center gap-1",children:[ep&&(0,s.jsx)("div",{className:eZ?"pointer-events-none opacity-50":"",children:(0,s.jsx)(Y.B,{projectId:"create-form"})}),(0,s.jsxs)("div",{className:"relative flex items-center gap-1 md:gap-2",children:[(0,s.jsx)("div",{className:e5?"":"pointer-events-none opacity-50"}),(0,s.jsx)(Q.H,{size:"large",disabled:!e5}),(0,s.jsx)($,{isSendingDisabled:e8||!e5,iconSize:"large"})]})]})]})]})]})}),(0,s.jsx)(eW,{onClick:e7,suggestions:t,disabled:e0})]})})})]})}},55753:(e,t,a)=>{"use strict";a.d(t,{AX:()=>u});var s=a(99289),l=a(11405),r=a(76974),n=a(39226),i=a(49944),o=a(6072),d=a(97757),c=a(16015);function u(e){let{open:t,onOpenChange:a,onWorkspaceSelect:n,selectedWorkspaceId:d}=e,c=(0,r.Mu)(e=>e.workspaces),u=(0,r.Mu)(e=>e.isLoading),p=(0,l.useCallback)(e=>{e.id&&(n(e.id),a(!1))},[n,a]);return(0,s.jsx)(o.lG,{open:t,onOpenChange:a,children:(0,s.jsxs)(o.Cf,{className:"max-h-screen w-96 gap-4",size:"sm",onOpenAutoFocus:e=>e.preventDefault(),children:[(0,s.jsxs)(o.c7,{children:[(0,s.jsx)(o.L3,{className:"text-xl",children:"Choose Workspace for Auto-Submit"}),(0,s.jsx)(o.rr,{className:"text-sm",children:"Please select which workspace to create this project in."})]}),u?(0,s.jsx)("div",{className:"flex max-h-72 w-full flex-col space-y-2 overflow-y-auto p-2",children:Array.from({length:3}).map((e,t)=>(0,s.jsxs)("div",{className:"flex items-center gap-3 px-3 py-3",children:[(0,s.jsx)("div",{className:"h-8 w-8 animate-pulse rounded bg-muted"}),(0,s.jsx)("div",{className:"h-4 flex-1 animate-pulse rounded bg-muted"})]},t))}):(0,s.jsx)("div",{className:"flex max-h-72 w-full flex-col overflow-y-auto",children:c.map(e=>{var t;return(0,s.jsx)(m,{workspace:e,onSelect:()=>p(e),selected:d==e.id},null!=(t=e.id)?t:"fake-workspace-id")})}),(0,s.jsx)("div",{className:"flex justify-end",children:(0,s.jsx)(i.$,{variant:"outline",onClick:()=>a(!1),children:"Cancel"})})]})})}let m=e=>{let{workspace:t,onSelect:a,selected:l}=e;return(0,s.jsxs)(i.$,{variant:"ghost",onClick:a,className:"group flex h-auto w-full items-center justify-start gap-3 px-3 py-3 text-left",children:[(0,s.jsx)(n.z,{workspace:t}),(0,s.jsx)("p",{className:"min-w-0 truncate text-sm",children:t.name}),t.plan&&(0,s.jsx)(c.U,{plan:t.plan}),l&&(0,s.jsx)(d.A,{name:"check",size:"small",className:"ml-auto"})]})};a(70999)},62593:(e,t,a)=>{"use strict";a.d(t,{B:()=>i,C:()=>n});var s=a(99289),l=a(11405);let r=(0,l.createContext)({setSelectedProject:()=>{},setOpen:()=>{}}),n=()=>{let e=(0,l.useContext)(r);if(!e)throw Error("useSupabaseConnectMenuContext must be used within a SupabaseConnectMenuContext");return e},i=e=>{let{children:t,setSelectedProject:a,setOpen:l}=e;return(0,s.jsx)(r.Provider,{value:{setSelectedProject:a,setOpen:l},children:t})}},71459:(e,t,a)=>{"use strict";a.d(t,{K:()=>s});var s=function(e){return e.ACTIVE_HEALTHY="ACTIVE_HEALTHY",e.ACTIVE_UNHEALTHY="ACTIVE_UNHEALTHY",e.COMING_UP="COMING_UP",e.GOING_DOWN="GOING_DOWN",e.INACTIVE="INACTIVE",e.INIT_FAILED="INIT_FAILED",e.REMOVED="REMOVED",e.RESTARTING="RESTARTING",e.UNKNOWN="UNKNOWN",e.UPGRADING="UPGRADING",e.PAUSING="PAUSING",e.RESTORING="RESTORING",e.RESTORE_FAILED="RESTORE_FAILED",e.PAUSE_FAILED="PAUSE_FAILED",e}({})},77987:(e,t,a)=>{"use strict";a.d(t,{L:()=>l});var s=a(71459);let l=e=>e.status===s.K.ACTIVE_HEALTHY},79960:e=>{e.exports={button:"TechStackSelector_button__pszsB"}},90465:(e,t,a)=>{"use strict";a.d(t,{d:()=>l});var s=a(11405);function l(e){let{words:t,typingSpeed:a=30,deletingSpeed:l=30,pauseBetweenWords:r=1500,prefix:n=""}=e,[i,o]=(0,s.useState)(0),[d,c]=(0,s.useState)(""),[u,m]=(0,s.useState)(!1);return(0,s.useEffect)(()=>{if(!t||0===t.length)return;let e=setTimeout(()=>{let e=t[i];if(e)if(u){if(""===d){m(!1),o(e=>(e+1)%t.length);return}c(e.substring(0,d.length-1))}else{if(d===e)return void setTimeout(()=>m(!0),r);c(e.substring(0,d.length+1))}},u?l:a);return()=>clearTimeout(e)},[d,i,u,t,a,l,r]),n+d}}}]);