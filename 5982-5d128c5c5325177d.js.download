try{let e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},s=(new e.Error).stack;s&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[s]="5608b208-0883-48ef-abd5-c3b701ba8383",e._sentryDebugIdIdentifier="sentry-dbid-5608b208-0883-48ef-abd5-c3b701ba8383")}catch(e){}"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5982],{39:(e,s,a)=>{a.d(s,{BK:()=>o,eu:()=>i,q5:()=>c});var t=a(99289),l=a(77319),r=a(11405),n=a(26551);let i=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(l.bL,{ref:s,className:(0,n.cn)("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",a),...r})});i.displayName=l.bL.displayName;let o=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(l._V,{ref:s,className:(0,n.cn)("aspect-square h-full w-full",a),...r})});o.displayName=l._V.displayName;let c=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(l.H4,{ref:s,className:(0,n.cn)("flex h-full w-full items-center justify-center rounded-full bg-muted",a),...r})});c.displayName=l.H4.displayName},4099:(e,s,a)=>{a.d(s,{_:()=>o});var t=a(99289),l=a(11405),r=a(39),n=a(99017),i=a(26551);let o=e=>{let{name:s,isInteractive:a,className:o,photoSrc:c,userColor:d,isWorkspace:m=!1,tooltipContent:u=s,...h}=e,p=s?s.charAt(0).toUpperCase():"",[x,f]=(0,l.useState)(!1);return(0,t.jsxs)(n.m_,{open:!!a&&!!s&&x,onOpenChange:f,children:[(0,t.jsx)(n.k$,{asChild:!0,children:(0,t.jsxs)(r.eu,{className:(0,i.cn)("h-[26px] w-[26px] shrink-0 border border-transparent text-xs",{["hover:bg-".concat(d)]:!c&&!m&&a,"cursor-pointer":a,["hover:border-".concat(d)]:a,["group-[.avatars]:hover:border-".concat(d)]:a,"group-[.avatars]:border-background":!0,"rounded-[8px] hover:border-transparent":m},o),...h,children:[(0,t.jsx)(r.BK,{className:"aspect-auto object-cover",src:c}),(0,t.jsx)(r.q5,{className:(0,i.cn)("font-medium text-white bg-".concat(d),m&&"rounded-[8px]",o),children:p})]})}),(0,t.jsx)(n.ZI,{children:u})]})}},5790:(e,s,a)=>{a.d(s,{Q:()=>r});var t=a(11405);let l=["brand-ocean-primary","brand-twilight-primary","brand-flamingo-primary","brand-bubblegum-primary","brand-saffron-primary","brand-tiger-primary"];function r(e){return(0,t.useMemo)(()=>{e||(e="fake-user");let s=function(e){let s=0;for(let a=0;a<e.length;a++)s=(s<<5)-s+e.charCodeAt(a),s&=s;return Math.abs(s)}(e)%l.length;return l[s]},[e])}},8497:(e,s,a)=>{a.d(s,{d:()=>l});var t=a(11405);function l(e,s){let[a,l]=(0,t.useState)(e);return(0,t.useEffect)(()=>{let a=setTimeout(()=>{l(e)},s);return()=>{clearTimeout(a)}},[e,s]),a}},13432:(e,s,a)=>{a.d(s,{I7:()=>r,Pf:()=>l,y:()=>n});var t=a(72384);async function l(e,s){let a=t.y.workspaceMemberships({workspaceId:s});await e.cancelQueries({queryKey:a.queryKey})}function r(e,s,a,l,r,n){var i,o;let c=t.y.workspaceMemberships({workspaceId:s}),d=e.getQueryData(c.queryKey);if(d&&e.setQueryData(c.queryKey,{...d,members:l(d.members),total:n?n(d.total):d.total,limit:d.limit,offset:null!=(i=d.offset)?i:0,has_more:d.has_more}),a){let i=t.y.searchWorkspaceMemberships({workspaceId:s,params:a}),c=e.getQueryData(i.queryKey);if(c){let s=r?r(c.members):l(c.members);e.setQueryData(i.queryKey,{...c,members:s,total:n?n(c.total):c.total,limit:c.limit,offset:null!=(o=c.offset)?o:0,has_more:c.has_more})}}}function n(e,s,a,l){let r={refetchType:(null==l?void 0:l.refetch)?"active":"none"};e.invalidateQueries({queryKey:t.y.workspaceMemberships({workspaceId:s}).queryKey,...r}),a&&e.invalidateQueries({queryKey:t.y.searchWorkspaceMemberships({workspaceId:s,params:a}).queryKey,...r})}},17651:(e,s,a)=>{a.d(s,{K4:()=>o,_A:()=>i,yj:()=>c});var t=a(34363),l=a(11405),r=a(72384),n=a(82360);function i(e){let{workspaceId:s}=e,[a,i]=(0,l.useState)({query:"",status:"all",limit:n.m,offset:0}),{data:o,isLoading:c,error:d}=(0,t.I)(r.y.searchWorkspaceMemberships({workspaceId:s,params:a})),m=(0,l.useCallback)(e=>{i(s=>{let a={...s,...e};return(void 0!==e.query||void 0!==e.status)&&(a.offset=0),a})},[]),u=(0,l.useCallback)(()=>{(null==o?void 0:o.has_more)&&i(e=>({...e,offset:(e.offset||0)+n.m}))},[null==o?void 0:o.has_more]);return{members:(null==o?void 0:o.members)||[],total:(null==o?void 0:o.total)||0,hasMore:(null==o?void 0:o.has_more)||!1,isLoading:c,error:d,search:m,loadMore:u,searchParams:a}}function o(e){let{workspaceId:s}=e,{data:a,isLoading:l,error:n}=(0,t.I)(r.y.searchWorkspaceMemberships({workspaceId:s,params:{query:"",status:"active",role:"owner",limit:1}}));return{owner:(null==a?void 0:a.members[0])||null,isLoading:l,error:n}}function c(e){let{workspaceId:s,status:a="active",enabled:l=!0}=e,{data:n}=(0,t.I)({...r.y.searchWorkspaceMemberships({workspaceId:s,params:{query:"",status:a,limit:1}}),enabled:l&&!!s});return{memberCount:(null==n?void 0:n.total)||0}}},26516:(e,s,a)=>{a.d(s,{H:()=>n,k:()=>i});var t=a(99289),l=a(11405);let r=(0,l.createContext)(null),n=()=>(0,l.useContext)(r),i=e=>{let{children:s,searchParams:a}=e;return(0,t.jsx)(r.Provider,{value:a,children:s})}},30394:(e,s,a)=>{a.d(s,{M:()=>p});var t=a(99289),l=a(11405),r=a(50471),n=a(98213),i=a(49944),o=a(5531),c=a(97757),d=a(66184),m=a(37552),u=a(31126);let h=e=>{var s,a;let{selectedRole:r,onRoleChange:n,roleOptions:d,disabled:m=!1,workspace:h}=e,[p,x]=(0,l.useState)(!1);return m?(0,t.jsx)(i.$,{variant:"ghost",size:"sm",className:"flex-shrink-0 gap-1.5 font-normal",disabled:!0,children:null==(a=d.find(e=>e.value===r))?void 0:a.label}):(0,t.jsxs)(o.rI,{open:p,onOpenChange:x,children:[(0,t.jsx)(o.ty,{asChild:!0,children:(0,t.jsxs)(i.$,{variant:"ghost",size:"sm",className:"flex-shrink-0 gap-1.5 font-normal",children:[null==(s=d.find(e=>e.value===r))?void 0:s.label,(0,t.jsx)(c.A,{name:"keyboard_arrow_down",size:"small"})]})}),(0,t.jsx)(o.SQ,{children:(0,t.jsx)(o.Hr,{value:r,onValueChange:e=>{n(e),x(!1)},children:d.map(e=>(0,t.jsxs)(o.Ht,{value:e.value,className:"hover:bg-accent",children:[e.label,("read"===e.value||"viewer"===e.value)&&h&&(0,t.jsx)(u.M,{workspace:h,requiredPlanCategory:"pro"})]},e.value))})})]})},p=e=>{let{onInvite:s,isInviting:a,roleOptions:o,defaultRole:c,canSelectRoles:u=!0,placeholder:p="Add emails",completelyDisabled:x=!1,onInputChange:f,workspace:g}=e,[w,v]=(0,l.useState)([]),[j,b]=(0,l.useState)(""),[y,N]=(0,l.useState)(c),_=w.length>0||""!==j.trim(),E=async()=>{let e=[...w],a=j.trim();if(""===a||w.includes(a)||(e.push(a),v(e),b("")),0===e.length)return;if(e.length>0&&!e.every(e=>(0,d.xf)(e)))return void(1===e.length?n.toast.error("Invalid email address",{description:"Please check the email address and try again."}):n.toast.error("Invalid email address",{description:"One or more email addresses are invalid. Please check and try again."}));let{success:t}=await s({emails:e,role:y});t&&(v([]),b(""),null==f||f(""))};(0,r.vC)("mod+enter",e=>{e.preventDefault(),a||E()},{enableOnFormTags:!0});let C=""===j.trim()&&0===w.length;return(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(m.u,{tags:w,setTags:v,inputValue:j,setInputValue:e=>{b(e),null==f||f(e)},placeholder:p,disabled:x,className:"min-w-0 flex-1",validateItem:e=>(0,d.xf)(e)?null:"This is not a valid email."}),_&&(0,t.jsx)(h,{selectedRole:y,onRoleChange:N,roleOptions:o,disabled:!u||x,workspace:g}),(0,t.jsx)(i.$,{onClick:E,variant:"affirmative",className:"flex-shrink-0",disabled:a||C||x,loading:a,children:"Invite"})]})}},31126:(e,s,a)=>{a.d(s,{M:()=>o});var t=a(99289);a(11405);var l=a(97115),r=a(26551),n=a(97757),i=a(99017);let o=e=>{let{workspace:s,requiredPlanCategory:a,className:o,...c}=e,d=(0,l.TP)(a),m=(0,l._R)(s.plan),u=(0,l.m6)(s.plan),h=!(0,l.my)(u,a);return(0,t.jsxs)(i.m_,{children:[(0,t.jsx)(i.k$,{asChild:!0,children:(0,t.jsxs)("div",{className:(0,r.cn)("flex h-5 cursor-pointer items-center gap-1 rounded-sm bg-brand-twilight px-2 py-px text-xs font-medium text-brand-twilight-foreground hover:bg-brand-twilight/80",o),...c,children:[(0,t.jsx)(n.A,{name:"lovable_icon",size:"xsmall"}),(0,t.jsx)("p",{className:(0,r.cn)("flex",{hidden:!h}),children:d})]})}),(0,t.jsx)(i.ZI,{children:h?(0,t.jsxs)("p",{children:["Upgrade to ",d," to access this feature."]}):(0,t.jsxs)("p",{children:["Included in ",m]})})]})}},37552:(e,s,a)=>{a.d(s,{u:()=>d});var t=a(99289),l=a(53417),r=a(26551),n=a(9562),i=a(97757);let o=/[,;\n\t]+/g,c=/\s+/g,d=e=>{let{tags:s,setTags:a,inputValue:d,setInputValue:m,placeholder:u="Type and press Enter...",className:h="",validateItem:p,error:x,...f}=e,g=e=>{a(s.filter((s,a)=>a!==e))},w=s.some(e=>!!p&&p(e));return(0,t.jsxs)("div",{className:(0,r.cn)("flex min-h-9 w-full min-w-0 flex-wrap items-center gap-1.5 overflow-hidden rounded-md border border-input bg-transparent p-2 py-1.5 text-sm shadow-sm transition-colors focus-within:ring-1 focus-within:ring-ring",(x||w)&&"border-destructive focus-within:ring-destructive",h),children:[s.map((e,s)=>{let a=p?p(e):null;return(0,t.jsx)(n.Q,{showTooltip:!!a,tooltipContent:a||"",instant:!0,className:"min-w-0",children:(0,t.jsxs)(l.E,{variant:"secondary",className:"flex min-w-0 cursor-default items-center gap-1 rounded-sm px-1 py-0 text-xs font-medium",children:[a&&(0,t.jsx)(i.A,{name:"warning_fill",className:"text-destructive-primary",size:"small"}),(0,t.jsx)("span",{className:"min-w-0 max-w-[160px] overflow-hidden truncate md:whitespace-nowrap",children:e}),(0,t.jsx)("button",{type:"button",className:"flex-shrink-0 rounded-sm duration-100 ease-out hover:bg-muted-hover",onClick:()=>g(s),children:(0,t.jsx)(i.A,{name:"close_small"})})]})},s)}),(0,t.jsx)("input",{type:"text",value:d,onChange:e=>m(e.target.value),onKeyDown:e=>{"Enter"!==e.key&&","!==e.key&&" "!==e.key||e.metaKey||""===d.trim()?"Backspace"===e.key&&""===d&&s.length>0&&g(s.length-1):(e.preventDefault(),(e=>{s.includes(e)||""===e.trim()||a([...s,e]),m("")})(d.trim()))},onPaste:e=>{e.preventDefault();let t=e.clipboardData.getData("text").replace(o," ").replace(c," ").trim().split(" ").map(e=>e.trim()).filter(e=>""!==e),l=new Set(s),r=[...s];t.forEach(e=>{let s=""!==e.trim();!l.has(e)&&s&&(r.push(e),l.add(e))}),a(r)},placeholder:u,className:"min-w-[80px] flex-1 bg-transparent text-sm outline-none placeholder:text-muted-foreground",...f})]})};d.displayName="TagsInput"},44593:(e,s,a)=>{a.d(s,{H:()=>m});var t=a(99289),l=a(22291),r=a(76704),n=a(40177),i=a(49944),o=a(6072),c=a(15207),d=a(86077);function m(e){let{open:s,onOpenChange:a}=e,m=(0,l.useRouter)(),u=(0,r.c3)("AuthDialog"),h=(0,n.Tp)(c.x.GetStartedForFree);return(0,t.jsx)(o.lG,{open:s,onOpenChange:a,children:(0,t.jsxs)(o.Cf,{className:"gap-4",size:"sm",children:[(0,t.jsxs)("div",{className:"flex flex-col items-start gap-4",children:[(0,t.jsx)(d.Fy,{className:"h-9"}),(0,t.jsxs)(o.c7,{children:[(0,t.jsx)(o.L3,{className:"text-3xl",children:u("title")}),(0,t.jsx)(o.rr,{children:u("description")})]})]}),(0,t.jsxs)("div",{className:"mt-4 flex flex-col gap-3",children:[(0,t.jsx)(i.$,{onClick:()=>m.push("/login"),className:"w-full",variant:"outline",children:u("logIn")}),(0,t.jsx)(i.$,{onClick:()=>m.push("/signup"),className:"w-full",children:u(h?"getStartedForFree":"signUp")})]})]})})}},45747:(e,s,a)=>{a.d(s,{P:()=>i});var t=a(99289),l=a(49612),r=a(53417),n=a(26551);let i=e=>{let{id:s,username:a,displayName:i,photoURL:o,avatarClassName:c,actionComponent:d,email:m,isCurrentUser:u=!1,isInvited:h=!1,showBadge:p=!0}=e;return(0,t.jsxs)("div",{className:"flex items-center justify-start gap-3 py-1 md:flex-nowrap",children:[(0,t.jsx)(l.H,{className:(0,n.cn)(c,h&&"opacity-60"),user:{id:s,username:null!=i?i:m},photoURL:o,isInteractive:!1}),(0,t.jsx)("div",{className:"flex min-w-0 flex-shrink items-center gap-4 ".concat(h&&"opacity-60"),children:(0,t.jsxs)("div",{className:"flex min-w-0 flex-col gap-0",children:[(0,t.jsxs)("div",{className:"flex-shrink truncate text-sm font-medium leading-tight",children:[i," ",u&&(0,t.jsx)("span",{className:"font-normal",children:"(you)"})]}),(0,t.jsx)("span",{className:"max-w-[150px] flex-shrink truncate text-xs text-muted-foreground",children:m})]})}),h&&p&&(0,t.jsx)(r.E,{variant:"outline",className:"hidden gap-1 bg-muted text-xs font-medium text-muted-foreground md:flex",children:"Invite sent"}),d&&(0,t.jsx)("div",{className:"ml-auto flex-shrink-0",children:d})]})}},49612:(e,s,a)=>{a.d(s,{H:()=>n});var t=a(99289),l=a(4099),r=a(5790);let n=e=>{var s;let{isInteractive:a=!1,className:n,user:i,photoURL:o,...c}=e,d=(0,r.Q)(null==i?void 0:i.id),m=(null==i||null==(s=i.attributes)?void 0:s.display_name)||(null==i?void 0:i.username)||(null==i?void 0:i.id);return(0,t.jsx)(l._,{name:m,isInteractive:a,photoSrc:o,userColor:d,className:n,...c})}},61461:(e,s,a)=>{a.d(s,{A:()=>i});var t=a(99289),l=a(11405),r=a(49944),n=a(6072);let i=e=>{let{title:s="Remove",targetName:a,descriptionTemplate:i="Are you sure you want to remove {name}? They will no longer have access.",confirmButtonText:o="Remove",cancelButtonText:c="Cancel",onConfirm:d,onCancel:m}=e,[u,h]=(0,l.useState)(!1),p=async()=>{h(!0);try{await d()}finally{h(!1)}},x=i.replace("{name}",a);return(0,t.jsxs)(n.Cf,{size:"sm",children:[(0,t.jsxs)(n.c7,{children:[(0,t.jsx)(n.L3,{children:s}),(0,t.jsx)(n.rr,{children:x})]}),(0,t.jsxs)(n.Es,{className:"gap-2 sm:justify-end",children:[(0,t.jsx)(r.$,{variant:"outline",onClick:m,disabled:u,children:c}),(0,t.jsx)(r.$,{variant:"destructive",onClick:p,disabled:u,loading:u,children:u?"Removing...":o})]})]})}},66184:(e,s,a)=>{a.d(s,{VC:()=>o,wO:()=>i,xf:()=>n});var t=a(99490);let l=t.Yj().min(1,"Email is required").email("Please enter a valid email address"),r=t.YO(l).max(3,"You can invite up to 3 team members").refine(e=>new Set(e.map(e=>e.toLowerCase())).size===e.length,{message:"Duplicate email addresses are not allowed"});function n(e){return l.safeParse(e).success}function i(e){let s=e.filter(e=>""!==e.trim());return r.safeParse(s)}function o(e,s){let a=e.filter(e=>""!==e.trim()),t=r.safeParse(a),n=[null,null,null];for(let s=0;s<3;s++){let a=e[s];if(a&&a.trim()){let e=l.safeParse(a);if(!e.success){var i;n[s]=(null==(i=e.error.errors[0])?void 0:i.message)||"Invalid email address"}}}let o=[];return t.success||(o=t.error.errors.filter(e=>0===e.path.length).map(e=>e.message)),s&&a.some(e=>e.trim().toLowerCase()===s.trim().toLowerCase())&&o.push("You cannot invite yourself"),{globalErrors:o,fieldErrors:n}}},74846:(e,s,a)=>{a.d(s,{Cb:()=>T,X5:()=>Y});var t=a(11405),l=a(70999),r=a(99289),n=a(37079),i=a(43328),o=a(2906),c=a(66608),d=a(73728),m=a(91352),u=a(6072),h=a(16161),p=a(6919),x=a(34936),f=a(33256),g=a(99280),w=a(97115),v=a(19550),j=a.n(v),b=a(96057);let y=()=>(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{children:"We couldn't load the data needed to upgrade your workspace."}),(0,r.jsxs)("p",{children:["Please refresh the page and try again. If the problem continues, contact our"," ",(0,r.jsx)(j(),{href:"/support",className:"underline",children:"Support"}),"."]})]}),N=e=>{let{hasFetchedWorkspace:s}=e;return(0,r.jsx)(u.Cf,{className:"max-h-[90vh] overflow-y-auto",size:"lg",children:(0,r.jsxs)(u.c7,{children:[(0,r.jsx)(u.L3,{className:"text-start text-3xl font-medium",children:"Building something big?"}),s?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(u.rr,{className:"text-sm text-muted-foreground",children:"Out of credits."}),(0,r.jsx)(b.O,{})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(u.rr,{className:"text-sm text-muted-foreground",children:"Loading..."}),(0,r.jsx)(y,{})]})]})})};var _=a(81797),E=a(98213),C=a(45747),I=a(17651),k=a(49944),P=a(86077),R=a(24159);let A=e=>{let{workspace:s,myWorkspaceRole:a,onSendPing:t,onDismiss:l,isSendingPing:n}=e,i=async()=>{_.Ay.capture(R.lY.OUT_OF_CREDITS_DIALOG.SEND_PING_CLICKED,{workspace_id:s.id,workspace_plan:s.plan,workspace_plan_type:s.plan_type,user_role:a}),await t(),E.toast.success("Ping sent!",{description:"The workspace owner has been notified about the credit shortage."})},{owner:o}=(0,I.K4)({workspaceId:s.id});return(0,r.jsxs)(u.Cf,{className:"max-h-[90vh] overflow-y-auto",size:"lg",children:[(0,r.jsx)(u.c7,{className:"flex flex-col gap-4",children:(0,r.jsxs)("div",{className:"flex flex-col items-start gap-1",children:[(0,r.jsx)(P.Fy,{className:"size-9"}),(0,r.jsx)(u.L3,{className:"text-start text-3xl font-medium",children:"Workspace out of credits"}),(0,r.jsx)(u.rr,{className:"text-start text-sm text-muted-foreground",children:"Only the workspace owner can upgrade and add more credits. Send a ping and continue building."})]})}),(0,r.jsx)("div",{className:"rounded-lg p-3",children:(0,r.jsx)(C.P,{id:(null==o?void 0:o.user_id)||s.owner_id,username:(null==o?void 0:o.display_name)||"Owner",displayName:null==o?void 0:o.display_name,email:(null==o?void 0:o.email)||"",avatarClassName:"h-8 w-8",actionComponent:(0,r.jsx)("span",{className:"text-xs text-muted-foreground",children:"Owner"}),showBadge:!1})}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)(k.$,{variant:"outline",className:"flex-1",onClick:()=>{_.Ay.capture(R.lY.OUT_OF_CREDITS_DIALOG.DISMISS_CLICKED,{workspace_id:s.id,workspace_plan:s.plan,workspace_plan_type:s.plan_type,user_role:a}),l()},children:"Dismiss"}),(0,r.jsx)(k.$,{className:"h-8 flex-1",onClick:i,disabled:n,children:n?"Sending...":"Send a ping"})]})]})};var O=a(99605),T=function(e){return e.INACTIVE_WORKSPACE="INACTIVE_WORKSPACE",e.FREE_DAILY_LIMIT="FREE_DAILY_LIMIT",e.FREE_MONTHLY_LIMIT="FREE_MONTHLY_LIMIT",e.LEGACY_DAILY_LIMIT="LEGACY_DAILY_LIMIT",e.PAID_MONTHLY_LIMIT="PAID_MONTHLY_LIMIT",e}({});let L={INACTIVE_WORKSPACE:{title:"Reactivate your workspace",subtitle:"Your workspace is inactive. Upgrade to continue building.",showCreditDifference:!1,showWhatsChanging:!1,showPlanFeatures:!0,showNextBillingCycle:!1,showPlanDropdown:!0},FREE_DAILY_LIMIT:{title:"Daily limit reached",subtitle:"You've used today's free credits. Upgrade to keep building.",showCreditDifference:!1,showWhatsChanging:!1,showPlanFeatures:!0,showNextBillingCycle:!1,showPlanDropdown:!0},FREE_MONTHLY_LIMIT:{title:"Monthly limit reached",subtitle:"You've used all your free credits this month. Upgrade to keep building.",showCreditDifference:!1,showWhatsChanging:!1,showPlanFeatures:!0,showNextBillingCycle:!1,showPlanDropdown:!0},LEGACY_DAILY_LIMIT:{title:"Daily limit reached",subtitle:"Your plan has daily limits. Upgrade to a modern plan with monthly credits.",showCreditDifference:!1,showWhatsChanging:!0,showPlanFeatures:!1,showNextBillingCycle:!0,showPlanDropdown:!0},PAID_MONTHLY_LIMIT:{title:"Need more credits?",subtitle:"You've used your monthly credits. Add more to continue this month.",showCreditDifference:!0,showWhatsChanging:!1,showPlanFeatures:!1,showNextBillingCycle:!0,showPlanDropdown:!0}};function D(e){let{workspace:s,membership:a,hasFetchedWorkspace:l,onClose:i,scenario:d}=e,{isAuthenticated:v,authUser:j}=(0,n.Z2)(),{userData:b}=(0,c.ur)(),{setPricingScenario:y,selectedProPlan:_,selectedBizPlan:E,currentPlan:C}=(0,o.et)(),{sendCreditsPing:I,isSendingPing:k}=function(e){let{workspaceId:s}=e,{mutateAsync:a,isPending:t}=(0,p.n)({mutationFn:async()=>(0,f.P)().post("/workspaces/".concat(s,"/credits-ping")),onError:e=>{(0,x.Ni)(e)}});return{sendCreditsPing:a,isSendingPing:t}}({workspaceId:(null==s?void 0:s.id)||""});(0,t.useEffect)(()=>{y("outOfCredits")},[y]);let P=(0,t.useMemo)(()=>"biz"===(0,w.m6)(C.id)?E:_,[C.id,_,E]),R=L[(0,t.useMemo)(()=>d||(s?function(e){var s,a;let t=e.plan,{isFreePlan:l,isInactivePlan:r,isAmbassadorPlan:n,isPaidPlan:i,isLegacyPlan:o}=(0,w.cb)(t),c=(null!=(s=e.billing_period_credits_limit)?s:0)>0,d=l&&(null!=(a=e.total_credits_used_in_billing_period)?a:0)>=O.le;return r?"INACTIVE_WORKSPACE":l&&!d?"FREE_DAILY_LIMIT":l&&d?"FREE_MONTHLY_LIMIT":(o||n)&&!c?"LEGACY_DAILY_LIMIT":"PAID_MONTHLY_LIMIT"}(s):T.FREE_DAILY_LIMIT),[d,s])],D=(0,t.useMemo)(()=>s?(0,g.Y)({currentPlan:C,targetPlanCategory:(0,w.m6)(P)}):[],[s,C,P]);if(!s)return(0,r.jsx)(N,{hasFetchedWorkspace:l});if(!v||!b)return(0,r.jsx)(u.Cf,{className:"max-h-[90vh] overflow-y-auto",size:"lg",children:(0,r.jsx)(h.E,{className:"h-[400px] w-full"})});let S=null==a?void 0:a.role;return(null==j?void 0:j.uid)!==s.owner_id?(0,r.jsx)(A,{workspace:s,myWorkspaceRole:S,onSendPing:async()=>{await I()},onDismiss:()=>{null==i||i()},isSendingPing:k}):(0,r.jsx)(m.n,{targetPlan:P,availablePlans:D,title:R.title,subtitle:R.subtitle,showCreditDifference:R.showCreditDifference,showWhatsChanging:R.showWhatsChanging,showPlanFeatures:R.showPlanFeatures,showNextBillingCycle:R.showNextBillingCycle,showPlanDropdown:R.showPlanDropdown})}function S(e){let{onClose:s,scenario:a}=e,t=(0,d.B5)(e=>e.projectWorkspace),l=(0,d.B5)(e=>e.membership),n=(0,d.B5)(e=>e.hasFetchedProjectWorkspace);return(0,r.jsx)(D,{workspace:t,membership:l,hasFetchedWorkspace:n,onClose:s,scenario:a})}function M(e){let{onClose:s,scenario:a}=e,t=(0,i.j4)(e=>e.currentWorkspace),l=(0,i.j4)(e=>e.membership),n=(0,i.j4)(e=>e.hasFetchedCurrentWorkspace);return(0,r.jsx)(D,{workspace:t,membership:l,hasFetchedWorkspace:n,onClose:s,scenario:a})}let F=function(){let{onClose:e,scenario:s}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,d.tY)()?(0,r.jsx)(S,{onClose:e,scenario:s}):(0,r.jsx)(M,{onClose:e,scenario:s})},Y=()=>{let e=(0,l.f)(F);return(0,t.useCallback)(s=>{e({childProps:{onClose:()=>e(!1),scenario:s}})},[e])}},79062:(e,s,a)=>{a.d(s,{Q:()=>t});function t(e){return Number.isInteger(e)?e.toString():e.toFixed(2)}},82360:(e,s,a)=>{a.d(s,{m:()=>X,$:()=>ee});var t=a(99289),l=a(19550),r=a.n(l),n=a(73728),i=a(39627),o=a(34363),c=a(33256),d=a(11405),m=a(98213),u=a(37079),h=a(23594),p=a(30394),x=a(95358),f=a(49944),g=a(97757),w=a(88852),v=a(99017),j=a(8497),b=a(97115),y=a(79312),N=a(61625),_=a(25276),E=a(89101),C=a(1596),I=a(49612),k=a(72384),P=a(79062);let R=e=>{let{workspace:s,memberships:a}=e,l=new Date().getMonth()+1,r=new Date().getFullYear(),{data:n}=(0,o.I)(k.y.workspaceUsage({workspaceId:null==s?void 0:s.id,month:l,year:r})),{data:i}=(0,o.I)(k.y.workspaceUserTotalUsage({workspaceId:null==s?void 0:s.id})),c=(0,d.useMemo)(()=>null==i?void 0:i.map(e=>{let s=a.find(s=>s.user_id===e.user_id);return s?{...e,membership:s}:null}).filter(e=>null!==e).sort((e,s)=>s.count-e.count),[i,a]),m=(0,d.useMemo)(()=>null==n?void 0:n.user_usages.map(e=>{let s=a.find(s=>s.user_id===e.user_id);return s?{...e,membership:s}:null}).filter(e=>null!==e).sort((e,s)=>s.count-e.count),[n,a]);return(0,t.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,t.jsxs)("p",{className:"pb-2 text-sm text-muted-foreground",children:["Showing usage for ",(0,C.GP)(new Date(r,l-1),"MMMM yyyy"),"."]}),(0,t.jsx)("div",{className:"flex flex-col gap-2",children:(null==m?void 0:m.length)===0?(0,t.jsx)("div",{className:"text-sm text-muted-foreground",children:"No usage data for this period. Usage will appear here once members begin using the workspace."}):null==m?void 0:m.map(e=>(0,t.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(I.H,{user:{id:e.user_id,username:e.membership.display_name||e.membership.email},photoURL:e.membership.photo_url}),(0,t.jsx)("p",{className:"text-sm font-medium",children:e.membership.display_name||e.membership.email})]}),(0,t.jsxs)("div",{className:"text-muted-foreground",children:[(0,P.Q)(e.count)," credit",1===e.count?"":"s"," used"]})]},e.user_id))}),c&&c.length>0&&(0,t.jsx)(t.Fragment,{children:(0,t.jsxs)("div",{className:"border-t pt-4",children:[(0,t.jsx)("p",{className:"pb-2 text-sm text-muted-foreground",children:"Total usage across all months."}),(0,t.jsx)("div",{className:"flex flex-col gap-2",children:c.map(e=>(0,t.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(I.H,{user:{id:e.user_id,username:e.membership.display_name||e.membership.email},photoURL:e.membership.photo_url}),(0,t.jsx)("p",{className:"text-sm font-medium",children:e.membership.display_name||e.membership.email})]}),(0,t.jsxs)("div",{className:"font-medium text-muted-foreground",children:[(0,P.Q)(e.count)," credit",1===e.count?"":"s"," total"]})]},e.user_id))})]})})]})};var A=a(45747),O=a(70999),T=a(61461);let L=e=>{let{memberName:s,onConfirm:a,onCancel:l}=e;return(0,t.jsx)(T.A,{title:"Remove workspace member",targetName:s,descriptionTemplate:"Are you sure you want to remove ".concat(s," from this workspace? They will no longer have access to any workspace projects or resources."),onConfirm:a,onCancel:l})};var D=a(5531),S=a(89748),M=a(31126),F=a(48591),Y=a(51252),U=a(6919),W=a(34936),V=a(26516),K=a(13432);let B={owner:"Owner",admin:"Admin",member:"Editor",viewer:"Viewer"},Z={owner:"Owners can manage all collaborators, projects, and connections.",admin:"Admins can manage editors, projects, and connections.",member:"Editors can only create and edit projects.",viewer:"Viewers can only view projects."},H=e=>{var s,a;let{currentMembership:l,workspaceId:r,workspace:n,permissions:i}=e,[o,m]=(0,d.useState)(null!=(s=l.monthly_credit_limit)?s:void 0),[h,p]=(0,d.useState)(!1),j=(0,d.useRef)(null),{authUser:N}=(0,u.Z2)(),_=l.user_id===(null==N?void 0:N.uid),E=(0,O.f)(L),C=!l.joined_at||""===l.joined_at,{isPaidPlan:I}=(0,b.cb)(n.plan),k=(0,x.BK)(),P=y.ss.some(e=>i.includes(e)),R=i.includes(y.eZ.AddWorkspaceViewers),T=(0,y.mk)(l.role,_,i),H=i.includes(y.eZ.UpdateWorkspaceCreditLimit),{updateWorkspaceMemberRole:q}=function(e){let{workspaceId:s}=e,a=(0,Y.jE)(),t=(0,V.H)(),{mutateAsync:l}=(0,U.n)({mutationFn:async e=>{let{userId:a,role:t}=e,l=(0,c.P)();return await l.put("/workspaces/".concat(s,"/memberships/").concat(a),{role:t})},onMutate:async e=>{await (0,K.Pf)(a,s),(0,K.I7)(a,s,t,s=>s.map(s=>s.user_id===e.userId?{...s,role:e.role}:s))},onSuccess:async e=>{e&&(0,K.I7)(a,s,t,s=>s.map(s=>s.user_id===e.user_id?e:s)),(0,K.y)(a,s,t,{refetch:!1})},onError:()=>{(0,K.y)(a,s,t,{refetch:!0})}});return{updateWorkspaceMemberRole:l}}({workspaceId:r}),{updateWorkspaceMemberCreditLimit:z}=function(e){let{workspaceId:s}=e,a=(0,Y.jE)(),t=(0,V.H)(),{mutateAsync:l}=(0,U.n)({mutationFn:async e=>{let{userId:a,monthlyCreditLimit:t}=e,l=(0,c.P)();await l.put("/user/workspaces/".concat(s,"/memberships/").concat(a),{monthly_credit_limit:null!=t?t:-1})},onMutate:async e=>{await (0,K.Pf)(a,s),(0,K.I7)(a,s,t,s=>s.map(s=>s.user_id===e.userId?{...s,monthly_credit_limit:-1===e.monthlyCreditLimit?null:e.monthlyCreditLimit}:s))},onError:e=>{(0,W.Ni)(e)},onSettled:()=>{(0,K.y)(a,s,t)}});return{updateWorkspaceMemberCreditLimit:l}}({workspaceId:r}),{removeWorkspaceMember:$}=function(e){let{workspaceId:s}=e,a=(0,Y.jE)(),t=(0,V.H)(),{mutateAsync:l}=(0,U.n)({mutationFn:async e=>{let{userId:a}=e,t=(0,c.P)();await t.delete("/workspaces/".concat(s,"/memberships/").concat(a))},onMutate:async e=>{await (0,K.Pf)(a,s),(0,K.I7)(a,s,t,s=>s.filter(s=>s.user_id!==e.userId),void 0,e=>Math.max(0,e-1))},onError:e=>{(0,W.Ni)(e)},onSettled:()=>{(0,K.y)(a,s,t)}});return{removeWorkspaceMember:l}}({workspaceId:r}),G=(0,d.useCallback)(async e=>{C||await z({userId:l.user_id,monthlyCreditLimit:isNaN(null!=e?e:0)?-1:e})},[l.user_id,C,z]);(0,d.useEffect)(()=>{let e=e=>{h&&j.current&&!j.current.contains(e.target)&&G(o).then(()=>{p(!1)})};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[h,o,z,G]);let Q=async e=>{if(!C){if("viewer"===e&&!R)return void k(x.KU.PRO_CHANGE_VIEWER_ROLE);await q({userId:l.user_id,role:e})}},J=()=>{E({childProps:{memberName:l.display_name||l.username,onConfirm:async()=>{await $({userId:l.user_id}),E(!1)},onCancel:()=>E(!1)}})},X=(0,F.ZS)(),ee=(0,t.jsxs)(t.Fragment,{children:[H&&X&&(0,t.jsxs)(v.m_,{delayDuration:600,children:[(0,t.jsx)(v.k$,{asChild:!0,children:h?(0,t.jsxs)("div",{ref:j,className:"relative flex items-center",children:[(0,t.jsx)(w.p,{placeholder:"Limit / month",value:o||"",className:"max-w-32 pr-8 text-xs",onChange:e=>m(parseInt(e.target.value)),onKeyDown:e=>{if("Enter"===e.key)G(o).then(()=>{p(!1)});else if("Escape"===e.key){var s;m(null!=(s=l.monthly_credit_limit)?s:void 0),p(!1)}},autoFocus:!0}),(0,t.jsx)(f.$,{variant:"ghost",size:"icon",className:"absolute right-0.5 h-8 w-8 shadow-none hover:bg-accent hover:shadow-none",onClick:()=>{G(o).then(()=>{p(!1)})},children:(0,t.jsx)(g.A,{name:"check",size:"small"})})]}):(0,t.jsx)(f.$,{variant:"ghost",size:"sm",className:"text-xs shadow-none hover:bg-accent hover:shadow-none",onClick:()=>p(!0),children:(null==l?void 0:l.monthly_credit_limit)?"".concat(l.monthly_credit_limit," credits/mo"):"No limit"})}),(0,t.jsx)(v.ZI,{className:"max-w-[30ch]",children:"Update credit limits for this member"})]}),(0,t.jsxs)(D.rI,{children:[(0,t.jsxs)(v.m_,{children:[(0,t.jsx)(v.k$,{asChild:!0,children:(0,t.jsx)(D.ty,{asChild:!0,disabled:!T||!P,children:(0,t.jsxs)(f.$,{"aria-haspopup":"true",variant:"ghost",children:[C?"Pending":B[l.role]," ",(0,t.jsx)(g.A,{name:"keyboard_arrow_down",size:"small",className:"opacity-50"})]})})}),(0,t.jsx)(v.ZI,{className:"max-w-[30ch]",children:C?"This user has been invited to join as ".concat(B[l.role]):Z[l.role]})]}),(0,t.jsx)(D.SQ,{align:"end",children:C?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(S.t,{label:"Pending",isSelected:!0,onClick:()=>{},disabled:!0}),(0,t.jsx)(S.t,{label:"Remove",destructive:!0,onClick:J,disabled:!T})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(S.t,{label:"Owner",isSelected:"owner"===l.role,onClick:()=>Q("owner"),disabled:!i.includes(y.eZ.AddWorkspaceOwners)||!T,tooltip:Z.owner}),(0,t.jsx)(S.t,{label:"Admin",isSelected:"admin"===l.role,onClick:()=>Q("admin"),disabled:!i.includes(y.eZ.AddWorkspaceAdmins)||!T,tooltip:Z.admin}),(0,t.jsx)(S.t,{label:"Editor",isSelected:"member"===l.role,onClick:()=>Q("member"),disabled:!i.includes(y.eZ.AddWorkspaceEditors)||!T,tooltip:Z.member}),(0,t.jsx)(S.t,{label:"Viewer",isSelected:"viewer"===l.role,onClick:()=>Q("viewer"),disabled:!i.includes(y.eZ.AddWorkspaceViewers)||!T,tooltip:I?Z.viewer:"Viewer role requires a Pro plan. Click to upgrade.",rightElement:(0,t.jsx)(M.M,{workspace:n,requiredPlanCategory:"pro"})}),(0,t.jsx)(S.t,{label:_?"Leave":"Remove",destructive:!0,onClick:J,disabled:!T})]})})]})]});return(0,t.jsx)(A.P,{id:l.user_id,username:l.username,displayName:null!=(a=l.display_name)?a:l.email,photoURL:l.photo_url,avatarClassName:"h-8 w-8",actionComponent:ee,isCurrentUser:_,email:l.email,isInvited:C})},q=[{label:"All",value:"all"},{label:"Active",value:"active"},{label:"Pending",value:"pending"}],z=e=>{let{currentPage:s,totalPages:a,onPreviousPage:l,onNextPage:r,onFirstPage:n,onLastPage:i,totalCount:o,pageSize:c}=e;if(a<=1)return null;let d=Math.min(s*c,o);return(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"text-sm text-muted-foreground",children:["Showing ",(s-1)*c+1,"-",d," of ",o," members"]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(f.$,{variant:"outline",size:"sm",onClick:n,disabled:1===s,children:(0,t.jsx)(g.A,{name:"first_page",className:"h-4 w-4"})}),(0,t.jsx)(f.$,{variant:"outline",size:"sm",onClick:l,disabled:1===s,children:(0,t.jsx)(g.A,{name:"chevron_left",className:"h-4 w-4"})}),(0,t.jsxs)("span",{className:"text-sm font-medium",children:[s," of ",a]}),(0,t.jsx)(f.$,{variant:"outline",size:"sm",onClick:r,disabled:s===a,children:(0,t.jsx)(g.A,{name:"chevron_right",className:"h-4 w-4"})}),(0,t.jsx)(f.$,{variant:"outline",size:"sm",onClick:i,disabled:s===a,children:(0,t.jsx)(g.A,{name:"last_page",className:"h-4 w-4"})})]})]})},$=e=>{var s;let{memberships:a,workspace:l,searchParams:r,search:n,total:i,isLoading:o,PAGE_SIZE:c}=e,{authUser:C}=(0,u.Z2)(),[I,k]=(0,d.useState)(r.status||"all"),[P,A]=(0,d.useState)(r.query||""),O=(0,j.d)(P,250);(0,d.useEffect)(()=>{let e=O;e.length<3&&(e=""),n({query:e,offset:0,status:I})},[O,I,n]);let T="free"===(0,b.m6)(l.plan),L=(0,x.BK)(),{inviteWorkspaceMember:D,isInvitingMember:S}=(0,E.s)({workspaceId:l.id}),{exportMembers:M,isExporting:F}=function(e){let[s,a]=(0,d.useState)(!1);return{exportMembers:async()=>{try{a(!0);let s=await _.b.getValidToken(),t={};s&&(t.Authorization="Bearer ".concat(s));let l=(0,N.N)(),r=await fetch("".concat(l,"/workspaces/").concat(e,"/memberships/export"),{method:"GET",headers:t,credentials:"include"});if(!r.ok)throw Error("Export failed: ".concat(r.statusText));let n=r.headers.get("Content-Disposition"),i=new Date,o=e=>String(e).padStart(2,"0"),c="workspace_members_".concat(i.getUTCFullYear(),"-").concat(o(i.getUTCMonth()+1),"-").concat(o(i.getUTCDate()),"_").concat(o(i.getUTCHours()),"-").concat(o(i.getUTCMinutes()),".csv");if(n){let e=n.match(/filename="([^"]+)"/i);(null==e?void 0:e[1])&&(c=e[1])}let d=await r.blob(),m=URL.createObjectURL(d),u=document.createElement("a");return u.href=m,u.download=c,u.style.visibility="hidden",document.body.appendChild(u),u.click(),document.body.removeChild(u),URL.revokeObjectURL(m),{success:!0}}catch(e){return{success:!1,error:e}}finally{a(!1)}},isExporting:s}}(l.id),Y=async()=>{let e=m.toast.loading("Preparing CSV export..."),s=await M();(null==s?void 0:s.success)?m.toast.success("Export ready. Download should begin shortly.",{id:e,duration:4e3}):m.toast.error("Export failed. Please try again.",{id:e})},U=async e=>{let{emails:s,role:a}=e;if(0===s.length)return{success:!1};if("viewer"===a&&T)return L(x.KU.PRO_CHANGE_VIEWER_ROLE),{success:!1};let t=0;for(let e of s)await D({email:e,role:a}),t++;return{success:t>0}},W=e=>{A(e)},{permissions:V}=(0,h.S)(),K=V.includes(y.eZ.ViewWorkspaceUsage),B=y.ss.some(e=>V.includes(e));return(0,t.jsxs)("div",{className:"flex flex-col gap-6",children:[(0,t.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,t.jsx)("h4",{className:"text-sm font-medium",children:"Invite new members"}),(0,t.jsx)(p.M,{onInvite:e=>{let{emails:s,role:a}=e;return U({emails:s,role:a})},isInviting:S,roleOptions:[{value:"admin",label:"Admin"},{value:"member",label:"Editor"},{value:"viewer",label:"Viewer"}],canSelectRoles:B,defaultRole:"member",placeholder:"Add emails",completelyDisabled:!B,workspace:l})]}),(0,t.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("h4",{className:"text-sm font-medium",children:"Members"}),(P||"all"!==I)&&(0,t.jsxs)("span",{className:"text-sm text-muted-foreground",children:[i," members found"]})]}),K&&(0,t.jsxs)(v.m_,{children:[(0,t.jsx)(v.k$,{asChild:!0,children:(0,t.jsx)(f.$,{variant:"outline",size:"sm",onClick:Y,disabled:F,"aria-label":"Export members CSV",children:F?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(g.A,{name:"refresh",className:"mr-1 h-4 w-4 animate-spin"}),"Exporting..."]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(g.A,{name:"download",className:"mr-1 h-4 w-4"}),"Export"]})})}),(0,t.jsx)(v.ZI,{align:"end",children:"Exports all workspace members as a CSV, including monthly usage and credit limits."})]})]}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(g.A,{name:"search",className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),(0,t.jsx)(w.p,{type:"text",placeholder:"Search members by name or email...",value:P,onChange:e=>W(e.target.value),className:"pl-9"}),P&&(0,t.jsx)(f.$,{variant:"ghost",size:"sm",className:"absolute right-1 top-1/2 h-6 w-6 -translate-y-1/2 p-0",onClick:()=>W(""),children:(0,t.jsx)(g.A,{name:"close",className:"h-3 w-3"})})]}),(0,t.jsx)("div",{className:"flex gap-2",children:q.map(e=>{let{label:s,value:a}=e;return(0,t.jsx)(f.$,{variant:I===a?"default":"outline",size:"sm",onClick:()=>{k(a)},className:"text-xs",children:s},a)})}),(0,t.jsx)("div",{className:"flex flex-col gap-2 border-b pb-3",children:o?(0,t.jsx)("div",{className:"flex items-center justify-center py-8 text-sm text-muted-foreground",children:"Loading members..."}):a.length>0?a.map(e=>e?(0,t.jsx)(H,{currentMembership:e,workspaceId:l.id,workspace:l,permissions:V},"".concat(e.email,"-").concat(e.user_id)):null):(0,t.jsx)("div",{className:"flex items-center justify-center py-8 text-sm text-muted-foreground",children:P||"all"!==I?"No members found".concat(P?' for "'.concat(P,'"'):""):"No members found"})}),(0,t.jsx)(z,{currentPage:Math.floor((null!=(s=r.offset)?s:0)/c)+1,totalPages:Math.ceil(i/c),onPreviousPage:()=>{var e;return n({offset:Math.max(0,(null!=(e=r.offset)?e:0)-c)})},onNextPage:()=>{var e;return n({offset:(null!=(e=r.offset)?e:0)+c})},onFirstPage:()=>n({offset:0}),onLastPage:()=>n({offset:Math.floor((i-1)/c)*c}),totalCount:i,pageSize:c})]}),K&&a&&(0,t.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,t.jsx)("h4",{children:"Usage"}),(0,t.jsx)(R,{workspace:l,memberships:a})]})]})};var G=a(17651);function Q(e){let{data:s,isLoading:a}=(0,o.I)({queryKey:["workspace",e,"maxSeats"],queryFn:async()=>{let s=(0,c.P)();return(await s.get("/workspaces/".concat(e,"/max-seats"))).max_seats},enabled:!!e}),{memberCount:t}=(0,G.yj)({workspaceId:e,status:"all"});return{maxSeats:s,isLoadingMaxSeats:a,memberCount:t}}function J(e,s,a,l){return(0,t.jsxs)(t.Fragment,{children:["Inviting people to ",(0,t.jsx)("strong",{children:e.name||"the workspace"})," gives access to workspace shared projects and credits."," ",null!=a?(0,t.jsxs)(t.Fragment,{children:["You're using ",s,"/",l?"...":a," seats. Need more?"," ",(0,t.jsx)(r(),{className:"underline",target:"_blank",href:"https://enterpriseform.lovable.app/",children:"Contact us"}),"."]}):(0,t.jsxs)(t.Fragment,{children:["You have ",s," people in this workspace."]})]})}let X=20,ee=e=>{let{workspace:s}=e,a=(0,n.tY)(),{members:l,total:r,isLoading:i,search:o,searchParams:c}=(0,G._A)({workspaceId:s.id});return a?(0,t.jsx)(ea,{workspace:s,members:l,total:r,isLoading:i,search:o,searchParams:c}):(0,t.jsx)(es,{workspace:s,members:l,total:r,isLoading:i,search:o,searchParams:c})};function es(e){let{workspace:s,members:a,total:l,isLoading:r,search:n,searchParams:o}=e,{maxSeats:c,isLoadingMaxSeats:d,memberCount:m}=Q(s.id),u=J(s,m,c,d);return(0,t.jsx)(i.Pt,{title:"People",value:"people",description:u,docsLink:"https://docs.lovable.dev/user-guides/teams",children:(0,t.jsx)(V.k,{searchParams:o,children:(0,t.jsx)($,{memberships:a,workspace:s,searchParams:o,search:n,total:l,isLoading:r,PAGE_SIZE:X})})})}function ea(e){let{workspace:s,members:a,total:l,isLoading:r,search:n,searchParams:o}=e,{maxSeats:c,isLoadingMaxSeats:d,memberCount:m}=Q(s.id),u=J(s,m,c,d);return(0,t.jsx)(i.Pt,{title:"People",value:"people",description:u,children:(0,t.jsx)($,{memberships:a,workspace:s,searchParams:o,search:n,total:l,isLoading:r,PAGE_SIZE:X})})}},89101:(e,s,a)=>{a.d(s,{s:()=>d});var t=a(51252),l=a(6919),r=a(34936),n=a(33256),i=a(72384),o=a(26516),c=a(13432);function d(e){let{workspaceId:s}=e,a=(0,t.jE)(),d=(0,o.H)(),{mutateAsync:m,isPending:u}=(0,l.n)({mutationFn:async e=>{let{email:a,role:t="member"}=e;return(0,n.P)().post("/workspaces/".concat(s,"/memberships"),{email:a,role:t})},onSuccess:async e=>{if(e){let l=i.y.workspaceMemberships({workspaceId:s}),r=a.getQueryData(l.queryKey);if(r&&!r.members.some(s=>s.user_id===e.user_id)){var t;a.setQueryData(l.queryKey,{...r,members:[...r.members,e],total:r.total+1,limit:r.limit,offset:null!=(t=r.offset)?t:0,has_more:r.has_more})}if(d&&(!d.query||""===d.query.trim())){let t=i.y.searchWorkspaceMemberships({workspaceId:s,params:d}),l=a.getQueryData(t.queryKey);l&&(l.members.some(s=>s.user_id===e.user_id)||a.setQueryData(t.queryKey,{...l,members:[...l.members,e],total:l.total+1,limit:l.limit,offset:l.offset,has_more:l.has_more}))}}(0,c.y)(a,s,d)},onError:e=>{(0,r.Ni)(e)}});return{inviteWorkspaceMember:m,isInvitingMember:u}}},89748:(e,s,a)=>{a.d(s,{t:()=>c});var t=a(99289),l=a(11405),r=a(5531),n=a(97757),i=a(26551),o=a(99017);let c=e=>{let{label:s,isSelected:a,onClick:c,disabled:d,className:m,destructive:u,tooltip:h,rightElement:p}=e,[x,f]=(0,l.useState)(!1);return(0,t.jsxs)(o.m_,{open:void 0!==h&&x,onOpenChange:f,children:[(0,t.jsx)(o.k$,{asChild:!0,children:(0,t.jsxs)(r._2,{onClick:c,disabled:d,className:(0,i.cn)("flex items-center justify-between",{"bg-muted":a,"cursor-default":d,"text-destructive-primary focus:bg-destructive focus:text-destructive-foreground":u},m),children:[(0,t.jsxs)("span",{className:"flex items-center gap-2",children:[s,p]}),a&&(0,t.jsx)(n.A,{name:"check",size:"small"})]})}),(0,t.jsx)(o.ZI,{side:"right",className:"max-w-[30ch]",children:h})]})}},95358:(e,s,a)=>{a.d(s,{KU:()=>c,BK:()=>u});var t=a(11405),l=a(70999),r=a(99289),n=a(2906),i=a(91352),o=a(99280),c=function(e){return e.BIZ_TEMPLATES="BIZ_TEMPLATES",e.BIZ_PERSONAL_PROJECT="BIZ_PERSONAL_PROJECT",e.BIZ_SSO="BIZ_SSO",e.PRO_SUPPORT="PRO_SUPPORT",e.PRO_VIEWER_INVITE_LINK="PRO_VIEWER_INVITE_LINK",e.PRO_SEND_VIEWER_INVITE="PRO_SEND_VIEWER_INVITE",e.PRO_CHANGE_VIEWER_ROLE="PRO_CHANGE_VIEWER_ROLE",e.PRO_DOMAIN_CONNECT="PRO_DOMAIN_CONNECT",e.PRO_HIDE_BADGE="PRO_HIDE_BADGE",e.PRO_PRIVATE_PROJECT="PRO_PRIVATE_PROJECT",e.PRO_EDITORS_CAN_INVITE="PRO_EDITORS_CAN_INVITE",e}({});let d={BIZ_TEMPLATES:{title:"Upgrade to Business",subtitle:"You need to be on a business plan to use templates.",targetPlanCategory:"biz"},BIZ_PERSONAL_PROJECT:{title:"Upgrade to Business",subtitle:"You need to be on a business plan to make a project personal.",targetPlanCategory:"biz"},BIZ_SSO:{title:"Upgrade to Business",subtitle:"You need to be on a business plan to add SSO providers.",targetPlanCategory:"biz"},PRO_SUPPORT:{title:"Upgrade to Pro",subtitle:"You need to be on a paid plan to access direct support.",targetPlanCategory:"pro"},PRO_VIEWER_INVITE_LINK:{title:"Upgrade to Pro",subtitle:"You need to be on a pro plan to create a viewer invite link.",targetPlanCategory:"pro"},PRO_SEND_VIEWER_INVITE:{title:"Upgrade to Pro",subtitle:"You need to be on a pro plan to invite viewers.",targetPlanCategory:"pro"},PRO_CHANGE_VIEWER_ROLE:{title:"Upgrade to Pro",subtitle:"You need to be on a pro plan to change the role to viewer.",targetPlanCategory:"pro"},PRO_DOMAIN_CONNECT:{title:"Upgrade to Pro",subtitle:"You need to be on a pro plan to connect a domain.",targetPlanCategory:"pro"},PRO_HIDE_BADGE:{title:"Upgrade to Pro",subtitle:'You need to be on a pro plan to hide the "Edit with Lovable" badge.',targetPlanCategory:"pro"},PRO_PRIVATE_PROJECT:{title:"Upgrade to Pro",subtitle:"You need to be on a pro plan to make a project private.",targetPlanCategory:"pro"},PRO_EDITORS_CAN_INVITE:{title:"Upgrade to Pro",subtitle:"You need to be on a pro plan to change the editor invitation permissions.",targetPlanCategory:"pro"}},m=e=>{let{scenario:s}=e,a=d[s],{currentPlan:t}=(0,n.et)(),l=(0,o.Y)({currentPlan:t,targetPlanCategory:a.targetPlanCategory});return(0,r.jsx)(i.n,{targetPlan:l[0],availablePlans:l,title:a.title,subtitle:a.subtitle,showCreditDifference:!0,showWhatsChanging:!1,showPlanFeatures:!0,showNextBillingCycle:!0,showPlanDropdown:!1})},u=()=>{let e=(0,l.f)(m);return(0,t.useCallback)(s=>{e({childProps:{onClose:()=>e(!1),scenario:s}})},[e])}},96057:(e,s,a)=>{a.d(s,{O:()=>i});var t=a(99289),l=a(20234),r=a(16161),n=a(26551);let i=e=>{let{showEnterpriseCard:s=!1,className:a}=e;return(0,t.jsxs)("div",{className:(0,n.cn)("flex w-full flex-col gap-4",a),children:[(0,t.jsxs)("div",{className:"grid w-full grid-cols-1 gap-5 sm:grid-cols-3",children:[(0,t.jsxs)(l.Zp,{className:"flex h-full flex-col gap-3 px-4 py-6",children:[(0,t.jsx)(r.E,{className:"h-6 w-24"}),(0,t.jsxs)("div",{className:"flex items-baseline gap-1",children:[(0,t.jsx)(r.E,{className:"h-9 w-20"}),(0,t.jsx)(r.E,{className:"h-5 w-16"})]}),(0,t.jsx)(r.E,{className:"h-4 w-full"}),(0,t.jsx)(r.E,{className:"mb-2 h-9 w-full"}),(0,t.jsx)(r.E,{className:"h-9 w-full"}),(0,t.jsxs)("div",{className:"mt-2 flex flex-col gap-4",children:[(0,t.jsx)(r.E,{className:"h-4 w-32"}),(0,t.jsx)("div",{className:"flex flex-col gap-4",children:(0,t.jsxs)("div",{className:"flex items-start gap-2",children:[(0,t.jsx)(r.E,{className:"h-4 w-4"}),(0,t.jsx)(r.E,{className:"h-4 w-full"})]})})]})]}),(0,t.jsxs)(l.Zp,{className:"flex h-full flex-col gap-3 px-4 py-6",children:[(0,t.jsx)(r.E,{className:"h-6 w-24"}),(0,t.jsxs)("div",{className:"flex items-baseline gap-1",children:[(0,t.jsx)(r.E,{className:"h-9 w-20"}),(0,t.jsx)(r.E,{className:"h-5 w-16"})]}),(0,t.jsx)(r.E,{className:"h-4 w-full"}),(0,t.jsx)(r.E,{className:"mb-2 h-9 w-full"}),(0,t.jsx)(r.E,{className:"h-9 w-full"}),(0,t.jsxs)("div",{className:"mt-2 flex flex-col gap-4",children:[(0,t.jsx)(r.E,{className:"h-4 w-32"}),(0,t.jsx)("div",{className:"flex flex-col gap-4",children:[1,2,3,4,5].map(e=>(0,t.jsxs)("div",{className:"flex items-start gap-2",children:[(0,t.jsx)(r.E,{className:"h-4 w-4"}),(0,t.jsx)(r.E,{className:"h-4 w-full"})]},e))})]})]}),(0,t.jsxs)(l.Zp,{className:"flex h-full flex-col gap-3 px-4 py-6",children:[(0,t.jsx)(r.E,{className:"h-6 w-24"}),(0,t.jsxs)("div",{className:"flex items-baseline gap-1",children:[(0,t.jsx)(r.E,{className:"h-9 w-20"}),(0,t.jsx)(r.E,{className:"h-5 w-16"})]}),(0,t.jsx)(r.E,{className:"h-4 w-full"}),(0,t.jsx)(r.E,{className:"mb-2 h-9 w-full"}),(0,t.jsx)(r.E,{className:"h-9 w-full"}),(0,t.jsxs)("div",{className:"mt-2 flex flex-col gap-4",children:[(0,t.jsx)(r.E,{className:"h-4 w-32"}),(0,t.jsx)("div",{className:"flex flex-col gap-4",children:[1,2,3].map(e=>(0,t.jsxs)("div",{className:"flex items-start gap-2",children:[(0,t.jsx)(r.E,{className:"h-4 w-4"}),(0,t.jsx)(r.E,{className:"h-4 w-full"})]},e))})]})]})]}),s&&(0,t.jsxs)(l.Zp,{className:"flex w-full flex-col items-center justify-between gap-4 px-4 py-6 md:flex-row",children:[(0,t.jsxs)("div",{className:"flex flex-shrink flex-col gap-2",children:[(0,t.jsx)(r.E,{className:"h-6 w-32"}),(0,t.jsx)(r.E,{className:"h-4 w-64"})]}),(0,t.jsx)(r.E,{className:"h-9 w-36"})]})]})}}}]);