try{let e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="b68cdc05-bc9b-46d3-b310-20014b1f020e",e._sentryDebugIdIdentifier="sentry-dbid-b68cdc05-bc9b-46d3-b310-20014b1f020e")}catch(e){}(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8069],{2906:(e,t,a)=>{"use strict";a.d(t,{LS:()=>j,ET:()=>N,et:()=>k});var r=a(99289),n=a(51252),s=a(81797),l=a(11405),i=a(98213),o=a(70999),c=a(91352),d=a(99280),u=a(97115);let p={PRO_TO_PRO_UPGRADE:{title:"Add more credits",subtitle:"Here's what happens if you upgrade:",showCreditDifference:!0,showWhatsChanging:!1,showPlanFeatures:!1,showNextBillingCycle:!0,showPlanDropdown:!0},PRO_TO_BIZ_UPGRADE:{title:"Upgrade to Business",subtitle:"Here's what happens if you upgrade:",showCreditDifference:!0,showWhatsChanging:!0,showPlanFeatures:!1,showNextBillingCycle:!0,showPlanDropdown:!0},BIZ_TO_BIZ_UPGRADE:{title:"Add more credits",subtitle:"Here's what happens if you upgrade:",showCreditDifference:!0,showWhatsChanging:!1,showPlanFeatures:!1,showNextBillingCycle:!0,showPlanDropdown:!0}},m=e=>{let{targetPlan:t,scenario:a}=e,{currentPlan:n}=k(),s=p[a],l=(0,d.Y)({currentPlan:n,targetPlanCategory:(0,u.m6)(t)});return(0,r.jsx)(c.n,{targetPlan:t,availablePlans:l,title:s.title,subtitle:s.subtitle,showCreditDifference:s.showCreditDifference,showWhatsChanging:s.showWhatsChanging,showPlanFeatures:s.showPlanFeatures,showNextBillingCycle:s.showNextBillingCycle,showPlanDropdown:s.showPlanDropdown})};var g=a(4745),h=a(19618),f=a(67017),x=a(24159),v=a(99605),b=a(71302),_=a(273),w=a(37079),y=a(43328);let j="pendingPlanSelection",E=(0,l.createContext)(void 0),N=e=>{let{children:t,pricingScenario:a}=e,c=(0,n.jE)(),d=(0,y.j4)(e=>e.currentWorkspace),p=(0,y.Dx)(),N=(0,y.j4)(e=>{var t;return null==(t=e.membership)?void 0:t.role}),{authUser:k}=(0,w.Z2)(),{toCheckout:C,createPortalSession:P,checkoutLoading:D,isCreatePortalSessionLoading:I,cancelSubscription:S,isCancelSubscriptionLoading:A,cancelSubscriptionChanges:T,isCancelSubscriptionChangesLoading:L}=(0,h.R)(),[R,O]=(0,l.useState)(null!=a?a:"billing"),F=(0,l.useCallback)(async()=>{(null==d?void 0:d.id)?await P({workspaceId:d.id}):i.toast.error("Something went wrong.",{description:"Please, refresh the page and try again."})},[P,null==d?void 0:d.id]),M=(0,l.useCallback)(async(e,t)=>{(null==d?void 0:d.id)?(await e({workspaceId:d.id}),(null==p?void 0:p.store)&&p.store.setState({currentWorkspace:{...d,...t(d)}}),await new Promise(e=>setTimeout(async()=>{await c.invalidateQueries({queryKey:_.workspaceKeys.all}),e(void 0)},1e3))):i.toast.error("Something went wrong.",{description:"Please, refresh the page and try again."})},[d,null==p?void 0:p.store,c]),K=(0,l.useCallback)(()=>M(S,()=>({plan_scheduled:b.VL.FREE,plan_type_scheduled:void 0})),[M,S]),W=(0,l.useCallback)(()=>M(T,()=>({plan_scheduled:void 0,plan_type_scheduled:void 0})),[M,T]),U=(0,l.useMemo)(()=>{var e,t;return{id:null!=(e=null==d?void 0:d.plan)?e:b.VL.FREE,type:null!=(t=null==d?void 0:d.plan_type)?t:"monthly"}},[d]),G=(0,l.useMemo)(()=>{if(null==d?void 0:d.plan_scheduled){var e,t;return{id:null!=(e=null==d?void 0:d.plan_scheduled)?e:b.VL.FREE,type:null!=(t=null==d?void 0:d.plan_type_scheduled)?t:"monthly"}}},[d]),B="loggedOut"===R,{isFreePlan:V,isLegacyPlan:z}=(0,u.cb)(U.id),H=!!(!B&&k&&d&&k.uid===d.owner_id),Y=!B&&"member"===N,q=!B&&(!!N||H),$=!B&&!q&&!H,Z=.2*!!z,[X,J]=(0,l.useState)(U.type),Q=(0,l.useMemo)(()=>(0,u.yw)(U),[U]),ee=(0,l.useMemo)(()=>(0,u.LL)(U),[U]),[et,ea]=(0,l.useState)(Q),[er,en]=(0,l.useState)(ee),[es,el]=(0,l.useState)(null),[ei,eo]=(0,l.useState)(v.pB[0]);(0,l.useEffect)(()=>{ea(Q),en(ee),el(null),J(U.type)},[Q,ee,R,U]);let ec=(0,l.useCallback)(e=>(0,u.jL)({id:e,type:X}),[X]),ed="loggedOut"===R||(null==G?void 0:G.id)==="free",eu="outOfCredits"!==R&&("ktlo"===U.id||(null==G?void 0:G.id)==="ktlo"),ep="outOfCredits"!==R&&!G&&!eu,em=(0,l.useCallback)(e=>{if("monthly"===U.type&&"annual"===X&&e===U.id)return!1;let t=(0,u.jL)({...U,type:"monthly"}),a=(0,u.jL)({id:e,type:X,type:"monthly"}),r=(0,u.RL)(U.id),n=(0,u.RL)(e),s=(0,u.m6)(U.id),l=(0,u.m6)(e);return"biz"==s?"biz"==l?a<t:n<=r:"biz"==l?n<r:a<t},[U,X]),eg=(0,l.useCallback)(e=>e===U.id&&X===U.type?"current":V||(0,u.jL)(U)===ec(e)?"upgrade":"enterprise"===U.id?"downgrade":e===U.id&&"annual"===X&&"monthly"===U.type?"switchToAnnual":em(e)?"downgrade":"upgrade",[U,V,ec,X,em]),eh=(0,l.useCallback)(e=>{let t=eg(e);if("current"===t)return"Your current plan";if("switchToAnnual"===t)return"Switch to annual";let{isProPlan:a,isBizPlan:r}=(0,u.cb)(U.id),{isProPlan:n,isBizPlan:s}=(0,u.cb)(e);return"upgrade"===t?a&&n||r&&s?"Upgrade current plan":"Upgrade":"enterprise"===U.id?"Downgrade (Contact us)":"Downgrade"},[eg,U]),ef=(0,l.useMemo)(()=>{var e,t,a;return(null==k?void 0:k.email)||(null==k||null==(a=k.firebase)||null==(t=a.identities)||null==(e=t.email)?void 0:e[0])||"xxxxx"},[k]),ex=(0,f.A)("sm"),ev=(0,l.useMemo)(()=>ex?1:[ed,eu,!0,!0,ep].filter(Boolean).length,[ex,ed,eu,!0,!0,ep]),eb=(0,l.useCallback)(e=>{let t=eg(e);return"upgrade"===t||"switchToAnnual"===t?"twilight":"link"},[eg]),e_=eb(et),ew=eb(er),ey=(0,l.useCallback)(e=>{if("free"===e){window.location.href="/signup";return}let t={planId:e,planType:"pro",timestamp:Date.now(),price:ec(e),limit:(0,u.RL)(e)};localStorage.setItem(j,JSON.stringify(t)),window.location.href="/signup"},[ec]),ej=(()=>{let e=(0,o.f)(m);return t=>{let{targetPlan:a,scenario:r}=t;e({childProps:{targetPlan:a,scenario:r,onClose:()=>e(!1)}})}})(),eE=(0,l.useCallback)(async e=>{(null==d?void 0:d.id)&&await C({plan:e,workspaceId:d.id,grandfatheredDiscount:z,planType:X,changeType:"upgrade",useStudentDiscount:"studentDiscount"==R})},[d,C,z,X,R]),eN=(0,l.useCallback)(async e=>{s.Ay.capture(x.aw.PLAN_UPGRADE_CLICKED,{current_plan_id:U.id,current_plan_type:U.type,target_plan_id:e,target_plan_type:X,plan_type:(0,u.m6)(e),plan_price:ec(e)});let t=function(e,t,a){if("annual"===a||"annual"===e.type)return null;let r=(0,u.m6)(e.id),n=(0,u.m6)(t);return"biz"===r&&"pro"===n?null:"pro"===r&&"biz"===n?"PRO_TO_BIZ_UPGRADE":"pro"===r&&"pro"===n?"PRO_TO_PRO_UPGRADE":"biz"===r&&"biz"===n?"BIZ_TO_BIZ_UPGRADE":null}(U,e,X);t?ej({targetPlan:e,scenario:t}):await eE(e)},[U,X,ec,eE,ej]),ek=(0,l.useCallback)(()=>{el(b.VL.FREE)},[]),eC=(0,l.useCallback)(e=>{if("annual"===X)return 2*(0,u.jL)({id:e,type:"monthly"})},[X]),eP=(0,o.f)(g.u),eD=(0,l.useCallback)(()=>{d&&eP({childProps:{workspace:d,onClose:()=>eP(!1)},dialogProps:{onOpenChange:e=>{e||el(null)}}})},[eP,d]);return(0,r.jsx)(E.Provider,{value:{currentPlan:U,selectedProPlan:et,setSelectedProPlan:ea,selectedBizPlan:er,setSelectedBizPlan:en,planType:X,setPlanType:J,pricingScenario:R,setPricingScenario:O,getDisplayPrice:ec,showFreePlan:ed,showKtloPlan:eu,showProPlan:!0,showBizPlan:!0,showEnterprisePlan:ep,showProDropdown:!B,showBizDropdown:!B,isLoggedOut:B,isOwner:H,isEditor:Y,isMemberOfWorkspace:q,shouldDisableWorkspaceAdminActions:!B&&(Y||$||!B&&"viewer"===N),userEmail:ef,scheduledPlan:G,discountPercent:Z,getSavingsAmount:eC,handleUpgradeClicked:eN,handleUpgradeConfirmed:eE,handleLoggedOutUpgrade:ey,getButtonVariant:eb,getButtonText:eh,getPlanComparisonStatus:eg,createPortalSession:F,isCreatePortalSessionLoading:I,cancelSubscription:K,isCancelSubscriptionLoading:A,cancelSubscriptionChanges:W,isCancelSubscriptionChangesLoading:L,checkoutLoading:D,numberOfPlansShown:ev,freePlanButtonVariant:B?"twilight":"link",proPlanButtonVariant:e_,bizPlanButtonVariant:ew,isPlanDowngrade:em,targetDowngradePlan:es,setTargetDowngradePlan:el,setFreePlanAsTarget:ek,newWorkspaceSelectedPlan:ei,setNewWorkspaceSelectedPlan:eo,onDowngradeClick:eD},children:t})},k=()=>{let e=(0,l.useContext)(E);if(!e)throw Error("usePricing must be used within a PricingProvider");return e}},4141:(e,t,a)=>{"use strict";a.d(t,{Separator:()=>i});var r=a(99289),n=a(32075),s=a(11405),l=a(26551);let i=s.forwardRef((e,t)=>{let{className:a,orientation:s="horizontal",decorative:i=!0,...o}=e;return(0,r.jsx)(n.b,{ref:t,decorative:i,orientation:s,className:(0,l.cn)("shrink-0 bg-border","horizontal"===s?"h-[1px] w-full":"h-full w-[1px]",a),...o})});i.displayName=n.b.displayName},4745:(e,t,a)=>{"use strict";a.d(t,{R:()=>ex,u:()=>ef});var r=a(99289),n=a(22291),s=a(11405),l=a(2906),i=a(69201),o=a(13851),c=a(39627),d=a(49944),u=a(6072),p=a(97757),m=a(86077),g=a(97115),h=a(20234),f=a(4141),x=a(52983),v=a(99017),b=a(26551),_=a(53417);let w={BAR_HEIGHT:11,LINE_EXTENSION:4},y=e=>{let{usage:t,includedLimit:a=j,payAsYouGoLimit:n,isPro:l=!1,payAsYouGoEnabled:i=!1,className:o}=e,{includedLinePosition:c,payAsYouGoLinePosition:u,segments:p,labelStyles:m,headerSummary:g,includedAriaNow:h,tooltips:f}=function(e){let{usage:t,includedLimit:a,payAsYouGoLimit:r,isPro:n=!1,payAsYouGoEnabled:l=!1}=e,i=(0,s.useMemo)(()=>1.2*Math.max(t,r?Math.max(a,r):a),[t,a,r]),o=a/i*100,c=r?r/i*100:null,d=(0,s.useMemo)(()=>{let e={normal:0,overIncluded:0,overLimit:0};if(t<=a)e.normal=t/i*100;else{e.normal=a/i*100;let s=t-a;n&&l&&r?t<=r?e.overIncluded=s/i*100:(e.overIncluded=(r-a)/i*100,e.overLimit=(t-r)/i*100):e.overLimit=s/i*100}return e},[t,a,r,n,l,i]),u=(0,s.useMemo)(()=>{if(!c)return{included:{left:"50%",transform:"translateX(-50%)"},payg:null};let e=Math.abs(c-o);return e<5?{included:{left:"50%",transform:"translateX(calc(-100% - 4px))"},payg:{left:"50%",transform:"translateX(calc(0% + 4px))"}}:e<22?{included:{left:"50%",transform:"translateX(-100%)"},payg:{left:"50%",transform:"translateX(0%)"}}:{included:{left:"50%",transform:"translateX(-50%)"},payg:{left:"50%",transform:"translateX(-50%)"}}},[c,o]),p=(0,s.useMemo)(()=>{if(t<=a)return 0;let e=t-a;return n&&l&&r?Math.min(e,r-a):0},[t,a,n,l,r]),m=e=>"$".concat(e.toFixed(2)),g=(0,s.useMemo)(()=>t<=a?"$0 monthly costs":n&&l&&r?t<=r?"".concat(m(t-a)," pay-as-you-go usage"):"".concat(m(t-r)," over budget limit"):"".concat(m(t-a)," over included limit"),[t,a,n,l,r]),h=(0,s.useMemo)(()=>({included:"".concat(m(Math.min(t,a))," included usage (no cost)"),payg:r&&n&&l?"".concat(m(Math.min(t-a,r-a))," pay-as-you-go (cost: ").concat(m(Math.min(t-a,r-a)),")"):null,overLimit:t>a?r&&t>r?"".concat(m(t-r)," over budget limit"):"".concat(m(t-a)," over included limit"):null}),[t,a,r,n,l]);return{maxVisibleRange:i,includedLinePosition:o,payAsYouGoLinePosition:c,segments:d,labelStyles:u,usageCost:p,headerSummary:g,includedAriaNow:Math.min(t,a),tooltips:h}}({usage:t,includedLimit:a,payAsYouGoLimit:n,isPro:l,payAsYouGoEnabled:i});return(0,r.jsxs)("div",{className:(0,b.cn)("w-full",o),children:[(0,r.jsxs)("div",{className:"mb-3 flex items-center justify-between text-sm",children:[(0,r.jsxs)("p",{className:"flex items-center gap-2 text-base font-medium text-foreground",children:["Cloud Usage",(0,r.jsx)(_.E,{variant:"affirmative",className:"text-xs",children:"Private Beta"})]}),(0,r.jsx)("span",{className:"text-sm text-muted-foreground",children:"$0 monthly costs"})]}),(0,r.jsx)("div",{className:"relative mb-4",style:{padding:"".concat(w.LINE_EXTENSION,"px 0")},children:(0,r.jsxs)("div",{className:"relative h-full w-full overflow-visible rounded-md bg-muted-active",style:{height:"".concat(w.BAR_HEIGHT,"px")},children:[(0,r.jsxs)("div",{className:"relative h-full",children:[(0,r.jsxs)(v.m_,{delayDuration:0,children:[(0,r.jsx)(v.k$,{asChild:!0,children:(0,r.jsx)("div",{className:"absolute left-0 top-0 h-full cursor-pointer rounded-l-md bg-blue-600 transition-all duration-300",style:{width:"calc(".concat(p.normal,"% - 2px)"),minWidth:"8px"},role:"progressbar","aria-valuenow":h,"aria-valuemin":0,"aria-valuemax":a,"aria-label":"Included usage"})}),(0,r.jsx)(v.ZI,{children:(0,r.jsx)("div",{children:f.included})})]}),p.overIncluded>0&&(0,r.jsxs)(v.m_,{delayDuration:0,children:[(0,r.jsx)(v.k$,{asChild:!0,children:(0,r.jsx)("div",{className:"absolute top-0 h-full translate-x-1 cursor-pointer bg-blue-400 transition-all duration-300",style:{left:"".concat(p.normal,"%"),width:"calc(".concat(p.overIncluded,"% - 6px)")},"aria-label":"Pay-as-you-go usage"})}),(0,r.jsx)(v.ZI,{children:(0,r.jsx)("div",{children:f.payg})})]}),p.overLimit>0&&(0,r.jsxs)(v.m_,{delayDuration:0,children:[(0,r.jsx)(v.k$,{asChild:!0,children:(0,r.jsx)("div",{className:(0,b.cn)("absolute top-0 h-full translate-x-1 cursor-pointer bg-warning-primary transition-all duration-300",(0===p.overIncluded&&p.normal,""),0===p.normal&&0===p.overIncluded?"rounded-l-md":"","rounded-r-md"),style:{left:"".concat(p.normal+p.overIncluded,"%"),width:"calc(".concat(p.overLimit,"% - 2px)")},"aria-label":"Usage over limit"})}),(0,r.jsx)(v.ZI,{children:(0,r.jsx)("div",{children:f.overLimit})})]})]}),(0,r.jsx)("div",{className:"absolute z-10 w-0.5 rounded-full bg-muted-foreground",style:{left:"".concat(c,"%"),top:"-".concat(w.LINE_EXTENSION,"px"),height:"".concat(w.BAR_HEIGHT+2*w.LINE_EXTENSION,"px")},"aria-label":"Included usage limit",children:(0,r.jsxs)("span",{className:"absolute whitespace-nowrap text-sm text-muted-foreground",style:{bottom:"-24px",...m.included},children:["Included ($",a,")"]})}),u&&i&&(0,r.jsx)("div",{className:"absolute z-10 w-0.5 rounded-full bg-muted-foreground",style:{left:"".concat(u,"%"),top:"-".concat(w.LINE_EXTENSION,"px"),height:"".concat(w.BAR_HEIGHT+2*w.LINE_EXTENSION,"px")},"aria-label":"Pay-as-you-go limit",children:(0,r.jsxs)("span",{className:"absolute whitespace-nowrap text-sm text-muted-foreground",style:{bottom:"-24px",...m.payg},children:["Budget ($",n,")"]})})]})}),(0,r.jsx)("div",{className:"mb-3 text-sm text-muted-foreground",children:"During private beta, usage is entirely free—even if you exceed the included amount."}),(0,r.jsx)("div",{className:"flex w-full justify-start",children:(0,r.jsx)(d.$,{variant:"outline",size:"sm",asChild:!0,children:(0,r.jsx)("a",{href:"https://docs.lovable.dev/features/cloud",target:"_blank",rel:"noopener noreferrer",className:"text-muted-foreground",children:"Learn more"})})})]})},j=25,E=e=>{var t,a;let{workspace:n,isPro:l,usageData:i}=e,[o,c]=(0,x.V)("cloud_intro_seen",{defaultValue:!1}),[d]=(0,s.useState)(!o);(0,s.useEffect)(()=>{d&&c(!0)},[d,c]);let{isProPlan:u}=(0,g.cb)(null==n?void 0:n.plan),m=null!=(a=null!=(t=null==i?void 0:i.used)?t:null==n?void 0:n.backend_total_used_in_billing_period)?a:0;return(0,r.jsx)("div",{className:"mx-auto flex w-full flex-col gap-4 lg:max-w-[888px]",children:(0,r.jsx)("div",{className:"flex flex-col gap-6",children:(0,r.jsxs)(h.Zp,{className:"gap-0 rounded-xl bg-muted p-0 shadow-sm",children:[d&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"flex flex-col gap-2 p-4 pb-5 text-sm",children:[(0,r.jsx)("div",{className:"mb-1 flex items-center justify-between text-base font-medium",children:"Ship faster with Lovable"}),(0,r.jsxs)("div",{className:"flex flex-row items-center gap-2",children:[(0,r.jsx)(p.A,{name:"check",size:"small",className:"text-muted-foreground"}),(0,r.jsx)("p",{children:"One platform for database, hosting, auth, and storage"})]}),(0,r.jsxs)("div",{className:"flex flex-row items-center gap-2",children:[(0,r.jsx)(p.A,{name:"check",size:"small",className:"text-muted-foreground"}),(0,r.jsx)("p",{children:"Zero costs in beta, zero setup forever"})]}),(0,r.jsxs)("div",{className:"flex flex-row items-center gap-2",children:[(0,r.jsx)(p.A,{name:"check",size:"small",className:"text-muted-foreground"}),(0,r.jsxs)("p",{children:["After beta, you get $",j,"/month free, pay-as-you-go billing"]})]}),(0,r.jsxs)("a",{href:"https://docs.lovable.dev/features/cloud",target:"_blank",rel:"noopener noreferrer",className:"ml-6 flex items-center gap-1 text-sm text-muted-foreground underline",children:["Read more",(0,r.jsx)(p.A,{name:"arrow_outward",size:"small"})]})]}),(0,r.jsx)(f.Separator,{className:"bg-muted-border"})]}),(0,r.jsx)("div",{className:"flex h-full flex-col gap-6 p-4 pb-4",children:(0,r.jsx)(y,{usage:m,includedLimit:j,isPro:null!=l?l:u})})]})})})};var N=a(19618),k=a(48591),C=a(71055),P=function(e){return e.SUGGEST_LOWER_PLAN="SUGGEST_LOWER_PLAN",e.FEATURES_TO_TRY="FEATURES_TO_TRY",e.KTLO_OFFER="KTLO_OFFER",e.FEEDBACK="FEEDBACK",e.FINAL_CONFIRMATION="FINAL_CONFIRMATION",e}({}),D=a(71302);let I=(0,s.createContext)(void 0),S=e=>{let{children:t,targetPlan:a,onCancel:n,workspace:i}=e,o=!!(0,k.fT)(),c=!!(0,k.H4)(),d=i.plan!==C.G.KTLO&&o&&a===D.VL.FREE,u=(0,s.useCallback)(()=>d?P.KTLO_OFFER:P.FEEDBACK,[d]),p=(0,s.useMemo)(()=>u(),[u]),[m,g]=(0,s.useState)(p),[h,f]=(0,s.useState)({reason:""}),[x,v]=(0,s.useState)(!1),b=(0,l.et)(),{toCheckout:_}=(0,N.R)(),w=async e=>{v(!0);try{let t=null!=e?e:a;(null==i?void 0:i.id)&&(t&&t!==D.VL.FREE?await _({plan:t,workspaceId:i.id,grandfatheredDiscount:!1,planType:b.planType,changeType:"downgrade"}):c?(await b.cancelSubscription(),n()):await b.createPortalSession())}finally{v(!1)}},y=async()=>{v(!0);try{(null==i?void 0:i.id)&&await _({plan:D.VL.KTLO,workspaceId:i.id,grandfatheredDiscount:!1,planType:"monthly",changeType:"downgrade"})}catch(e){v(!1)}},j={currentStep:m,feedback:h,currentPlan:i.plan,targetPlan:null!=a?a:D.VL.FREE,shouldShowKtloOffer:d,setCurrentStep:g,setFeedback:f,onCancel:n,onConfirm:w,onSwitchToKtlo:y,isLoading:x||b.isCancelSubscriptionLoading,getNextStepAfterSuggestLowerPlan:()=>P.FEATURES_TO_TRY,getNextStepAfterFeatures:u,getNextStepAfterKtlo:()=>P.FEEDBACK,getNextStepAfterFeedback:()=>P.FINAL_CONFIRMATION,getPreviousStepBeforeFeedback:()=>d?P.KTLO_OFFER:P.FEATURES_TO_TRY,getPreviousStepBeforeFinalConfirmation:()=>P.FEEDBACK};return(0,r.jsx)(I.Provider,{value:j,children:t})},A=()=>{let e=(0,s.useContext)(I);if(void 0===e)throw Error("useDowngrade must be used within a DowngradeProvider");return e};var T=a(81797),L=a(88852),R=a(82162),O=a(33979),F=a(24159);let M=[{value:"technical_issues",label:"I am having too many technical issues"},{value:"too_expensive",label:"It's too expensive"},{value:"not_using",label:"I'm not using Lovable enough"},{value:"missing_features",label:"It's missing features"},{value:"switched_to_competitor",label:"I switched to a competitor"},{value:"other",label:"Other reason"}],K=[{id:"custom-domains",name:"Custom domains",description:"Connect your own domain to your projects",icon:"link"},{id:"team-collab",name:"Team collaboration",description:"Invite team members to work together",icon:"group"},{id:"visual-editor",name:"Visual editor",description:"Edit the frontend of your project instantly",icon:"draw"},{id:"code-editor",name:"Code editor",description:"Edit the backend of your project in code",icon:"code"},{id:"chat-mode",name:"Chat mode",description:"Plan your next step with AI",icon:"chat"},{id:"security-checks",name:"Security checks",description:"Run checks when publishing with Supabase to find and fix vulnerabilities",icon:"security"}],W=e=>{let{title:t,description:a}=e;return(0,r.jsxs)("div",{className:"flex flex-col items-start gap-4",children:[(0,r.jsx)(m.Fy,{className:"h-9"}),(0,r.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,r.jsx)(u.L3,{className:"text-2xl font-medium md:text-3xl",children:t}),a&&(0,r.jsx)(u.rr,{className:"text-base text-muted-foreground",children:a})]})]})},U=()=>{let e=A();return(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)("div",{className:"flex flex-col gap-6",children:[(0,r.jsx)(W,{title:"Why are you downgrading?",description:"We use this information to improve our product."}),(0,r.jsx)(O.z,{value:e.feedback.reason,onValueChange:t=>e.setFeedback({...e.feedback,reason:t}),className:"flex flex-col gap-1",children:M.map(t=>(0,r.jsxs)("div",{className:(0,b.cn)("flex cursor-pointer items-center gap-3 rounded-lg px-4 py-3 transition-colors",e.feedback.reason===t.value?"bg-primary/5":"hover:bg-muted/50"),onClick:()=>e.setFeedback({...e.feedback,reason:t.value}),children:[(0,r.jsx)(O.C,{value:t.value,id:t.value}),(0,r.jsx)(R.Label,{htmlFor:t.value,className:"text-base font-normal leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:t.label})]},t.value))}),(0,r.jsx)(L.p,{placeholder:"Tell us more about your decision...",className:"h-12",maxLength:500,value:e.feedback.additionalNotes,onChange:t=>e.setFeedback({...e.feedback,additionalNotes:t.target.value})}),(0,r.jsxs)("div",{className:"flex flex-col gap-4 pt-2",children:[(0,r.jsx)(d.$,{variant:"affirmative",className:"w-full",onClick:()=>{T.Ay.capture(F.rz.FEEDBACK.KEEP_PLAN_CLICKED),e.onCancel()},children:"Keep current plan"}),(0,r.jsx)(d.$,{variant:"outline",className:"w-full",onClick:()=>{T.Ay.capture(F.rz.FEEDBACK.CONTINUE_CLICKED,{reason:e.feedback.reason}),e.setCurrentStep(e.getNextStepAfterFeedback())},children:"Downgrade plan"})]})]})})};var G=a(6919),B=a(98213),V=a(99490),z=a(31288),H=a(33256),Y=a(69147);let q=e=>{let{children:t,className:a}=e;return(0,r.jsx)("div",{className:(0,b.cn)("rounded-xl border bg-background p-5",a),children:t})},$=V.Ik({reason:V.Yj().optional(),additional_notes:V.Yj().max(500,"Additional notes must be less than 500 characters").optional()}),Z=()=>{let e=A(),t=(0,H.P)(),a=(0,G.n)({mutationFn:async()=>{let a=$.parse({reason:e.feedback.reason,additional_notes:e.feedback.additionalNotes});await t.post("/user/cancellation",a),await e.onConfirm()},onSuccess:()=>{T.Ay.capture(F.rz.FINAL_CONFIRMATION.CONFIRM_CLICKED,{from_plan:e.currentPlan,to_plan:e.targetPlan})},onError:e=>{if(Y.logging.error("Error submitting feedback:",e),e instanceof z.G){let t=e.errors[0];B.toast.error("Validation Error",{description:t.message})}else{var t;B.toast.error("Error",{description:(null==(t=e.data)?void 0:t.detail)||"Failed to submit feedback"})}}}),n=((e,t)=>{let a=(0,g.m6)(e),r=(0,g.m6)(t),n=(0,g.RL)(e),s=(0,g.RL)(t);if("pro"===a){if("pro"===r)return[{text:"Credit limit will decrease from ".concat(n," to ").concat(s," per month"),isPositive:!1},{text:"Credit rollover maximum will be ".concat(s," from next month"),isPositive:!1},{text:"You keep all of your current Pro plan features",isPositive:!0}];if("free"===r)return[{text:"All new projects will be public",isPositive:!1},{text:"A Lovable badge will be added to all new projects",isPositive:!1},{text:"You will lose team management features",isPositive:!1},{text:"Custom domains will be removed",isPositive:!1},{text:"Monthly credit limit will decrease from ".concat(n," to 0"),isPositive:!1},{text:"Credit rollover will be disabled",isPositive:!1}]}if("biz"===a){if("biz"===r)return[{text:"Credit limit will decrease from ".concat(n," to ").concat(s," per month"),isPositive:!1},{text:"Credit rollover maximum will be ".concat(s," from next month"),isPositive:!1},{text:"You keep all of your current Business plan features",isPositive:!0}];if("pro"===r)return[{text:"No SSO",isPositive:!1},{text:"No design templates",isPositive:!1},{text:"No data opt out",isPositive:!1},{text:"No personal projects",isPositive:!1},{text:"Credit limit will decrease from ".concat(n," to ").concat(s," per month"),isPositive:!1},{text:"Credit rollover maximum will be ".concat(s," from next month"),isPositive:!1},{text:"You keep all of your current Pro plan features",isPositive:!0}];if("free"===r)return[{text:"No SSO",isPositive:!1},{text:"No design templates",isPositive:!1},{text:"No data opt out",isPositive:!1},{text:"No personal projects",isPositive:!1},{text:"All new projects will be public",isPositive:!1},{text:"A Lovable badge will be added to all new projects",isPositive:!1},{text:"You will lose team management features",isPositive:!1},{text:"Custom domains will be removed",isPositive:!1},{text:"Monthly credit limit will decrease from ".concat(n," to 0"),isPositive:!1},{text:"Credit rollover will be disabled",isPositive:!1}]}return"ktlo"===r?[{text:"Credits will change from ".concat(n," per month to freemium (").concat(5," per day, up to 30 per month)"),isPositive:!1},{text:"No credit rollovers",isPositive:!1},{text:"You keep: Pro features: Private Projects, No Lovable Badge, Roles and Permissions, Custom Domains",isPositive:!0}]:[]})(e.currentPlan,e.targetPlan);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(W,{title:"Continue downgrading?",description:"Keep your momentum. Finish your project. You can do it."}),(0,r.jsxs)(q,{children:[(0,r.jsx)("div",{className:"mb-4 text-lg font-medium",children:"Here is what will change if you downgrade:"}),(0,r.jsxs)("ul",{className:"flex flex-col gap-4",children:[0===n.length&&(0,r.jsxs)("li",{className:"flex items-start gap-3",children:[(0,r.jsx)(p.A,{name:"close",className:"size-5"}),(0,r.jsx)("span",{children:"Features of your current plan"})]}),n.map((e,t)=>(0,r.jsxs)("li",{className:"flex items-start gap-3",children:[(0,r.jsx)(p.A,{name:e.isPositive?"check":"close",className:"size-5 ".concat(e.isPositive?"text-green-600":"text-muted-foreground")}),(0,r.jsx)("span",{children:e.text})]},t))]}),(0,r.jsx)(d.$,{variant:"outline",className:"mt-4 w-full",onClick:()=>{T.Ay.capture(F.rz.FINAL_CONFIRMATION.KEEP_PLAN_CLICKED),e.onCancel()},children:"Keep current plan"})]}),(0,r.jsx)(d.$,{variant:"destructive",className:"w-full",onClick:()=>a.mutate(),loading:a.isPending,children:"Confirm downgrade"})]})},X=()=>{let e=A(),t=async()=>{T.Ay.capture(F.rz.KTLO_OFFER.SWITCH_CLICKED),await e.onSwitchToKtlo()};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(W,{title:"Switch to Lite",description:"Try our new Lite plan and retain important features that keep your project going."}),(0,r.jsxs)(q,{children:[(0,r.jsx)("div",{className:"mb-2 text-lg font-medium",children:"Lite plan"}),(0,r.jsxs)("div",{className:"mb-2 flex items-center gap-2",children:[(0,r.jsx)("span",{className:"text-3xl font-medium md:text-4xl",children:"$15"}),(0,r.jsx)("span",{className:"text-base font-medium text-muted-foreground",children:"per month"}),(0,r.jsx)("span",{className:"rounded bg-success px-2 py-0.5 text-xs text-success-foreground",children:"40% off"})]}),(0,r.jsx)("ul",{className:"mt-4 flex flex-col gap-3",children:["5 daily credits","Keep custom domains","No Lovable badge","Team settings stay in place","Access to private projects"].map((e,t)=>(0,r.jsxs)("li",{className:"flex items-center gap-2",children:[(0,r.jsx)(p.A,{name:"check",className:"size-5"}),(0,r.jsx)("span",{children:e})]},t))}),(0,r.jsx)(d.$,{className:"mt-6 w-full",variant:"affirmative",onClick:t,loading:e.isLoading,children:"Switch to Lite"})]}),(0,r.jsx)(d.$,{variant:"outline",className:"w-full",onClick:()=>{T.Ay.capture(F.rz.KTLO_OFFER.CONTINUE_DOWNGRADE_CLICKED),e.setCurrentStep(e.getNextStepAfterKtlo())},children:"Downgrade plan"})]})},J=()=>{let e=A();return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(W,{title:"Have you tried these features?"}),(0,r.jsxs)(q,{children:[(0,r.jsx)("div",{className:"flex flex-col gap-1.5 md:gap-2",children:K.map(e=>(0,r.jsxs)("div",{className:"flex items-start gap-3 rounded-lg px-2 py-2 transition-colors md:gap-4 md:px-3",children:[(0,r.jsx)("span",{className:"mt-1.5 select-none text-base md:mt-2 md:text-lg",children:(0,r.jsx)(p.A,{name:e.icon,className:"h-4 w-4"})}),(0,r.jsxs)("div",{className:"flex flex-1 flex-col gap-0.5",children:[(0,r.jsx)(R.Label,{htmlFor:e.id,className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:e.name}),(0,r.jsx)("p",{className:"text-xs text-muted-foreground",children:e.description})]})]},e.id))}),(0,r.jsxs)(d.$,{variant:"affirmative",className:"mt-4 w-full",onClick:()=>{T.Ay.capture(F.rz.FEATURE_USAGE.KEEP_PLAN_CLICKED),e.onCancel()},children:["Keep Lovable ",(0,g._R)(e.currentPlan||"unknown")]})]}),(0,r.jsx)(d.$,{variant:"outline",onClick:()=>{T.Ay.capture(F.rz.FEATURE_USAGE.CONTINUE_CLICKED),e.setCurrentStep(e.getNextStepAfterFeatures())},children:"Downgrade plan"})]})};var Q=a(43328),ee=a(93652),et=a(16161),ea=a(99605);let er=()=>{let e=A(),t=(0,l.et)(),a=(0,Q.j4)(e=>e.currentWorkspace),{isEnterprisePlan:n}=(0,g.cb)(t.currentPlan.id),i=(0,s.useMemo)(()=>(0,g.e3)(e.currentPlan,e.currentPlan.startsWith(ea.lV)?"biz":"pro"),[e.currentPlan]),o=(0,s.useMemo)(()=>(null==a?void 0:a.plan)&&i.length>0&&!i.some(e=>e===(null==a?void 0:a.plan))?i[0]:null,[i,null==a?void 0:a.plan]),[c,u]=(0,s.useState)(o);(0,s.useEffect)(()=>{t.setPlanType("monthly")},[t.setPlanType]),(0,s.useEffect)(()=>{(null==a?void 0:a.plan)&&!c&&e.setCurrentStep(e.getNextStepAfterSuggestLowerPlan())},[null==a?void 0:a.plan,c,e]);let p=async()=>{c&&(T.Ay.capture(F.rz.SUGGEST_LOWER_PLAN.DOWNGRADE_CREDITS_CLICKED,{current_plan_id:e.currentPlan,target_plan_id:c,target_plan_type:t.planType,plan_price:t.getDisplayPrice(c)}),await e.onConfirm(c))};return c?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(W,{title:"Downgrade now",description:"Do you want to downgrade by changing your monthly credits?"}),(0,r.jsxs)(q,{children:[(0,r.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,r.jsx)("div",{className:"text-lg font-medium",children:"Reduce monthly credits"}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsxs)("span",{className:"text-3xl font-medium md:text-4xl",children:["$",t.getDisplayPrice(c)]}),(0,r.jsx)("span",{className:"text-base font-medium text-muted-foreground",children:"per month"})]}),(0,r.jsx)(ee.h,{options:i,selectedOption:c,disabled:t.shouldDisableWorkspaceAdminActions,onSelect:u})]}),(0,r.jsx)(d.$,{className:"mt-4 w-full",variant:"affirmative",disabled:c===e.currentPlan||n||t.shouldDisableWorkspaceAdminActions,onClick:p,loading:e.isLoading,children:"Downgrade credits"})]}),(0,r.jsx)(d.$,{variant:"outline",onClick:()=>{T.Ay.capture(F.rz.SUGGEST_LOWER_PLAN.CONTINUE_CLICKED),e.setCurrentStep(e.getNextStepAfterSuggestLowerPlan())},children:"Downgrade plan"})]}):(0,r.jsx)("div",{className:"p-6",children:(0,r.jsx)(et.E,{className:"h-16 w-full"})})},en=()=>{let e=A();return(0,r.jsx)(r.Fragment,{children:(()=>{switch(e.currentStep){case P.SUGGEST_LOWER_PLAN:return(0,r.jsx)(er,{});case P.FEATURES_TO_TRY:return(0,r.jsx)(J,{});case P.KTLO_OFFER:return(0,r.jsx)(X,{});case P.FEEDBACK:return(0,r.jsx)(U,{});case P.FINAL_CONFIRMATION:return(0,r.jsx)(Z,{});default:return null}})()})};var es=a(1596),el=a(27899),ei=a(68939),eo=a(18883),ec=a(2418),ed=a(13070);let eu=e=>{let{workspace:t}=e,a=(0,g._R)(t.plan),n=t.billing_period_end_date?(0,es.GP)((0,ed.ay)(t.billing_period_end_date),"MMM d, yyyy"):"";return(0,r.jsxs)("div",{className:"flex items-center justify-start gap-4",children:[(0,r.jsx)(ec.default,{src:"/img/logo/lovable-logo-icon.svg",alt:"Lovable",width:36,height:36,className:"h-9 w-9"}),(0,r.jsxs)("div",{className:"flex flex-col gap-0.5",children:[(0,r.jsxs)("p",{className:"text-base font-medium text-foreground",children:["You're on ",a," Plan"]}),(0,r.jsxs)("p",{className:"text-base text-muted-foreground",children:[t.plan_scheduled?"Cancels":"Renews"," ",n]})]})]})},ep=e=>{let{workspace:t,open:a,onOpenChange:n}=e,{createPortalSession:s,isCreatePortalSessionLoading:i,setFreePlanAsTarget:o,onDowngradeClick:c}=(0,l.et)(),p=async()=>{await s()},m=async()=>{await s()},g="free"===t.plan_scheduled;return(0,r.jsx)(u.lG,{open:a,onOpenChange:()=>{n(!1)},children:(0,r.jsxs)(u.Cf,{className:"sm:max-w-[500px]",children:[(0,r.jsxs)(u.c7,{children:[(0,r.jsx)(u.L3,{children:"Manage Plan"}),(0,r.jsx)(u.rr,{children:"Subscription & Billing Settings"})]}),(0,r.jsx)("div",{className:"flex flex-col gap-4 border-y py-4",children:(0,r.jsxs)("div",{className:"flex items-center justify-between gap-4 rounded-xl bg-muted p-4",children:[(0,r.jsx)(eu,{workspace:t}),g?(0,r.jsx)(d.$,{onClick:m,disabled:i,variant:"outline",children:i?"Opening...":"Cancel Downgrade"}):(0,r.jsx)(d.$,{variant:"outline",onClick:()=>{o(),c(),n(!1)},children:"Downgrade to Free"})]})}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)(d.$,{variant:"secondary",onClick:p,disabled:i,className:"w-5/6",children:i?"Opening...":"View Invoices"}),(0,r.jsx)(d.$,{onClick:p,disabled:i,className:"w-full",children:i?"Opening...":"Payment Preferences"})]})]})})},em=e=>{let{workspace:t,shouldDisableWorkspaceAdminActions:a}=e,{createPortalSession:n,isCreatePortalSessionLoading:s,cancelSubscriptionChanges:i,isCancelSubscriptionChangesLoading:o}=(0,l.et)(),c=(0,k.H4)();if(!t.plan_scheduled)return null;let u=(0,g._R)(t.plan),m=(0,g._R)(t.plan_scheduled),h=t.billing_period_end_date?(0,es.GP)((0,ed.ay)(t.billing_period_end_date),"MMM d, yyyy"):"",f=c?o:s,x=async()=>{c?await i():n()};return(0,r.jsx)("div",{className:"space-y-3",children:(0,r.jsx)("div",{className:"space-y-3 rounded-md bg-warning p-3",children:(0,r.jsxs)("div",{className:"flex items-start gap-2",children:[(0,r.jsx)(p.A,{name:"info",size:"small",className:"mt-0.5 flex-shrink-0 text-warning-primary"}),(0,r.jsxs)("div",{className:"flex w-full flex-col gap-3 sm:flex-row sm:items-center sm:justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("p",{className:"text-sm font-medium text-warning-primary",children:["Pending changes scheduled for ",h]}),(0,r.jsxs)("p",{className:"text-sm text-warning-primary",children:[u," → ",m]})]}),(0,r.jsx)("div",{children:(0,r.jsx)(d.$,{variant:"warning",size:"default",disabled:f||a,onClick:x,children:f?"Canceling...":"Cancel changes"})})]})]})})})},eg=e=>{let{workspace:t,myWorkspaceRole:a}=e,[n,i]=(0,s.useState)(!1),o=(0,ei.D)(t),{currentPlan:c,shouldDisableWorkspaceAdminActions:u}=(0,l.et)(),m=(0,el.IJ)(o.currentlyConsuming,o.sources),f=(0,g._R)(c.id),x=t.plan,{isPaidPlan:v,isLegacyPlan:b,isEnterprisePlan:_}=(0,g.cb)(x),w="free"===x||"ktlo"===x,y=()=>{let e="ambassador"===t.plan,a="ktlo"===t.plan;return(!b&&!e&&!a||(null==t?void 0:t.billing_period_credits_limit)!==0&&(null==t?void 0:t.billing_period_credits_limit)!==void 0)&&"free"!==t.plan&&!!t.billing_period_credits_limit&&!(t.billing_period_credits_limit<=0)&&!0},j=(()=>{if(w)return{text:"No credits will rollover",icon:"close"};if(!y())return null;let e="annual"===t.plan_type,a=t.billing_period_credits_limit;return{text:"Up to ".concat((0,eo.Q)(e?12*a:a)," credits rollover"),icon:"check"}})(),E=(()=>{if(w)return"Daily credits reset at midnight UTC";if(!y()||!o.creditsResetDate||(null==t?void 0:t.plan_scheduled)==="free")return null;let e=(e=>{let t=new Date(e);return t.setTime(t.getTime()+6e5),t})(o.creditsResetDate),a=(0,es.GP)(e,"dd MMM 'at' h:mm a"),r=null==t?void 0:t.billing_period_credits_limit;return r?"".concat((0,eo.Q)(r)," credits reset on ").concat(a):"Monthly credits reset on ".concat(a)})();return v?(0,r.jsxs)("div",{className:"mx-auto flex w-full flex-col gap-4 lg:max-w-[888px]",children:[(0,r.jsx)(em,{workspace:t,shouldDisableWorkspaceAdminActions:u}),(0,r.jsxs)("div",{className:"flex flex-col gap-6 lg:grid lg:grid-cols-3",children:[(0,r.jsx)(h.Zp,{className:"rounded-xl bg-muted p-4 shadow-sm",children:(0,r.jsxs)("div",{className:"flex h-full flex-col justify-between gap-4",children:[(0,r.jsx)(eu,{workspace:t}),!_&&(0,r.jsx)("div",{className:"flex justify-start",children:(0,r.jsx)(d.$,{variant:"outline",size:"default",disabled:u,onClick:()=>i(!0),children:"Manage"})})]})}),(0,r.jsx)(h.Zp,{className:"col-span-2 rounded-xl bg-muted p-4 shadow-sm outline outline-1 outline-offset-[-1px] outline-border",children:(0,r.jsxs)("div",{className:"flex h-full flex-col gap-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("p",{className:"text-base font-medium text-foreground",children:"Credits remaining"}),(0,r.jsxs)("p",{className:"text-sm font-normal text-muted-foreground",children:[(0,eo.Q)(o.totalRemaining)," of"," ",(0,eo.Q)(o.totalAllocation)]})]}),(0,r.jsx)(el.bY,{progressData:o}),(o.currentlyConsuming||0===o.totalRemaining)&&(0,r.jsx)("div",{className:"flex flex-col gap-2",children:(0,r.jsxs)("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-start sm:justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 sm:order-2",children:[(0,r.jsx)("div",{className:"ml-1 mr-0.5 h-2 w-2 rounded-full ".concat(m)}),(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:(0,el.bT)(o.currentlyConsuming)})]}),(j||E)&&(0,r.jsxs)("div",{className:"flex flex-col gap-2 sm:order-1",children:[j&&(0,r.jsxs)("div",{className:"flex items-start gap-1.5",children:[(0,r.jsx)(p.A,{name:j.icon,size:"small",className:"mt-0.5 text-foreground"}),(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:j.text})]}),E&&(0,r.jsxs)("div",{className:"flex items-start gap-1.5",children:[(0,r.jsx)(p.A,{name:"check",size:"small",className:"mt-0.5 text-foreground"}),(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:E})]})]})]})})]})})]}),!_&&(0,r.jsx)(ep,{workspace:t,myWorkspaceRole:a,open:n,onOpenChange:i})]}):"inactive"!==x?(0,r.jsx)(h.Zp,{className:"flex w-full flex-col gap-4 bg-muted p-4",children:(0,r.jsxs)("p",{className:"text-sm text-muted-foreground",children:[(0,r.jsxs)("span",{children:["You're currently on plan: ",(0,r.jsx)("span",{className:"font-medium capitalize",children:f}),". "]})," ",(0,r.jsx)(eh,{workspace:t,children:"Manage your payment preferences and view past invoices"}),", or change your plan below."]})}):void 0},eh=e=>{let{workspace:t,children:a}=e,{createPortalSession:n,isCreatePortalSessionLoading:s}=(0,N.R)();return(0,r.jsx)("span",{role:"button",tabIndex:0,onClick:()=>{s||n({workspaceId:t.id})},onKeyDown:e=>{s||("Enter"===e.key||" "===e.key)&&n({workspaceId:t.id})},className:"inline cursor-pointer underline disabled:opacity-50","aria-disabled":s,children:a})},ef=e=>{let{workspace:t,onClose:a}=e,{targetDowngradePlan:n,setTargetDowngradePlan:s}=(0,l.et)();return(0,r.jsx)(u.Cf,{className:"pointer-events-auto flex max-h-[95vh] flex-col gap-4 overflow-y-auto outline-none",children:(0,r.jsx)(S,{targetPlan:null!=n?n:void 0,onCancel:()=>{s(null),a()},workspace:t,children:(0,r.jsx)(en,{})})})},ex=e=>{let{workspace:t,myWorkspaceRole:a}=e,{setPricingScenario:h}=(0,l.et)(),f="inactive"===t.plan,[x,v]=(0,s.useState)(!1),b=(0,i.D)(),_=(0,g.cb)(t.plan).isEnterprisePlan,[w,y]=(0,s.useState)(!1),[j,N]=(0,s.useState)(null),k=(0,n.useSearchParams)();return(0,s.useEffect)(()=>{h("billing")},[h]),(0,s.useEffect)(()=>{let e=k.get("planChanged"),t=k.get("planName");if("true"===e&&t){N({planName:t}),y(!0);let e=new URL(window.location.href);e.searchParams.delete("planChanged"),e.searchParams.delete("planName"),window.history.replaceState({},"",e.toString())}},[k]),(0,r.jsxs)(c.Pt,{title:"Plans & Billing",value:"billing",docsLink:"https://docs.lovable.dev/user-guides/messaging-limits",children:[f?(0,r.jsxs)("span",{children:["Your subscription is currently ",(0,r.jsx)("span",{className:"font-medium",children:"inactive"}),". You can select a new plan below to restore full functionality to your workspace."]}):null,!x&&(0,r.jsx)(eg,{workspace:t,myWorkspaceRole:a}),b&&(0,r.jsx)(E,{workspace:t,isPro:(0,g.cb)(t.plan).isProPlan}),!_&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(o.s,{showStudentDiscountCard:!0}),(0,r.jsx)(u.lG,{open:w,onOpenChange:y,children:(0,r.jsxs)(u.Cf,{className:"gap-4 outline-none focus:ring-0",size:"md",hideCloseButton:!0,blurOverlay:!0,onInteractOutside:e=>{e.preventDefault(),e.stopPropagation()},children:[(0,r.jsxs)("div",{className:"flex flex-col items-start gap-4",children:[(0,r.jsx)(m.Fy,{className:"h-9"}),(0,r.jsxs)(u.c7,{children:[(0,r.jsxs)(u.L3,{className:"text-2xl md:text-3xl",children:["Plan successfully changed to ",null==j?void 0:j.planName,"!"]}),(0,r.jsx)(u.rr,{children:"Your new plan will be activated at the start of the next billing cycle."})]})]}),(0,r.jsx)(u.Es,{fullWidthButtons:!0,className:"flex-col gap-2",children:(0,r.jsxs)(d.$,{onClick:e=>{e.preventDefault(),e.stopPropagation(),y(!1),N(null),v(!1)},className:"w-full",children:[(0,r.jsx)(p.A,{name:"check",size:"small",className:"mr-2"}),"Got it!"]})})]})})]})]})}},5531:(e,t,a)=>{"use strict";a.d(t,{rI:()=>u,hO:()=>_,SQ:()=>v,_2:()=>b,lp:()=>y,dc:()=>m,Hr:()=>h,Ht:()=>w,mB:()=>j,V0:()=>E,lv:()=>g,M5:()=>x,nV:()=>f,ty:()=>p});var r=a(99289),n=a(93307),s=a(90502),l=a(11405),i=a(26551),o=a(6072);class c extends l.Component{static getDerivedStateFromError(e){return{hasError:!0,componentStack:e.stack||"",error:e}}componentDidCatch(e,t){this.setState({componentStack:t.componentStack||"",error:e})}render(){if(this.state.hasError){var e;return(0,r.jsxs)("div",{style:{position:"absolute",top:0,left:0,zIndex:1e4,backgroundColor:"red"},children:[(0,r.jsx)("h2",{children:null==(e=this.state.error)?void 0:e.message}),(0,r.jsx)("p",{style:{whiteSpace:"pre-wrap"},children:this.state.componentStack})]})}return this.props.children}constructor(e){super(e),this.state={hasError:!1,componentStack:"",error:null}}}var d=a(97757);let u=e=>{let{...t}=e;return(0,r.jsx)(c,{children:(0,r.jsx)(o.MV.Provider,{value:{allowNestedDialog:!1},children:(0,r.jsx)(n.bL,{...t})})})},p=n.l9,m=n.ZL;n.YJ;let g=n.Pb,h=n.z6,f=l.forwardRef((e,t)=>{let{className:a,inset:l,children:o,hideChevron:c,...d}=e;return(0,r.jsxs)(n.ZP,{ref:t,className:(0,i.cn)("flex cursor-default select-none items-center gap-2 rounded-lg px-2 py-1.5 text-sm outline-none data-[state=open]:bg-accent focus:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",l&&"pl-8",a),...d,children:[o,!c&&(0,r.jsx)(s.vKP,{className:"ml-auto"})]})});f.displayName=n.ZP.displayName;let x=l.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(n.G5,{ref:t,className:(0,i.cn)("z-[10000] min-w-32 overflow-hidden rounded-xl border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...s})});x.displayName=n.G5.displayName;let v=l.forwardRef((e,t)=>{let{className:a,sideOffset:s=4,...l}=e;return(0,r.jsx)(n.ZL,{children:(0,r.jsx)(n.UC,{ref:t,sideOffset:s,className:(0,i.cn)("z-[10000] min-w-32 overflow-hidden rounded-xl border bg-popover p-1 text-popover-foreground shadow-md","data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","origin-[var(--radix-dropdown-menu-content-transform-origin)]",a),...l})})});v.displayName=n.UC.displayName;let b=l.forwardRef((e,t)=>{let{className:a,inset:s,...l}=e;return(0,r.jsx)(n.q7,{ref:t,className:(0,i.cn)("relative flex cursor-default select-none items-center gap-2 rounded-lg px-2 py-1.5 text-sm text-foreground outline-none transition-colors data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent [&>svg]:size-4 [&>svg]:shrink-0",s&&"pl-8",a),...l})});b.displayName=n.q7.displayName;let _=l.forwardRef((e,t)=>{let{className:a,children:l,checked:o,...c}=e;return(0,r.jsxs)(n.H_,{ref:t,className:(0,i.cn)("relative flex cursor-default select-none items-center rounded-lg py-1.5 pl-8 pr-2 text-sm outline-none transition-colors data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent",a),checked:o,...c,children:[(0,r.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,r.jsx)(n.VF,{children:(0,r.jsx)(s.Srz,{className:"h-4 w-4"})})}),l]})});_.displayName=n.H_.displayName;let w=l.forwardRef((e,t)=>{let{className:a,children:s,selectedIndicatorClassName:l,arrowLocation:o="start",...c}=e;return(0,r.jsxs)(n.hN,{ref:t,className:(0,i.cn)("relative flex cursor-default select-none items-center justify-start gap-x-1 rounded-lg px-2 py-1.5 text-sm outline-none transition-colors data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent","start"===o&&"pl-7",a),...c,children:["start"===o&&(0,r.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,r.jsx)(n.VF,{children:(0,r.jsx)(d.A,{name:"check_small",size:"default",className:(0,i.cn)("ml-auto",l)})})}),s,"end"===o&&(0,r.jsx)(n.VF,{children:(0,r.jsx)(d.A,{name:"check_small",size:"default",className:(0,i.cn)("ml-auto",l)})})]})});w.displayName=n.hN.displayName;let y=l.forwardRef((e,t)=>{let{className:a,inset:s,...l}=e;return(0,r.jsx)(n.JU,{ref:t,className:(0,i.cn)("px-2 py-1.5 text-sm font-medium",s&&"pl-8",a),...l})});y.displayName=n.JU.displayName;let j=l.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(n.wv,{ref:t,className:(0,i.cn)("-mx-1 my-1 h-px bg-border",a),...s})});j.displayName=n.wv.displayName;let E=e=>{let{className:t,...a}=e;return(0,r.jsx)("span",{className:(0,i.cn)("ml-auto text-xs tracking-widest opacity-60",t),...a})};E.displayName="DropdownMenuShortcut"},6072:(e,t,a)=>{"use strict";a.d(t,{Cf:()=>f,Es:()=>v,HM:()=>m,L3:()=>b,MV:()=>c,c7:()=>x,lG:()=>d,rr:()=>_,zM:()=>u});var r=a(99289),n=a(69764),s=a(90502),l=a(545),i=a(11405),o=a(26551);let c=(0,i.createContext)({allowNestedDialog:!0}),d=e=>{let{...t}=e;if(!(0,i.useContext)(c).allowNestedDialog){let e=Error("Dialogs must not be used inside of dropdowns or context menus. Look at RootDialog.tsx for a way to render a dialog using a hook or render the dialog above the dropdown or context menu");l.Cp(e)}return(0,i.useEffect)(()=>()=>{document.body.style.pointerEvents=""},[]),(0,r.jsx)(n.bL,{...t,onOpenChange:e=>{var a;e||setTimeout(()=>{document.body.style.pointerEvents=""},250),null==(a=t.onOpenChange)||a.call(t,e)}})},u=n.l9,p=n.ZL,m=n.bm,g=i.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(n.hJ,{ref:t,className:(0,o.cn)("fixed inset-0 z-[10000] bg-black/70 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...s})});g.displayName=n.hJ.displayName;let h={sm:"md:max-w-sm",md:"md:max-w-lg",lg:"md:max-w-2xl",xl:"md:max-w-[1200px]","2xl":"md:max-w-[1440px]"},f=i.forwardRef((e,t)=>{let{className:a,children:l,hideCloseButton:i,blurOverlay:c,blackoutOverlay:d,size:u="md",...m}=e;return(0,r.jsxs)(p,{children:[(0,r.jsx)(g,{className:(0,o.cn)("[&_[data-radix-dialog-overlay]]:bg-black",c&&"backdrop-blur-sm",d&&"bg-background")}),(0,r.jsxs)(n.UC,{ref:t,className:(0,o.cn)("fixed left-[50%] top-[50%] z-[10000] grid w-full max-w-[95vw] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-xl border bg-background p-6 shadow-modal duration-300 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-90 data-[state=open]:zoom-in-90 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%]",h[u],a),...m,children:[l,!i&&(0,r.jsxs)(n.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity data-[state=open]:bg-accent data-[state=open]:text-muted-foreground hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none",onClick:e=>{e.stopPropagation()},children:[(0,r.jsx)(s.MKb,{className:"h-4 w-4"}),(0,r.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});f.displayName=n.UC.displayName;let x=e=>{let{className:t,...a}=e;return(0,r.jsx)("div",{className:(0,o.cn)("flex flex-col space-y-1.5 text-left",t),...a})};x.displayName="DialogHeader";let v=e=>{let{className:t,fullWidthButtons:a,...n}=e;return(0,r.jsx)("div",{className:(0,o.cn)("flex flex-row justify-between gap-2 sm:justify-end [&>*]:w-full sm:[&>*]:w-auto",a&&"sm:[&>*]:w-full",t),...n})};v.displayName="DialogFooter";let b=i.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(n.hE,{ref:t,className:(0,o.cn)("text-lg font-medium leading-none tracking-tight",a),...s})});b.displayName=n.hE.displayName;let _=i.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(n.VY,{ref:t,className:(0,o.cn)("text-sm text-muted-foreground",a),...s})});_.displayName=n.VY.displayName},9070:(e,t,a)=>{"use strict";a.d(t,{t:()=>s});var r=a(22291),n=a(11405);let s=()=>{let e=(0,r.useRouter)(),t=(0,r.usePathname)(),a=(0,r.useSearchParams)(),s=a.get("settings");return{activeTab:s,openSettings:(0,n.useCallback)(function(r){let n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],s=new URLSearchParams(a);r?s.set("settings",r):s.set("settings","");let l="".concat(t,"?").concat(s.toString());n?e.replace(l):e.push(l)},[t,e,a]),closeSettings:(0,n.useCallback)(()=>{let r=new URLSearchParams(a);r.delete("settings"),e.push("".concat(t,"?").concat(r.toString()))},[t,e,a])}}},9562:(e,t,a)=>{"use strict";a.d(t,{Q:()=>l});var r=a(99289);a(11405);var n=a(99017),s=a(26551);let l=e=>{let{showTooltip:t,tooltipContent:a,children:l,className:i,align:o,side:c,triggerClassName:d,...u}=e;return t?(0,r.jsxs)(n.m_,{...u,children:[(0,r.jsx)(n.k$,{asChild:!0,children:(0,r.jsx)("div",{className:d,children:l})}),(0,r.jsx)(n.ZI,{className:(0,s.cn)("max-w-[45ch]",i),align:o,side:c,children:a})]}):l}},9563:(e,t,a)=>{"use strict";a.d(t,{Np:()=>j,mb:()=>C,Om:()=>N,Iw:()=>k});var r=a(99289),n=a(6919),s=a(22803),l=a(22291),i=a(11405),o=a(98213),c=a(76918),d=a(37079),u=a(66608),p=a(70999),m=a(33256),g=a(26787),h=a(69147),f=a(16457),x=a(49944),v=a(6072),b=a(97757),_=a(86077);let w=e=>{let{done:t}=e,a=(0,l.useRouter)();return(0,l.useSearchParams)().get("utm_source"),(0,r.jsxs)(v.Cf,{className:"gap-4 outline-none focus:ring-0",size:"md",hideCloseButton:!0,blurOverlay:!0,onInteractOutside:e=>{e.preventDefault()},children:[(0,r.jsxs)("div",{className:"flex flex-col items-start gap-4",children:[(0,r.jsx)(_.Fy,{className:"h-9"}),(0,r.jsxs)(v.c7,{children:[(0,r.jsx)(v.L3,{className:"text-2xl md:text-3xl",children:"Sorry, you don't have access"}),(0,r.jsx)(v.rr,{children:"This project is private. To view it, contact the owner or switch accounts."})]})]}),(0,r.jsxs)(v.Es,{fullWidthButtons:!0,className:"flex-col",children:[(0,r.jsx)(x.$,{onClick:()=>{a.push("/"),t()},className:"w-full",variant:"outline",children:"Go home"}),(0,r.jsxs)(x.$,{onClick:()=>{a.push("/"),t()},className:"w-full",children:[(0,r.jsx)(b.A,{name:"add",className:"h-4 w-4"}),"Create your own project"]})]})]})},y=(0,i.createContext)(null),j=e=>{let{children:t,projectId:a}=e;return(0,r.jsx)(E,{projectId:a,children:t},a)},E=e=>{let{children:t,projectId:a}=e,x=(0,i.useRef)((0,c.vt)(()=>({projectId:a,project:void 0,isDeleting:!1,hasHandledCollaborationInvite:!1,isRemixDialogOpen:!1}))),v=(0,p.f)(w),b=(0,l.useRouter)(),{isAuthenticated:_}=(0,d.Z2)(),{userData:j}=(0,u.ur)(),E=x.current(e=>e.hasHandledCollaborationInvite);(0,i.useEffect)(()=>{if(!a||!E)return;let e=(0,s.H9)(g.db,"projects",a),t=(0,s.aQ)(e,e=>{let t=e.data();t&&!t.deleted_at?x.current.setState({project:t}):x.current.getState().isDeleting||(h.logging.error("PROJECT NOT FOUND",{projectId:a,docExists:e.exists(),userId:null==j?void 0:j.id}),b.push("/projects/not-found"))},e=>{if(h.logging.error("PROJECT PERMISSION ERROR",{error:e,projectId:a}),"permission-denied"===e.code){h.logging.error("PROJECT PERMISSION DENIED",{error:e,projectId:a});let t=window.location.pathname+window.location.search,r=new URLSearchParams(window.location.search),n="lovable-badge"===r.get("utm_source");if("true"===r.get("joinedViaInviteLink")&&_)return void h.logging.info("Permission denied but user has invite link - allowing invite acceptance flow",{projectId:a,userId:null==j?void 0:j.id});let s=x.current.getState().project,l=(null==s?void 0:s.visibility)==="public";if(l&&!_){h.logging.info("Public project viewed by unauthenticated user",{projectId:a,visibility:null==s?void 0:s.visibility}),b.push("/login?redirect=".concat(encodeURIComponent(t)));return}if(!l&&!_){n&&h.logging.info("Unauthenticated badge click on private project - redirecting to login",{projectId:a}),b.push("/login");return}return void(_&&v({childProps:{done:()=>v(!1)}}))}o.toast.error("Error",{description:"Failed to fetch project."})});return()=>{t()}},[a,j,_,b,E,v]);let N=(0,n.n)({mutationFn:async e=>{let{project:t}=x.current.getState();if(!t)return;let r=(0,m.P)();await r.put("/projects/".concat(a),e)},onMutate:e=>{let t=x.current,{project:a}=t.getState();a&&t.setState({project:{...a,...e}})},throwOnError:!0}),k=(0,n.n)({mutationFn:e=>e?(0,m.P)().put("/projects/".concat(a,"/visibility"),{visibility:e}):Promise.resolve(),onSuccess:(e,t)=>{"public"===t?o.toast.success("Visibility updated",{description:"Your project is now public."}):"private"===t?o.toast.success("Visibility updated",{description:"Your project is now private."}):"draft"===t?o.toast.success("Visibility updated",{description:"Your project is now personal."}):o.toast.success("Visibility updated")},onError:()=>{o.toast.error("Error",{description:"Failed to update visibility"})}}),C=(0,n.n)({mutationFn:async e=>{let t=(0,m.P)(),r=await t.post("/projects/".concat(a,"/badge/visibility"),{hide_badge:e});try{await (0,f.o)({projectId:a})}catch(e){}return r}});((e,t)=>{let a=(0,i.useRef)(void 0);return(0,i.useEffect)(()=>{"pending"===e?a.current=o.toast.loading(t.pending.title,t.pending.options):"success"===e?a.current?(o.toast.success(t.success.title,{id:a.current,...t.success.options,duration:3e3,dismissible:!1}),a.current=void 0):o.toast.success(t.success.title,t.success.options):"error"===e&&(a.current?(o.toast.error(t.error.title,{id:a.current,...t.error.options,duration:3e3,dismissible:!1}),a.current=void 0):o.toast.error(t.error.title,t.error.options))},[e])})(C.status,{pending:{title:"Updating badge visibility..."},success:{title:"Badge visibility updated"},error:{title:"Failed to update badge visibility",options:{duration:3,description:"We couldn't update the badge visibility right now. Please try again in a few minutes."}}});let P={store:x.current,updateProject:(e,t)=>{N.mutate(e,{onSuccess:()=>{(null==t?void 0:t.onSuccess)&&t.onSuccess()},onError:e=>{(null==t?void 0:t.onError)&&t.onError(e)}})},setVisibilityMutation:k,setBadgeVisibility:C.mutateAsync,setHasHandledCollaborationInvite:e=>{x.current.setState({hasHandledCollaborationInvite:e})},setIsRemixDialogOpen:e=>{x.current.setState({isRemixDialogOpen:e})}};return(0,r.jsx)(y.Provider,{value:P,children:t})};function N(){let e=(0,i.useContext)(y);if(!e)throw Error("useProjectContext must be used within a ProjectProvider");return e}function k(e){let{store:t}=N();return t(e)}function C(e){let t=function(){let e=(0,i.useContext)(y);if(e)return e}();return null==t?void 0:t.store(e)}},13070:(e,t,a)=>{"use strict";a.d(t,{F8:()=>s,ay:()=>i,ki:()=>l});var r=a(1596),n=a(58113);function s(e){return{absolute:(0,r.GP)(e,"h:mm a"),relative:(0,r.GP)(e,"h:mm a")}}function l(e){let t=!(0,n.e)(e),a="MMM d";return t&&(a+=", yyyy"),a+=", h:mm a",{absolute:(0,r.GP)(e,a),relative:(0,r.GP)(e,a)}}function i(e){return"string"==typeof e?new Date(e):e.toDate()}},13851:(e,t,a)=>{"use strict";a.d(t,{s:()=>g});var r=a(99289),n=a(81797),s=a(2906),l=a(66324),i=a(24159),o=a(19550),c=a.n(o),d=a(49944),u=a(20234),p=a(26551);let m=()=>(0,r.jsx)("div",{className:"flex w-full justify-center",children:(0,r.jsx)(u.Zp,{className:(0,p.cn)("w-full max-w-[360px] rounded-xl border-input bg-transparent sm:max-w-none"),children:(0,r.jsxs)("div",{className:"flex flex-col items-center justify-between gap-4 sm:flex-row",children:[(0,r.jsxs)("div",{className:"flex flex-col gap-0.5",children:[(0,r.jsx)(u.ZB,{className:"text-lg font-medium",children:"Student discount"}),(0,r.jsx)(u.BT,{className:"text-sm",children:"Verify student status and get access to up to 50% off Lovable Pro."})]}),(0,r.jsx)(d.$,{asChild:!0,variant:"outline",size:"lg",className:"w-full bg-transparent px-8 sm:w-auto sm:shrink-0 lg:min-w-[180px]",children:(0,r.jsx)(c(),{href:"/students",children:"Learn more"})})]})})}),g=e=>{let{className:t,showStudentDiscountCard:a}=e,{pricingScenario:o}=(0,s.et)();return n.Ay.capture(i.aw.PLAN_VIEWED,{plan_context:o}),(0,r.jsxs)(l.ZL,{className:t,suffix:a?(0,r.jsx)(m,{}):void 0,children:[(0,r.jsx)(l.ZL.Free,{}),(0,r.jsx)(l.ZL.Ktlo,{}),(0,r.jsx)(l.ZL.Scheduled,{}),(0,r.jsx)(l.ZL.Pro,{}),(0,r.jsx)(l.ZL.Biz,{}),(0,r.jsx)(l.ZL.Enterprise,{})]})}},15207:(e,t,a)=>{"use strict";a.d(t,{x:()=>r});var r=function(e){return e.LaunchpadExamplePrompts="launchpad-example-prompts",e.AgentDefault="agent-default",e.CustomDomainsBuy="custom_domains_buy",e.GetStartedForFree="get-started-for-free",e.GithubContribution="github-contribution",e.InAppTeaching="in-app-teaching",e.MemoryIntegration="memory-integration",e.IntegrationConnection="integration-connect",e.ModelSelector="quartz-toggle",e.ReferralCopyConfetti="referral-copy-confetti",e.VoiceMode="voice-mode",e.CCPA="ccpa",e.GrowthKtlo="growth-ktlo",e.AIGateway="ai-gateway",e.Embed="embed",e.ChatSuggestions="chat-suggestions",e.DowngradeDialog="downgrade-dialog",e.SetCreditLimit="set-credit-limit",e.DownloadZip="download-zip",e.FiverrIntegration="fiverr-integration",e.StudentsDiscount="students-discount",e.ViewSwitcher="view-switcher",e.McpPlugins="mcp-plugins",e.ToolUseCardV2="tool-use-card-v2",e.UploadAnyFile="upload-any-file",e.DirectCancellation="direct-cancellation",e.CommunityFreshness="community-freshness",e.ImageDisplay="image-display",e.SecurityTryFixAll="security-try-fix-all",e}({})},16161:(e,t,a)=>{"use strict";a.d(t,{E:()=>s});var r=a(99289),n=a(26551);function s(e){let{className:t,...a}=e;return(0,r.jsx)("div",{className:(0,n.cn)("animate-pulse rounded-md bg-primary/10",t),...a})}},16457:(e,t,a)=>{"use strict";a.d(t,{o:()=>n});var r=a(40074);let n=async e=>{let{projectId:t,deploymentId:a}=e;if(!t)throw Error("Project ID is required");let n=r.env.NEXT_PUBLIC_PROXY_WORKER_PROTOCOL||"https",s=new URL("".concat(n,"://deployments.").concat("lovable.app"));(s=new URL("https://proxy-worker.lovable.run")).pathname="/__l5e/proxy/new-deployment";let l=await fetch(s.toString(),{method:"PUT",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({project_id:t,deployment_id:a})});if(!l.ok)throw Error("Failed to update deployment ID: ".concat(l.status));return l}},18883:(e,t,a)=>{"use strict";a.d(t,{Q:()=>o,V:()=>i});let r={MAX_DISPLAY_DECIMAL_PLACES:1},n=r.MAX_DISPLAY_DECIMAL_PLACES+1,s=Math.pow(10,r.MAX_DISPLAY_DECIMAL_PLACES),l=Math.pow(10,n),i=e=>Number.isFinite(e)?Math.round(e*l)/l:0,o=e=>{if(!Number.isFinite(e)||e<0)return"0";let t=Math.round(e*s)/s;return t===Math.floor(t)?t.toLocaleString():t.toLocaleString(void 0,{minimumFractionDigits:r.MAX_DISPLAY_DECIMAL_PLACES,maximumFractionDigits:r.MAX_DISPLAY_DECIMAL_PLACES})}},19618:(e,t,a)=>{"use strict";a.d(t,{R:()=>j,d:()=>E});var r=a(99289),n=a(6919),s=a(22291),l=a(81797),i=a(11405),o=a(98213),c=a(1965),d=a(34936),u=a(33256),p=a(69147),m=a(24159),g=a(97115),h=a(63680);let f="settings",x="change_type",v="billing",b="plan_id",_="plan_type",w="redirect",y=(0,i.createContext)(void 0),j=()=>{let e=(0,i.useContext)(y);if(!e)throw Error("useSubscription must be used within a SubscriptionProvider");return e},E=e=>{let{children:t}=e,[a,j]=(0,i.useState)(!1),[E,N]=(0,i.useState)(!1),[k,C]=(0,i.useState)(!1),[P,D]=(0,i.useState)(!1),I=(0,s.useSearchParams)().get("checkoutCode")||void 0,S=(0,n.n)({mutationFn:async e=>{var t;let{plan:a,workspaceId:r,grandfatheredDiscount:n=!1,planType:s="monthly",changeType:l,useStudentDiscount:i=!1}=e;j(a);let o=new URL(window.location.href),c=(e=>{let{currentUrl:t,planId:a,changeType:r}=e,n=new URL(t);return n.searchParams.set("payment_status","failed"),n.searchParams.set(b,a),r&&n.searchParams.set(x,r),n.toString()})({currentUrl:o,planId:a,changeType:l}),d=(e=>{let{currentUrl:t,planId:a,planType:r,changeType:n}=e,s=new URL("".concat(window.location.origin).concat("/purchase-success"));if("/profile/plans"===window.location.pathname)s.searchParams.set(w,window.location.origin);else{let e=new URL(t);t.searchParams.has(f)&&t.searchParams.get(f)===v&&e.searchParams.set(f,v),n&&e.searchParams.set(x,n),e.searchParams.set(_,r),s.searchParams.set(w,e.toString())}return s.searchParams.set(b,a),s.searchParams.set(_,r),s.toString()})({currentUrl:o,planId:a,planType:s,changeType:l}),p=(0,g.h5)(a,s),m=(0,h.D)(),y={price_lookup_key:p,quantity:1,cancel_url:c,success_url:d,client_reference_id:null==(t=window.Rewardful)?void 0:t.referral,workspace_id:r,with_discount:n,coupon_code:I,use_student_discount:i,tracking_data:m};return(0,u.P)().post("/workspaces/".concat(r,"/stripe/checkout"),y)},onSuccess:e=>{window.location.assign(e.url)},onMutate:e=>{let{plan:t}=e;j(t),l.Ay.capture(m.nA.CREDIT_PLAN_CHECKOUT_CLICKED,{coupon_code:I,new_plan:t})},onError:e=>{p.logging.error("error_creating_checkout_session",{error:e}),(0,d.Ni)(e)},onSettled:()=>{j(!1)}}),A=async e=>{let{plan:t,workspaceId:a,grandfatheredDiscount:r=!1,planType:n="monthly",changeType:s,useStudentDiscount:l=!1}=e;try{await S.mutateAsync({plan:t,workspaceId:a,grandfatheredDiscount:r,planType:n,changeType:s,useStudentDiscount:l})}catch(e){}},T=async e=>{let{workspaceId:t}=e;try{N(!0);let e=(0,u.P)(),a=await e.post("/workspaces/".concat(t,"/stripe/portal-session"),{return_url:window.location.href});window.location.assign(a.url)}catch(e){e instanceof c.L&&"network_error"===e.type&&o.toast.error("Network error: Please check your internet connection and try again."),p.logging.error("error_creating_portal_session",{error:e})}finally{N(!1)}},L=async e=>{let{workspaceId:t}=e;try{C(!0);let e=(0,u.P)();await e.post("/workspaces/".concat(t,"/stripe/cancel-subscription")),o.toast.success("Subscription canceled successfully",{description:"Your subscription will remain active until the end of your current billing period."})}catch(e){(0,d.Ni)(e)}finally{C(!1)}},R=async e=>{let{workspaceId:t}=e;try{D(!0);let e=(0,u.P)();await e.post("/workspaces/".concat(t,"/stripe/cancel-changes")),o.toast.success("Subscription changes canceled successfully",{description:"Any pending subscription changes have been canceled."})}catch(e){(0,d.Ni)(e)}finally{D(!1)}};return(0,r.jsx)(y.Provider,{value:{checkoutLoading:a,isCreatePortalSessionLoading:E,isCancelSubscriptionLoading:k,isCancelSubscriptionChangesLoading:P,toCheckout:A,createPortalSession:T,cancelSubscription:L,cancelSubscriptionChanges:R},children:t})}},20234:(e,t,a)=>{"use strict";a.d(t,{BT:()=>c,Wu:()=>d,ZB:()=>o,Zp:()=>l,aR:()=>i,wL:()=>u});var r=a(99289),n=a(11405),s=a(26551);let l=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,r.jsx)("div",{ref:t,className:(0,s.cn)("flex flex-col gap-6 rounded-lg border bg-card p-6 text-primary shadow-sm",a),...n})});l.displayName="Card";let i=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,r.jsx)("div",{ref:t,className:(0,s.cn)("flex flex-col space-y-1.5",a),...n})});i.displayName="CardHeader";let o=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,r.jsx)("div",{ref:t,className:(0,s.cn)("font-medium leading-none tracking-tight",a),...n})});o.displayName="CardTitle";let c=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,r.jsx)("div",{ref:t,className:(0,s.cn)("text-sm text-muted-foreground",a),...n})});c.displayName="CardDescription";let d=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,r.jsx)("div",{ref:t,className:(0,s.cn)("gap-6 pt-0",a),...n})});d.displayName="CardContent";let u=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,r.jsx)("div",{ref:t,className:(0,s.cn)("flex items-center pt-0",a),...n})});u.displayName="CardFooter"},23594:(e,t,a)=>{"use strict";a.d(t,{J:()=>g,S:()=>m});var r=a(34363),n=a(11405),s=a(32044),l=a(22467),i=a(33256),o=a(273);let c={permissions:e=>{let{workspaceId:t,projectId:a}=e;return(0,s.j)({queryKey:o.QO.get(t,a),queryFn:async()=>{if(!a&&!t)return[];let e=(0,i.P)(),r=new URLSearchParams;return a?r.append("projectId",a):t&&r.append("workspaceId",t),e.get("/permissions?".concat(r.toString()))},refetchOnMount:!0,refetchOnWindowFocus:!1,staleTime:3e5,retry:3,placeholderData:l.rX})}};var d=a(9563),u=a(37079),p=a(43328);function m(){let e=(0,d.mb)(e=>e.projectId),t=(0,p.j4)(e=>{var t;return null==(t=e.currentWorkspace)?void 0:t.id}),{isAuthenticated:a}=(0,u.Z2)(),{data:s,isLoading:l}=(0,r.I)({...c.permissions({workspaceId:t,projectId:e}),enabled:a});return{permissions:(0,n.useMemo)(()=>a&&Array.isArray(s)?s:[],[a,s]),isLoading:l}}function g(e){let t=(0,d.mb)(e=>e.projectId),a=(0,p.j4)(e=>{var t;return null==(t=e.currentWorkspace)?void 0:t.id}),{isAuthenticated:s}=(0,u.Z2)(),{data:l,isLoading:i}=(0,r.I)({...c.permissions({workspaceId:a,projectId:t}),enabled:s});return{permitted:(0,n.useMemo)(()=>s&&Array.isArray(l)&&l.includes(e),[s,l,e]),isLoading:i}}},24159:(e,t,a)=>{"use strict";a.d(t,{$6:()=>r,LT:()=>m,Ue:()=>n,aw:()=>i,fF:()=>p,h6:()=>c,iK:()=>u,lY:()=>o,nA:()=>l,rz:()=>s,yD:()=>d});let r={FIRST_INTERACT_AFTER_GEN:"project:first_interact_after_gen",TABS:{CHAT_OPENED:"project:tabs:chat_opened",HISTORY_OPENED:"project:tabs:history_opened"},HEADER:{SETTINGS_OPENED:"project:header:settings_opened",SIDEBAR_TOGGLED:"project:header:sidebar_toggled"},SETTINGS:{AGENT_MODE_DISABLED:"project:settings:agent_mode_disabled"},CREATION:{DONE_AND_RETAINED_VIEW:"project:creation:done_and_retained_view",API_KEY_DETECTED:"project:creation:api_key_detected",API_KEY_WARNING_DISMISSED:"project:creation:api_key_warning_dismissed"},HISTORY:{CARD_SELECTED:"project:history:card_selected"},BOOKMARK:{ADDED:"project:bookmark:added",REMOVED:"project:bookmark:removed"},CODE_CARD:{VIEW_CODE_CLICKED:"project:code_card:view_code_clicked",RESTORE_CLICKED:"project:code_card:restore_clicked",PREVIEW_CLICKED:"project:code_card:preview_clicked"},FIVERR_INTEGRATION:{SDK_LOADED:"project:fiverr_integration:sdk_loaded",SDK_ERROR:"project:fiverr_integration:sdk_error",INTEGRATION_STARTED:"project:fiverr_integration:integration_started",HIRE_EXPERT_CLICKED:"project:fiverr_integration:hire_expert_clicked",CHAT_CLOSED_BY_USER:"project:fiverr_integration:chat_closed_by_user"},MERMAID:{DIAGRAM_OPENED:"project:mermaid:diagram_opened"},ELLIPSIS:{RESTORE_CLICKED:"project:ellipsis:restore_clicked",PREVIEW_CLICKED:"project:ellipsis:preview_clicked",COPY_LINK_CLICKED:"project:ellipsis:copy_link_clicked"},CONSOLE:{EXITED_VIA_CARD:"project:console:exited_via_card",EXITED_VIA_BUTTON:"project:console:exited_via_button",DIFF_COPIED:"project:console:diff_copied",GITHUB_LINK_CLICKED:"project:console:github_link_clicked",RESTORE_VERSION_CLICKED:"project:console:restore_version_clicked"},PREVIEW:{DEVICE_CHANGED:"project:preview:device_changed"},KNOWLEDGE:{SAVED:"project:knowledge:saved"},CODE_EDITOR:{SAVED:"project:code_editor:saved",DISCARDED:"project:code_editor:discarded",DEV_MODE_TOGGLE_PRESSED:"project:code_editor:dev_mode_toggle_pressed"},CHAT:{MESSAGE_SENT:"chat_message_sent",API_KEY_DETECTED:"project:chat:api_key_detected",API_KEY_WARNING_DISMISSED:"project:chat:api_key_warning_dismissed",IMAGE_COPIED:"project:chat:image_copied",IMAGE_ADDED_TO_INPUT:"project:chat:image_added_to_input",VOICE_INPUT_STOPPED:"project:chat:voice_input_stopped"},ONBOARDING_TOUR:{STEP_VIEWED_ONBOARDING_START:"project:onboarding_tour:step_viewed:onboarding-start",STEP_VIEWED_VISUAL_EDITOR_TOGGLE:"project:onboarding_tour:step_viewed:visual-editor-toggle",STEP_VIEWED_MAIN_MENU:"project:onboarding_tour:step_viewed:main-menu",STEP_VIEWED_PREVIEW_URL_BAR:"project:onboarding_tour:step_viewed:preview-url-bar",STEP_VIEWED_SUPABASE_DROPDOWN:"project:onboarding_tour:step_viewed:supabase-dropdown",STEP_VIEWED_SHARE_MENU:"project:onboarding_tour:step_viewed:share-menu",COMPLETED:"project:onboarding_tour:completed",SKIPPED:"project:onboarding_tour:skipped"},COMMUNITY:{PROJECT_CLICKED:"project:community:project_clicked",FILTER_CHANGED:"project:community:filter_changed",CATEGORY_CHANGED:"project:community:category_changed",SHOW_MORE_CLICKED:"project:community:show_more_clicked"},VISUAL_EDITS:{TOGGLED:"visual_editor_toggled"},EMBED:{CODE_COPIED:"project:embed:code_copied",SUCCESS_DIALOG_CLICKED:"project:embed:success_dialog_clicked"},COLLABORATION:{DROPDOWN_OPENED:"project:collaboration:dropdown_opened",COLLABORATOR_INVITED:"project:collaboration:collaborator_invited",COLLABORATOR_ROLE_CHANGED:"project:collaboration:collaborator_role_changed",COLLABORATOR_REMOVE_INITIATED:"project:collaboration:collaborator_remove_initiated",REMOVE_DIALOG_CONFIRMED:"project:collaboration:remove_dialog_confirmed",REMOVE_DIALOG_CANCELLED:"project:collaboration:remove_dialog_cancelled",SECRET_LINK_CREATED:"project:collaboration:secret_link_created",SECRET_LINK_COPIED:"project:collaboration:secret_link_copied",SECRET_LINK_REMOVED:"project:collaboration:secret_link_removed"},SECURITY:{NUDGE_REVIEW_CLICKED:"project:security:nudge:review_clicked",PUBLISH_SCAN_CLICKED:"project:security:publish:scan_clicked",PUBLISH_REVIEW_CLICKED:"project:security:publish:review_clicked",PUBLISH_CLICKED:"project:security:publish:clicked",VIEW_REVIEW_CLICKED:"project:security:view:review_clicked",VIEW_TRY_FIX_CLICKED:"project:security:view:try_fix_clicked"}},n={DIALOG:{VIEWED:"segmentation:dialog_viewed",SUBMITTED:"segmentation:dialog_submitted",SKIPPED:"segmentation:dialog_skipped",PARTIAL_SUBMIT:"segmentation:dialog_partial_submit"},STEP_VIEWED:{INVITE_STEP:"segmentation:step_viewed:invite_step"},STEP_SKIPPED:{INVITE_STEP:"segmentation:step_skipped:invite_step"},INVITE_FINISHED:"segmentation:invite_finished",BUTTON_CLICKED:{BUILD_GOAL:"segmentation:button_clicked_build_goal",PRIMARY_USE_CASE:"segmentation:button_clicked_primary_use_case",ROLE:"segmentation:button_clicked_role",HEARD_FROM:"segmentation:button_clicked_heard_from",BACK:"segmentation:button_clicked_back",SUBMIT:"segmentation:button_clicked_submit",SKIP:"segmentation:button_clicked_skip",CONTINUE_NAME_STEP:"segmentation:button_clicked_continue_name_step",CONTINUE:"segmentation:button_clicked_continue",THEME:"segmentation:button_clicked_theme"}},s={SUGGEST_LOWER_PLAN:{CONTINUE_CLICKED:"downgrade:suggest_lower_plan:continue_clicked",DOWNGRADE_CREDITS_CLICKED:"downgrade:suggest_lower_plan:downgrade_credits_clicked"},FEATURE_USAGE:{CONTINUE_CLICKED:"downgrade:feature_usage:continue_clicked",KEEP_PLAN_CLICKED:"downgrade:feature_usage:keep_plan_clicked"},FEEDBACK:{CONTINUE_CLICKED:"downgrade:feedback:continue_clicked",KEEP_PLAN_CLICKED:"downgrade:feedback:keep_plan_clicked"},KTLO_OFFER:{SWITCH_CLICKED:"downgrade:ktlo_offer:switch_clicked",CONTINUE_DOWNGRADE_CLICKED:"downgrade:ktlo_offer:continue_downgrade_clicked"},FINAL_CONFIRMATION:{CONFIRM_CLICKED:"downgrade:final_confirmation:confirm_clicked",KEEP_PLAN_CLICKED:"downgrade:final_confirmation:keep_plan_clicked"}},l={CREDIT_PLAN_CHECKOUT_CLICKED:"workspace:subscriptions:checkout_button_clicked"},i={PLAN_VIEWED:"pricing:plan:viewed",PLAN_UPGRADE_CLICKED:"pricing:plan:upgrade_clicked",PLAN_DOWNGRADE_CLICKED:"pricing:plan:downgrade_clicked",PLAN_DROPDOWN_CHANGED:"pricing:plan:dropdown_changed",GET_STARTED_CLICKED:"pricing:plan:get_started_clicked",CONTACT_US_CLICKED:"pricing:plan:contact_us_clicked",NOTIFY_ME_CLICKED:"pricing:plan:notify_me_clicked",PLAN_TYPE_CHANGED:"pricing:plan:type_changed"},o={UPGRADE:{SHOW:{IN_CHAT:"chat:upgrade:show:in_chat",IN_DROPDOWN:"chat:upgrade:show:in_dropdown"},BUTTON_CLICKED:{CHAT:"chat:upgrade:button_clicked:chat",NAV_BAR:"chat:upgrade:button_clicked:nav_bar",ACCOUNT_DROPDOWN:"chat:upgrade:button_clicked:account_dropdown"},CONTEXT:{OUT_OF_CREDITS:"outOfCredits",BILLING:"billing"}},OUT_OF_CREDITS_DIALOG:{DISMISS_CLICKED:"workspace:out_of_credits_dialog:dismiss_clicked",SEND_PING_CLICKED:"workspace:out_of_credits_dialog:send_ping_clicked"}},c={OPENED_DIALOG:"referral:advocate:opened_dialog",COPIED_LINK:"referral:advocate:copied_link",LINK_CLICKED:"referral:invitee:link_clicked"},d={EXAMPLE_PROMPT:{CLICKED:"launchpad:example_prompt:clicked"},CREATE_FORM:{ATTACH_CLICKED:"launchpad:create_form:attach_clicked",ATTACH_ADD_IMAGES_CLICKED:"launchpad:create_form:attach_add_images_clicked",ATTACH_DISMISSED:"launchpad:create_form:attach_dismissed_clicked",FIGMA_IMPORT_CLICKED:"launchpad:create_form:figma_import_clicked",DROPDOWN_CLICKED:"launchpad:create_form:dropdown_clicked",DROPDOWN_ATTACH_CLICKED:"launchpad:create_form:dropdown_attach_clicked"}},u={OPEN_TOP_MENU:"project:page_speed:open:top_menu",OPEN_PUBLISH:"project:page_speed:open:publish",REGENERATE:"project:page_speed:regenerate",STRATEGY_SELECTED:"project:page_speed:strategy_selected",CATEGORY_SELECTED:"project:page_speed:category_selected",TRY_FIX:"project:page_speed:try_fix"},p={SETTINGS_UPDATED:"account:settings:updated",SETTINGS_CANCELLED:"account:settings:cancelled"},m={VERIFICATION_SUCCESS:"student:verification:success",REVIEW_REQUESTED:"student:verification:review_requested"}},27899:(e,t,a)=>{"use strict";a.d(t,{IJ:()=>c,bT:()=>d,bY:()=>m});var r=a(99289),n=a(11405),s=a(99017),l=a(18883);let i={GAP_SCALE_FACTOR:.002,MIN_GAP_WIDTH:2,MIN_INDICATOR_WIDTH:7,PROGRESS_BAR_HEIGHT:11,FALLBACK_MIN_WIDTH_PERCENTAGE:2},o=["bg-blue-800","bg-blue-600","bg-blue-400","bg-blue-200","bg-blue-50"],c=(e,t)=>(0,n.useMemo)(()=>((e,t)=>{if(!e)return"bg-muted-foreground";let a=t.findIndex(t=>t.name===e);return -1===a?"bg-muted-foreground":o[Math.min(a,o.length-1)]})(e,t),[e,t]),d=e=>{switch(e){case"daily":return"Daily credits used first";case"rollover":return"Using rollover credits";case"billing":return"Using monthly credits";case"granted":return"Using bonus credits";case null:return"You are out of credits"}},u={granted:"Bonus",billing:"Monthly",rollover:"Rollover",daily:"Daily"},p=e=>u[e],m=e=>{let{progressData:t}=e,a=(0,n.useRef)(null),[c,d]=(0,n.useState)(0);(0,n.useLayoutEffect)(()=>{let e=()=>{a.current&&d(a.current.offsetWidth)};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]);let u=Math.max(i.MIN_GAP_WIDTH,c*i.GAP_SCALE_FACTOR),m=i.MIN_INDICATOR_WIDTH,g=(0,n.useMemo)(()=>t.hasCredits?t.sources.map((e,a)=>{let r=Math.max(t.totalAllocation>0?e.remaining/t.totalAllocation*100:0,c>0?m/c*100:i.FALLBACK_MIN_WIDTH_PERCENTAGE),n=a===t.sources.length-1,s=o[Math.min(a,o.length-1)];return{...e,widthPercentage:r,isFirst:0===a,isLast:n,colorClass:s}}):[],[t.hasCredits,t.sources,t.totalAllocation,c,m]),h=(0,n.useMemo)(()=>{if(!t.hasCredits||0===g.length)return[];let e=c>0?u/c*100:.4,a=Math.max(0,g.length-1)*e,r=g.reduce((e,t)=>e+t.widthPercentage,0)+a,n=r>100?100/r:1,s=e*n,l=0;return g.map(e=>{let t=e.widthPercentage*n,a=l;return l+=t+(e.isLast?0:s),{...e,widthPercentage:t,leftOffset:a}})},[t.hasCredits,g,c,u]);return t.hasCredits?(0,r.jsx)("div",{className:"flex w-full items-center gap-2",children:(0,r.jsx)("div",{ref:a,className:"relative flex-1 overflow-hidden rounded-lg bg-muted-active",style:{height:"".concat(i.PROGRESS_BAR_HEIGHT,"px")},children:h.map(e=>(0,r.jsxs)(s.m_,{delayDuration:0,children:[(0,r.jsx)(s.k$,{asChild:!0,children:(0,r.jsx)("div",{className:"absolute h-full cursor-pointer ".concat(e.colorClass," transition-all ").concat(e.isFirst?"rounded-bl-lg rounded-tl-lg":""," ").concat(e.isLast?"rounded-br-lg rounded-tr-lg":""),style:{left:"".concat(e.leftOffset,"%"),width:"".concat(e.widthPercentage,"%")}})}),(0,r.jsx)(s.ZI,{className:"border border-gray-200 bg-white shadow-lg",children:(0,r.jsx)("div",{className:"justify-center text-xs font-normal leading-none text-black",children:"granted"===e.name?"".concat((0,l.Q)(e.remaining)," ").concat(p(e.name)," credits"):"".concat((0,l.Q)(e.remaining),"/").concat((0,l.Q)(e.limit)," ").concat(p(e.name)," credits")})})]},e.name))})}):(0,r.jsx)("div",{className:"flex w-full items-center gap-2",children:(0,r.jsx)("div",{className:"relative h-2.5 flex-1 overflow-hidden rounded-lg bg-muted-active"})})}},33063:(e,t,a)=>{"use strict";a.d(t,{B:()=>o,O:()=>c});var r=a(99289),n=a(81797),s=a(11405),l=a(76918);let i=(0,s.createContext)(null),o=e=>{let{children:t}=e,a=(0,s.useRef)((0,l.vt)(()=>({projectWorkspaceId:null,currentWorkspaceId:null}))),o=(0,s.useCallback)(()=>{let{projectWorkspaceId:e,currentWorkspaceId:t}=a.current.getState();n.Ay.group("workspace",e||t||"none")},[]),c=(0,s.useCallback)(e=>{a.current.setState({projectWorkspaceId:e}),o()},[o]),d=(0,s.useCallback)(e=>{a.current.setState({currentWorkspaceId:e}),o()},[o]),u={store:a.current,setProjectWorkspaceId:c,setCurrentWorkspaceId:d};return(0,r.jsx)(i.Provider,{value:u,children:t})};function c(){let e=(0,s.useContext)(i);if(!e)throw Error("usePostHogGroupContext must be used within a PostHogGroupProvider");return e}},33979:(e,t,a)=>{"use strict";a.d(t,{C:()=>o,z:()=>i});var r=a(99289),n=a(52272),s=a(11405),l=a(26551);let i=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(n.bL,{className:(0,l.cn)("grid gap-2",a),...s,ref:t})});i.displayName=n.bL.displayName;let o=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(n.q7,{ref:t,className:(0,l.cn)("aspect-square h-4 w-4 rounded-full border border-primary text-primary shadow focus:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",a),...s,children:(0,r.jsx)(n.C1,{className:"flex items-center justify-center",children:(0,r.jsx)("div",{className:"aspect-square h-2.5 w-2.5 shrink-0 rounded-full bg-primary"})})})});o.displayName=n.q7.displayName},38948:(e,t,a)=>{"use strict";a.d(t,{x:()=>o});var r=a(99289),n=a(53417),s=a(26551);let l={pro:"brand-twilight",business:"brand-twilight",admin:"brand-saffron",labs:"brand-twilight",internal:"secondary",soon:"brand-saffron"},i={pro:"pro",business:"business",admin:"admin",labs:"labs",internal:"internal",soon:"Coming Soon"},o=e=>{let{badge:t,className:a}=e;return(0,r.jsx)(n.E,{variant:l[t],className:(0,s.cn)("capitalize",a),children:i[t]})}},39627:(e,t,a)=>{"use strict";a.d(t,{G1:()=>g,Jz:()=>p,Pt:()=>m,WQ:()=>u,mm:()=>d});var r=a(99289),n=a(51233),s=a(9070),l=a(97757),i=a(67017),o=a(26551),c=a(38948);let d=e=>{let{children:t,className:a,...s}=e;return(0,r.jsx)(n.tU,{className:(0,o.cn)("mt-0 flex w-full flex-1 flex-col items-start overflow-hidden md:flex-row",a),orientation:"vertical",...s,children:t})},u=e=>{let{children:t,className:a,hasActiveTab:s,...l}=e;return(0,r.jsxs)(n.j7,{className:(0,o.cn)("mt-[22px] flex h-full w-full flex-col gap-0.5 overflow-y-auto px-4 py-6 md:mt-0 md:w-[240px] md:flex-nowrap md:border-r",a,s?"hidden md:flex":"flex"),...l,children:[(0,r.jsx)(h,{hideBackButton:!0,className:"mt-[22px]",children:"Settings"}),t]})},p=e=>{let{children:t,className:a,...s}=e;return(0,r.jsx)(n.Xi,{className:(0,o.cn)("flex min-h-10 w-full items-center justify-start gap-3 rounded-md px-2.5 py-2 text-start text-base data-[state=active]:bg-muted hover:bg-muted-hover md:min-h-8 md:w-auto md:gap-2 md:text-sm [&>svg]:size-5 md:[&>svg]:size-4",a),...s,children:t})},m=e=>{let{children:t,className:a,title:s,description:i,docsLink:d,descriptionAction:u,badge:p,customBadge:m,...g}=e;return(0,r.jsxs)(n.av,{className:(0,o.cn)("flex max-h-full w-full flex-1 flex-col gap-6 overflow-y-auto px-6 pb-6 pt-20 data-[state=inactive]:hidden focus:outline-none md:px-10 md:pt-6",a),...g,children:[s&&(0,r.jsxs)("div",{className:"hidden w-full flex-col gap-2 border-b pb-3 md:flex",children:[(0,r.jsxs)("h4",{className:"flex items-center gap-2 text-lg font-medium",children:[(0,r.jsx)("span",{children:s}),p&&(0,r.jsx)(c.x,{badge:p}),m]}),i&&(0,r.jsxs)("div",{className:(0,o.cn)("flex items-start justify-between gap-2 text-sm text-muted-foreground"),children:[(0,r.jsx)("div",{className:"",children:i}),d&&(0,r.jsxs)("a",{href:d,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-1 text-sm text-muted-foreground duration-150 ease-in-out hover:text-muted-foreground/80",children:[(0,r.jsx)(l.A,{name:"help",size:"small"}),"Docs"]}),u&&u]})]}),(0,r.jsx)(h,{descriptionAction:u,children:s}),t]})},g=e=>{let{title:t}=e;return(0,r.jsx)("div",{className:(0,o.cn)("mb-1 mt-6 px-3 text-sm font-medium text-muted-foreground first:mt-0 md:text-xs"),children:t})},h=e=>{let{children:t,className:a,hideBackButton:n=!1,descriptionAction:c,...d}=e,{openSettings:u}=(0,s.t)();return(0,i.A)("md")?(0,r.jsxs)("div",{className:(0,o.cn)("absolute inset-x-0 top-0 z-20 flex min-h-8 items-center justify-between border-b bg-background px-2 py-3 md:hidden",a),...d,children:[(0,r.jsx)("div",{className:"flex items-baseline",children:!n&&(0,r.jsxs)("button",{className:(0,o.cn)("flex items-center gap-1 text-base md:text-sm"),onClick:()=>u(),children:[(0,r.jsx)(l.A,{name:"chevron_left",size:"default"})," Settings"]})}),(0,r.jsx)("div",{className:"absolute left-1/2 flex -translate-x-1/2 items-baseline justify-center text-center text-lg font-medium",children:t}),(0,r.jsx)("div",{className:"flex min-h-7 items-baseline pr-0.5",children:c})]}):null}},40177:(e,t,a)=>{"use strict";a.d(t,{Gi:()=>x,Tp:()=>w,_C:()=>y,ct:()=>k,jD:()=>j});var r=a(99289),n=a(545),s=a(62656),l=a(22291),i=a(81797),o=a(7907),c=a(11405),d=a(50471),u=a(34958),p=a(69147),m=a(15207),g=a(37079),h=a(40074);let f=(0,s.default)(()=>Promise.all([a.e(836),a.e(5765),a.e(284),a.e(8566)]).then(a.bind(a,98566)).then(e=>({default:e.FeatureFlagDebugDialog})),{loadableGenerated:{webpack:()=>[98566]},ssr:!1});var x=function(e){return e.LaunchpadFormUploadImageModal="launchpad-upload-image-modal",e}({});let v=(0,c.createContext)(void 0),b=()=>{let e=(0,c.useContext)(v);if(!e)throw Error("useFeatureFlagContext must be used within a PostHogFlagsContext in the PosthogProvider");return e},_={},w=e=>{let{featureFlags:t,featureFlagOverrides:a}=b();return void 0!==a[e]?a[e]:!!(null==t?void 0:t[e])},y=e=>{let{featureFlags:t}=b();return null==t?void 0:t[e]},j=()=>({openFeatureFlagDebugDialog:b().openFeatureFlagDebugDialog}),E="phc_xdBVCyOkYw40Pqd7xp5Er88lGq2IGFd4kZHRiKvvkjr",N=E&&!0;function k(e){let{children:t,bootstrapData:a}=e,{authUser:s}=(0,g.Z2)(),p=(0,g.Nm)(),x=(0,c.useMemo)(()=>null==s?void 0:s.uid,[null==s?void 0:s.uid]),b=(0,c.useMemo)(()=>null==s?void 0:s.displayName,[null==s?void 0:s.displayName]),w=(0,u.E$)(),[y,j]=(0,c.useState)(!1),[k,C]=(0,c.useState)(_);(0,d.vC)("ctrl+shift+f",e=>{e.preventDefault(),j(e=>!e)},{enabled:!!w},[w]);let P=(0,c.useMemo)(()=>({featureFlags:null==a?void 0:a.featureFlags,featureFlagOverrides:k,openFeatureFlagDebugDialog:w?()=>j(!0):void 0}),[null==a?void 0:a.featureFlags,k,w]),D=(0,c.useCallback)(e=>{let{target:t,action:a}=e;if("bulk"===t){let e=Object.values(m.x);switch(a){case"enable_all":C(Object.fromEntries(e.map(e=>[e,!0])));break;case"disable_all":C(Object.fromEntries(e.map(e=>[e,!1])));break;case"clear_all":C(_)}}else C(e=>({...e,[t]:a}))},[]);(0,c.useEffect)(()=>{x&&n.gV({id:x})},[x]),(0,c.useEffect)(()=>{N&&x&&(i.Ay.identify(x,{email:p,name:b}),i.Ay.capture("github_branch",{branch:h.env.BRANCH||null}))},[x,p,b]),(0,c.useEffect)(()=>{N&&i.Ay.init(E,{api_host:"https://lovable.dev/ingest",ui_host:"https://us.posthog.com",bootstrap:a,session_recording:{maskAllInputs:!1,maskInputOptions:{password:!0}},autocapture:{element_allowlist:["button"]},verbose:!1})},[a]);let I=(0,l.usePathname)();return(0,c.useEffect)(()=>{i.Ay.capture("$pageview")},[I]),(0,r.jsx)(v.Provider,{value:P,children:(0,r.jsxs)(o.so,{client:i.Ay,children:[t,w&&(0,r.jsx)(f,{open:y,onOpenChange:j,featureFlagOverrides:k,onFeatureFlagOverrideChange:D,originalFlags:(null==a?void 0:a.featureFlags)||{}})]})})}E||p.logging.info("Missing NEXT_PUBLIC_POSTHOG_KEY in env; set to 'skip' to disable")},43328:(e,t,a)=>{"use strict";a.d(t,{cA:()=>N,Dx:()=>k,j4:()=>C,nu:()=>P});var r=a(99289),n=a(34363),s=a(22291),l=a(11405),i=a(76918),o=a(37079),c=a(66608),d=a(33063),u=a(69147),p=a(72384),m=a(72134),g=a(76974),h=a(51252),f=a(6919),x=a(98213),v=a(34936),b=a(33256),_=a(273),w=a(2906),y=a(19618),j=a(5465);let E=(0,l.createContext)(null);function N(e){var t,a,N;let k,{children:C}=e,P=(0,l.useRef)((0,i.vt)(()=>({currentWorkspace:null,membership:null,hasFetchedCurrentWorkspace:!1}))),{authUser:D}=(0,o.Z2)(),{userData:I}=(0,c.ur)(),S=(k=null!=(t=null==D?void 0:D.uid)?t:"","".concat("lovable-current-workspace-id","-").concat(k)),A=(0,s.useSearchParams)().get("workspaceId"),{allWorkspaces:T,isLoading:L}=(0,g.Mu)(e=>({allWorkspaces:e.workspaces,isLoading:e.isLoading})),R=(0,m.dA)(e=>e.active),O=null!=(a=null==T?void 0:T[0])?a:null,[F,M]=(0,l.useState)(null);(0,l.useEffect)(()=>{if(window)try{let e=window.localStorage.getItem(S);e&&M(e)}catch(e){u.logging.debug("Error getting current workspace id from localstorage",{error:e})}},[S]);let K=(0,l.useCallback)(e=>{M(e);try{e?window.localStorage.setItem(S,e):window.localStorage.removeItem(S)}catch(t){u.logging.debug("Error setting current workspace id to localstorage",{error:t,newId:e})}},[S]);(0,l.useEffect)(()=>{!F&&(null==O?void 0:O.id)&&K(O.id)},[F,null==O?void 0:O.id,K]);let{data:W,isLoading:U,isError:G}=(0,n.I)({...p.y.detail({workspaceId:null!=F?F:"",projectId:void 0}),enabled:!!F&&!R});G&&!R&&K(null==O?void 0:O.id);let{data:B}=(0,n.I)(p.y.detail({workspaceId:null!=A?A:"",projectId:void 0}));!function(e){let{authUser:t,currentWorkspaceId:a,userData:r,isLoadingAllWorkspaces:n,currentWorkspace:s}=e,[i,o]=(0,l.useState)(!1),{toCheckout:c}=(0,y.R)(),d=(0,l.useCallback)(async()=>{if((null==t?void 0:t.uid)&&a&&!i)try{let e=localStorage.getItem(w.LS);if(!e)return;let t=JSON.parse(e),r=Date.now()-t.timestamp;if(localStorage.removeItem(w.LS),r>36e5)return;o(!0),await c({plan:t.planId,workspaceId:a})}catch(e){u.logging.error("Error processing pending plan selection",{error:e,userId:null==t?void 0:t.uid,workspaceId:a}),localStorage.removeItem(w.LS)}},[null==t?void 0:t.uid,a,i,c]);(0,l.useEffect)(()=>{t&&a&&!n&&!i&&(null==r?void 0:r.segmentation_form_status)===j.C.SUBMITTED&&(null==s?void 0:s.plan)==="free"&&d()},[t,null==s?void 0:s.plan,a,n,i,d,null==r?void 0:r.segmentation_form_status])}({authUser:D,currentWorkspaceId:F,userData:null!=I?I:null,isLoadingAllWorkspaces:L,currentWorkspace:null!=(N=null==W?void 0:W.workspace)?N:null}),function(e){let{allWorkspaces:t,isLoadingAllWorkspaces:a,workspaceDataForUnacceptedInvites:r,setCurrentWorkspaceId:n,authUser:i}=e,o=(0,s.useRouter)(),c=(0,s.usePathname)(),d=(0,s.useSearchParams)(),u=(0,l.useRef)(new Set),p=d.get("workspaceId"),{store:m}=(0,g.k9)(),w=(0,h.jE)(),y=(0,l.useCallback)(()=>{let e=new URLSearchParams(d);e.delete("workspaceId"),o.replace("".concat(c,"?").concat(e.toString()),{scroll:!1})},[o,c,d]),{mutate:j}=(0,f.n)({mutationFn:async e=>{let t=(0,b.P)();return await t.put("/user/workspaces/".concat(e.id,"/accept-invite")),e},onSuccess:e=>{n(e.id),y(),u.current.has(e.id)||(x.toast.success(e.name?'Switched to "'.concat(e.name,'" workspace'):"Switched to workspace"),null==m||m.setState({workspaces:[...t,e]})),u.current.add(e.id)},onError:(e,t)=>{u.current.has(t.id)||(y(),u.current.add(t.id),(0,v.Ni)(e))},onSettled:()=>{w.invalidateQueries({queryKey:_.workspaceKeys.all})},retry:!1});(0,l.useEffect)(()=>{if(p&&!i&&!a)return void o.replace("/login");p&&!a&&(null==r?void 0:r.workspace)&&!u.current.has(r.workspace.id)&&j(r.workspace)},[j,a,null==r?void 0:r.workspace,p,i,o,c,d])}({allWorkspaces:T,isLoadingAllWorkspaces:L,authUser:D,workspaceDataForUnacceptedInvites:null!=B?B:{workspace:null},setCurrentWorkspaceId:K}),(0,l.useEffect)(()=>{var e,t;P.current.setState({currentWorkspace:null!=(e=null==W?void 0:W.workspace)?e:null,membership:null!=(t=null==W?void 0:W.current_member)?t:null})},[null==W?void 0:W.workspace,null==W?void 0:W.current_member]),(0,l.useEffect)(()=>{P.current.setState({hasFetchedCurrentWorkspace:!U})},[U]),(0,l.useEffect)(()=>{D||P.current.setState({currentWorkspace:null,membership:null,hasFetchedCurrentWorkspace:!1})},[D]);let V=(0,d.O)();(0,l.useEffect)(()=>(null==V||V.setCurrentWorkspaceId(null!=F?F:null),()=>{null==V||V.setCurrentWorkspaceId(null)}),[F,V]);let z={store:P.current,setCurrentWorkspaceId:K,currentWorkspaceId:F};return(0,r.jsx)(E.Provider,{value:z,children:C})}function k(){let e=(0,l.useContext)(E);if(!e)throw Error("useWorkspaceContext must be used within a WorkspaceProvider");return e}function C(e){let{store:t}=k();if(!t)throw Error("useWorkspaceStore must be used within a WorkspaceProvider");return t(e)}function P(e){let t=(0,l.useContext)(E),a=null==t?void 0:t.store;return a?a(e):null}},44346:e=>{e.exports={shimmerText:"ShimmeringText_shimmerText__SMwG_",shimmer:"ShimmeringText_shimmer__1AZHS",shimmerTextSuccess:"ShimmeringText_shimmerTextSuccess__itzB9"}},46891:(e,t,a)=>{"use strict";a.d(t,{O:()=>c});var r=a(99289),n=a(19550),s=a.n(n),l=a(73305),i=a(49944),o=a(9562);let c=e=>{let{type:t,variant:a,onClick:n,href:c,isExternal:d,text:u,showTooltip:p,tooltipContent:m,disabled:g,loading:h}=e;return"link"===t?(0,r.jsx)(i.$,{variant:a,asChild:!0,onClick:n,className:d?"h-9 w-full whitespace-nowrap":"h-9",children:(0,r.jsx)(s(),{href:c,passHref:!0,target:d?"_blank":void 0,children:u})}):(0,r.jsx)(o.Q,{showTooltip:p||!1,tooltipContent:m||"",delayDuration:300,children:(0,r.jsx)(l.oO,{onClick:n,variant:a,disabled:g,loading:h,className:"h-9",children:u})})}},48591:(e,t,a)=>{"use strict";a.d(t,{AE:()=>f,Bk:()=>N,G8:()=>j,H4:()=>E,J6:()=>C,Jt:()=>w,Li:()=>_,O3:()=>P,QZ:()=>v,Qe:()=>u,UT:()=>m,WW:()=>h,ZS:()=>x,aR:()=>d,f$:()=>g,fT:()=>p,j$:()=>k,sA:()=>y,tN:()=>b,zJ:()=>c});var r=a(43328),n=a(80328),s=a(40177),l=a(34958),i=a(15207),o=a(97115);let c=()=>(0,s.Tp)(i.x.ModelSelector),d=()=>(0,s.Tp)(i.x.InAppTeaching),u=()=>(0,s.Tp)(i.x.LaunchpadExamplePrompts),p=()=>(0,s.Tp)(i.x.GrowthKtlo),m=()=>(0,s.Tp)(i.x.MemoryIntegration),g=()=>(0,s.Tp)(i.x.AIGateway),h=()=>{let e=(0,l.WW)(),t=(0,s.Tp)(i.x.DownloadZip),a=(0,r.j4)(e=>e.currentWorkspace),{isBizOrEnterprisePlan:n}=(0,o.cb)(null==a?void 0:a.plan);return e||t||n},f=()=>(0,s.Tp)(i.x.Embed),x=()=>(0,s.Tp)(i.x.SetCreditLimit),v=()=>(0,s.Tp)(i.x.ChatSuggestions),b=()=>(0,s.Tp)(i.x.FiverrIntegration),_=()=>{var e;let t=null==(e=(0,n.l)().features)?void 0:e.view_switcher,a=(0,s.Tp)(i.x.ViewSwitcher);return t||a},w=()=>(0,s.Tp)(i.x.VoiceMode),y=()=>(0,s.Tp)(i.x.GithubContribution),j=()=>(0,s.Tp)(i.x.UploadAnyFile),E=()=>(0,s.Tp)(i.x.DirectCancellation),N=()=>(0,s.Tp)(i.x.CommunityFreshness),k=()=>(0,s.Tp)(i.x.IntegrationConnection),C=()=>(0,s.Tp)(i.x.McpPlugins),P=()=>(0,s.Tp)(i.x.SecurityTryFixAll)},50088:(e,t,a)=>{"use strict";a.d(t,{Y:()=>o});var r=a(32044),n=a(78316),s=a(33256),l=a(69147),i=a(273);let o={workspace:e=>{let{workspaceId:t,userData:a}=e;return(0,r.j)({queryKey:i.a$.workspace(t),queryFn:async()=>{let e=(0,s.P)();return(await e.get("/user/workspaces/".concat(t))).workspace},enabled:!!a&&!!t})},experimentalFeatures:e=>{let{user:t}=e;return(0,r.j)({queryKey:i.a$.experimentalFeatures(),enabled:!!t&&!!t.idToken&&(0,n.H)(t),refetchOnWindowFocus:!1,queryFn:async()=>{let e=(0,s.P)();try{return await e.get("/users/".concat(null==t?void 0:t.uid,"/experimental-features"))}catch(e){return l.logging.error("Failed to fetch experimental features",{error:e}),null}}})},contributions:e=>{let{userData:t}=e;return(0,r.j)({queryKey:i.a$.contributions(null==t?void 0:t.id),queryFn:async()=>(null==t?void 0:t.id)?(0,s.P)().get("/users/".concat(t.id,"/contributions")):{},enabled:!!(null==t?void 0:t.username)})},publicProfile:e=>{let{username:t}=e;return(0,r.j)({queryKey:i.a$.profile(t),queryFn:()=>(0,s.g)().get("/profile/".concat(t)),enabled:!!t,retry:!1})},studentDomains:()=>(0,r.j)({queryKey:i.a$.studentDomains(),queryFn:async()=>(0,s.P)().get("/user/student/domains")}),toolApprovalPreferences:()=>(0,r.j)({queryKey:i.a$.toolApprovalPreferences(),queryFn:async()=>(0,s.P)().get("/user/preferences/tool-preferences"),staleTime:6e5})}},52170:(e,t,a)=>{"use strict";a.d(t,{F:()=>c});var r=a(99289),n=a(67312);a(11405);var s=a(26551),l=a(44346),i=a.n(l);let o=(0,n.F)("",{variants:{variant:{default:i().shimmerText,success:i().shimmerTextSuccess}},defaultVariants:{variant:"default"}}),c=e=>{let{children:t,className:a,isShimmering:n=!1,variant:l,...i}=e;return(0,r.jsx)("span",{className:(0,s.cn)(a,n&&o({variant:l})),...i,children:t})}},52983:(e,t,a)=>{"use strict";a.d(t,{V:()=>n});var r=a(9627);let n=function(e){let{defaultValue:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{defaultValue:!1},[a,n]=(0,r.A)(e,{defaultValue:t});return[a,n]}},53417:(e,t,a)=>{"use strict";a.d(t,{E:()=>i});var r=a(99289),n=a(67312);a(11405);var s=a(26551);let l=(0,n.F)("inline-flex items-center rounded-sm px-2 py-px text-xs font-medium transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",warning:"border-transparent bg-warning text-warning-foreground hover:bg-warning/80",success:"border-transparent bg-success text-success-foreground hover:bg-success/80",accent:"border-transparent bg-accent text-accent-foreground hover:bg-accent/80",affirmative:"border-transparent bg-affirmative text-affirmative-foreground hover:bg-affirmative/80",outline:"text-foreground border border-border","brand-bubblegum":"bg-brand-bubblegum text-brand-bubblegum-foreground hover:bg-brand-bubblegum/80","brand-tiger":"bg-brand-tiger text-brand-tiger-foreground hover:bg-brand-tiger/80","brand-saffron":"bg-brand-saffron text-brand-saffron-foreground hover:bg-brand-saffron/80","brand-sapphire":"bg-brand-sapphire text-brand-sapphire-foreground hover:bg-brand-sapphire/80","brand-twilight":"bg-brand-twilight text-brand-twilight-foreground hover:bg-brand-twilight/80","brand-flamingo":"bg-brand-flamingo text-brand-flamingo-foreground hover:bg-brand-flamingo/80"}},defaultVariants:{variant:"default"}});function i(e){let{className:t,variant:a,...n}=e;return(0,r.jsx)("div",{className:(0,s.cn)(l({variant:a}),t),...n})}},59404:(e,t,a)=>{"use strict";a.d(t,{h:()=>r});var r=function(e){return e.OWNER="owner",e.ADMIN="admin",e.WRITE="write",e.READ="read",e.NONE="none",e}({})},60802:(e,t,a)=>{"use strict";a.d(t,{U:()=>o});var r=a(34363),n=a(23594),s=a(9563),l=a(33256),i=a(79312);let o=e=>{let t=(0,s.mb)(e=>e.projectId),{permitted:a}=(0,n.J)(i.eZ.ManageProjectSettings),{data:o,isLoading:c}=(0,r.I)({queryKey:["supabase-integration-data",e],queryFn:async()=>{let t=await (0,l.P)().get("/projects/".concat(e,"/integrations/supabase"));return""===t.supabase_project_id?null:t},enabled:!!e&&t===e&&a});return{supabaseIntegrationData:o,isSupabaseIntegrationDataLoading:c}}},63680:(e,t,a)=>{"use strict";a.d(t,{D:()=>n});var r=a(78103);let n=()=>{let e={},t=(0,r.R)("_fbc");t&&(e.fbc=t);let a=(0,r.R)("_fbp");a&&(e.fbp=a);let n=(0,r.R)("_ttp");n&&(e.ttp=n);let s=(0,r.R)("ttclid");return s&&(e.ttclid=s),e}},66324:(e,t,a)=>{"use strict";a.d(t,{nZ:()=>j,ZL:()=>y,lF:()=>E});var r=a(99289),n=a(81797),s=a(2906),l=a(69201),i=a(90352),o=a(24159);let c=e=>{let{selectedPlan:t,isScheduled:a}=e,{planType:l,setPlanType:c}=(0,s.et)(),d="annual"===l;return a&&(d="annual"===a),(0,r.jsx)("div",{className:"flex flex-col gap-2",children:(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)(i.d,{checked:d,disabled:!!a,onCheckedChange:e=>{c(e?"annual":"monthly"),n.Ay.capture(o.aw.PLAN_TYPE_CHANGED,{plan_id:t,plan_type:e?"annual":"monthly"})},className:"data-[state=checked]:bg-brand-twilight-primary",thumbClassName:"bg-[hsl(45_40_98%)]"}),(0,r.jsx)("div",{className:"flex",children:(0,r.jsx)("span",{className:"text-sm text-muted-foreground",children:"Annual"})})]})})};var d=a(46891),u=a(73305),p=a(93652),m=a(53417),g=a(97757),h=a(99017),f=a(69147),x=a(99605),v=a(97115),b=a(71302),_=a(71055),w=a(26551);let y=e=>{let{children:t,className:a,suffix:n}=e,{pricingScenario:l}=(0,s.et)();return(0,r.jsx)("div",{className:"flex w-full justify-center",children:(0,r.jsxs)("div",{className:"flex w-fit flex-col justify-center gap-6",children:[(0,r.jsx)("div",{className:(0,w.cn)("grid w-fit grid-cols-1 gap-4","sm:grid-cols-2 lg:gap-6","lg:flex lg:justify-center","lg:max-w-none",a,{"max-w-[600px]":"billing"!==l}),children:t}),n]})})},j=e=>{let{children:t}=e,a=(0,s.et)();return(0,r.jsx)("div",{className:(0,w.cn)("flex flex-col gap-4",a.isLoggedOut?"min-h-72":"min-h-[350px]"),children:t})},E=()=>{let e=(0,s.et)(),t=(0,v.RL)(e.selectedProPlan),a=(0,l.D)();return(0,r.jsx)(u.kp,{label:"Everything in Free, plus:",features:[(0,r.jsxs)("span",{className:"flex items-start gap-1",children:[t," monthly credits",(0,r.jsxs)(h.m_,{delayDuration:300,children:[(0,r.jsx)(h.k$,{children:(0,r.jsx)(g.A,{name:"info",className:"mt-0.5 h-4 w-4 text-muted-foreground"})}),(0,r.jsx)(h.ZI,{className:"max-w-[25ch]",children:(0,r.jsxs)("p",{children:[t," credits per month + 5 daily credits that reset each day"]})})]})]},"num-credits"),"5 daily credits (up to 150/month)","Private projects","User roles & permissions","Custom domains","Remove the Lovable badge",(0,r.jsxs)("span",{className:"flex items-start gap-1",children:["Credit rollovers",(0,r.jsxs)(h.m_,{delayDuration:300,children:[(0,r.jsx)(h.k$,{children:(0,r.jsx)(g.A,{name:"info",className:"mt-0.5 h-4 w-4 text-muted-foreground"})}),(0,r.jsx)(h.ZI,{className:"max-w-[25ch]",children:(0,r.jsxs)("p",{children:[t," rollover limit for monthly plans and 12x rollover limit for annual plans"]})})]})]},"num-credits"),...a?[(0,r.jsxs)("span",{className:"flex items-start gap-2",children:["Usage-based Cloud",(0,r.jsx)(m.E,{variant:"brand-twilight",children:"New"})]},"lovable-cloud")]:[]]})},N=e=>{var t,a;let{scheduledPlan:l}=e,i=(0,s.et)(),{isBizPlan:m,isEnterprisePlan:g}=(0,v.cb)(i.currentPlan.id),h="newWorkspace"===i.pricingScenario;if(!h&&!i.showProPlan)return null;let f=(()=>{let e=i.selectedProPlan,t=e===i.currentPlan.id&&i.planType==i.currentPlan.type,a=i.isPlanDowngrade(e);return i.isLoggedOut?{type:"link",text:"Get Started",variant:"twilight",href:"/signup",disabled:!1,onClick:()=>{n.Ay.capture(o.aw.GET_STARTED_CLICKED,{plan_type:"pro",plan_id:e,plan_price:i.getDisplayPrice(e),user_status:"logged_out"}),i.handleLoggedOutUpgrade(e)}}:h?i.newWorkspaceSelectedPlan===e?{type:"button",text:"Selected",variant:"twilight",disabled:!1,onClick:void 0,loading:!1}:{type:"button",text:"Select",variant:"twilight",disabled:!1,onClick:()=>{i.setNewWorkspaceSelectedPlan(e)},loading:!1}:l?{type:"button",text:"Scheduled",variant:"muted",disabled:!0,onClick:void 0,loading:!1}:t&&i.scheduledPlan?{type:"button",text:"Reactivate",variant:"twilight",disabled:!1,onClick:()=>{i.createPortalSession()},loading:!1}:t?{type:"button",text:"Your current plan",variant:"muted",disabled:!0,onClick:void 0,loading:!1}:i.shouldDisableWorkspaceAdminActions?{type:"button",text:"Contact Admin",variant:i.proPlanButtonVariant,disabled:!0,onClick:void 0,loading:!1,showTooltip:!0,tooltipContent:"You need to be a workspace admin to manage plans"}:g?{type:"button",text:i.getButtonText(e),variant:i.proPlanButtonVariant,disabled:!0,onClick:void 0,loading:!1}:a?{type:"button",text:i.getButtonText(e),variant:"link",disabled:!1,loading:!1,onClick:()=>{n.Ay.capture(o.aw.PLAN_DOWNGRADE_CLICKED,{current_plan_id:i.currentPlan.id,current_plan_type:i.currentPlan.type,target_plan_id:e,target_plan_type:i.planType,plan_type:"pro",plan_price:i.getDisplayPrice(e)}),i.setTargetDowngradePlan(e),i.onDowngradeClick()}}:{type:"button",text:i.getButtonText(e),variant:m?"decline":"twilight",disabled:!1,loading:!1,onClick:async()=>{await i.handleUpgradeClicked(e)}}})(),b=l&&i.scheduledPlan?i.scheduledPlan.id:i.selectedProPlan,_=i.getSavingsAmount(b);return(0,r.jsx)(u.Mt,{name:"Pro",title:"Designed for fast-moving teams building together in real time.",plan:null!=(t=null==l?void 0:l.id)?t:i.selectedProPlan,planType:null!=(a=null==l?void 0:l.type)?a:i.planType,description:(0,r.jsx)(c,{selectedPlan:b,isScheduled:null==l?void 0:l.type}),isPopular:!m&&!l,savingsAmount:_,isScheduled:h||null==l?void 0:l.type,highlighted:h&&i.newWorkspaceSelectedPlan===i.selectedProPlan,children:(0,r.jsxs)(j,{children:[(0,r.jsxs)(u.vi,{children:[(0,r.jsx)(d.O,{...f}),h?(0,r.jsx)(p.h,{options:x.pB,selectedOption:i.selectedProPlan,onSelect:e=>{i.setNewWorkspaceSelectedPlan(e),i.setSelectedProPlan(e)}}):(0,r.jsx)(p.h,{options:x.pB,selectedOption:l&&i.scheduledPlan?i.scheduledPlan.id:i.selectedProPlan,disabled:!!l||i.shouldDisableWorkspaceAdminActions,onSelect:i.setSelectedProPlan})]}),(0,r.jsx)(E,{})]})})},k=e=>{var t,a;let{scheduledPlan:l}=e,i=(0,s.et)(),{isBizPlan:m,isEnterprisePlan:f}=(0,v.cb)(i.currentPlan.id),b="newWorkspace"===i.pricingScenario,_=(0,v.RL)(i.selectedBizPlan);if(!b&&!i.showBizPlan)return null;let w=(()=>{let e=i.selectedBizPlan,t=e==i.currentPlan.id&&i.planType==i.currentPlan.type,a=i.isPlanDowngrade(e);return i.isLoggedOut?{type:"link",text:"Get Started",variant:"decline",href:"/signup",disabled:!1,onClick:()=>{n.Ay.capture(o.aw.GET_STARTED_CLICKED,{plan_type:"business",plan_id:e,plan_price:i.getDisplayPrice(e),user_status:"logged_out"})}}:b?i.newWorkspaceSelectedPlan===e?{type:"button",text:"Selected",variant:"twilight",disabled:!1,onClick:void 0,loading:!1}:{type:"button",text:"Select",variant:"twilight",disabled:!1,onClick:()=>{i.setNewWorkspaceSelectedPlan(e)},loading:!1}:l?{type:"button",text:"Scheduled",variant:"muted",disabled:!0,onClick:void 0,loading:!1}:t&&i.scheduledPlan?{type:"button",text:"Reactivate",variant:"twilight",disabled:!1,onClick:()=>{i.createPortalSession()},loading:!1}:t?{type:"button",text:"Your current plan",variant:"ghost",disabled:!0,onClick:void 0,loading:!1}:i.shouldDisableWorkspaceAdminActions?{type:"button",text:"Contact Admin",variant:m?"twilight":"twilight-muted",disabled:!0,onClick:void 0,loading:!1,showTooltip:!0,tooltipContent:"You need to be a workspace admin to manage plans"}:f?{type:"button",text:i.getButtonText(e),variant:"twilight-muted",disabled:!0,onClick:void 0,loading:!1}:a?{type:"button",text:i.getButtonText(e),variant:"link",disabled:!1,loading:!1,onClick:()=>{n.Ay.capture(o.aw.PLAN_DOWNGRADE_CLICKED,{current_plan_id:i.currentPlan.id,current_plan_type:i.currentPlan.type,target_plan_id:e,target_plan_type:i.planType,plan_type:"business",plan_price:i.getDisplayPrice(e)}),i.setTargetDowngradePlan(e),i.onDowngradeClick()}}:{type:"button",text:i.getButtonText(e),variant:m?"twilight":"decline",disabled:!1,loading:!1,onClick:async()=>{await i.handleUpgradeClicked(e)}}})(),y=l&&i.scheduledPlan?i.scheduledPlan.id:i.selectedBizPlan,E=i.getSavingsAmount(y);return(0,r.jsx)(u.Mt,{name:"Business",title:"Advanced controls and power features for growing departments",plan:null!=(t=null==l?void 0:l.id)?t:i.selectedBizPlan,planType:null!=(a=null==l?void 0:l.type)?a:i.planType,highlighted:b&&i.newWorkspaceSelectedPlan===i.selectedBizPlan,description:(0,r.jsx)(c,{selectedPlan:y,isScheduled:null==l?void 0:l.type}),savingsAmount:E,isPopular:m&&!l,isScheduled:null==l?void 0:l.type,children:(0,r.jsxs)(j,{children:[(0,r.jsxs)(u.vi,{children:[(0,r.jsx)(d.O,{...w}),b?(0,r.jsx)(p.h,{options:x.mR,selectedOption:i.selectedBizPlan,onSelect:e=>{i.setNewWorkspaceSelectedPlan(e),i.setSelectedBizPlan(e)}}):(0,r.jsx)(p.h,{options:x.mR,selectedOption:y,disabled:!!l||i.shouldDisableWorkspaceAdminActions,onSelect:i.setSelectedBizPlan})]}),(0,r.jsx)(u.kp,{label:"All features in Pro, plus:",features:[(0,r.jsxs)("span",{className:"flex items-start gap-1",children:[_," monthly credits",(0,r.jsxs)(h.m_,{delayDuration:300,children:[(0,r.jsx)(h.k$,{children:(0,r.jsx)(g.A,{name:"info",className:"mt-0.5 h-4 w-4 text-muted-foreground"})}),(0,r.jsx)(h.ZI,{className:"max-w-[25ch]",children:(0,r.jsxs)("p",{children:[_," credits per month + 5 daily credits that reset each day"]})})]})]},"num-credits"),"SSO","Personal Projects","Opt out of data training","Design templates"]})]})})};y.Free=()=>{let e=(0,s.et)(),{isFreePlan:t,isInactivePlan:a,isEnterprisePlan:i}=(0,v.cb)(e.currentPlan.id),c=(0,l.D)();if(!e.showFreePlan)return null;let p=(()=>{var r;return e.isLoggedOut?{type:"link",text:"Get Started",variant:"decline",href:"/signup",disabled:!1,onClick:()=>{n.Ay.capture(o.aw.GET_STARTED_CLICKED,{plan_type:"free",plan_id:"free",plan_price:0,user_status:"logged_out"})}}:(null==(r=e.scheduledPlan)?void 0:r.id)==="free"?{type:"button",text:"Scheduled",variant:"muted",disabled:!0,onClick:void 0,loading:!1}:t?{type:"button",text:"Your current plan",variant:"ghost",disabled:!0,onClick:void 0,loading:!1}:a?{type:"button",text:"Only for first workspace",variant:e.freePlanButtonVariant,disabled:!0,onClick:void 0,loading:!1}:i?{type:"button",text:"Downgrade (Contact us)",variant:e.freePlanButtonVariant,disabled:!0,onClick:void 0,loading:!1}:e.shouldDisableWorkspaceAdminActions?{type:"button",text:"Contact Admin",variant:e.freePlanButtonVariant,disabled:!0,onClick:void 0,loading:!1,showTooltip:!0,tooltipContent:"You need to be a workspace admin to manage plans"}:{type:"button",text:"Downgrade",variant:e.freePlanButtonVariant,disabled:!1,loading:e.isCreatePortalSessionLoading,onClick:()=>{n.Ay.capture(o.aw.PLAN_DOWNGRADE_CLICKED,{current_plan_id:e.currentPlan.id,current_plan_type:e.currentPlan.type,target_plan_id:"free",plan_type:"free"}),e.setFreePlanAsTarget(),e.onDowngradeClick()}}})();return(0,r.jsx)(u.Mt,{name:"Free",title:"Discover what Lovable can do for you",description:"Free forever",plan:b.VL.FREE,planType:"monthly",children:(0,r.jsxs)(j,{children:[(0,r.jsx)(u.vi,{children:(0,r.jsx)(d.O,{...p})}),(0,r.jsx)(u.kp,{label:"Free for everyone",features:["5 daily credits (up to 30/month)","Public projects","Unlimited collaborators",...c?[(0,r.jsxs)("span",{className:"flex items-start gap-2",children:["Cloud",(0,r.jsx)(m.E,{variant:"brand-twilight",children:"New"})]},"lovable-cloud")]:[]]})]})})},y.Ktlo=()=>{let e=(0,s.et)();if(!e.showKtloPlan)return null;let t=(()=>{var t;let a="ktlo"===e.currentPlan.id;return e.isLoggedOut?{type:"link",text:"Get Started",variant:"twilight",href:"/signup",disabled:!1,onClick:()=>{n.Ay.capture(o.aw.GET_STARTED_CLICKED,{plan_type:"ktlo",plan_price:15,user_status:"logged_out"})}}:a&&e.scheduledPlan?{type:"button",text:"Reactivate",variant:"twilight",disabled:!1,onClick:()=>{e.createPortalSession()},loading:!1}:a?{type:"button",text:"Your current plan",variant:"ghost",disabled:!0,onClick:void 0,loading:!1}:(null==(t=e.scheduledPlan)?void 0:t.id)==="ktlo"?{type:"button",text:"Scheduled",variant:"muted",disabled:!0,onClick:void 0,loading:!1}:e.shouldDisableWorkspaceAdminActions?{type:"button",text:"Contact Admin",variant:"twilight",disabled:!0,onClick:void 0,loading:!1,showTooltip:!0,tooltipContent:"You need to be a workspace admin to manage plans"}:{type:"button",text:"Switch to KTLO",variant:"twilight",disabled:!1,loading:!1,onClick:async()=>{var t;if(!(null==(t=_.y4[_.G.KTLO])?void 0:t.PRODUCT_ID))return void f.logging.error("KTLO product ID not found");n.Ay.capture(o.aw.PLAN_UPGRADE_CLICKED,{current_plan_id:e.currentPlan.id,current_plan_type:e.currentPlan.type,target_plan_id:"ktlo",plan_type:"ktlo",plan_price:15}),await e.handleUpgradeConfirmed(b.VL.KTLO)}}})();return(0,r.jsx)(u.Mt,{name:"Lite",title:"Keep your projects running with essential features",plan:b.VL.KTLO,planType:"monthly",description:"Monthly",children:(0,r.jsxs)(j,{children:[(0,r.jsx)(u.vi,{children:(0,r.jsx)(d.O,{...t})}),(0,r.jsx)(u.kp,{label:"Everything in Free, plus:",features:["5 daily credits (up to 150/month)","Private projects","User roles & permissions","Custom domains","Remove the Lovable badge"]})]})})},y.Scheduled=()=>{let{scheduledPlan:e}=(0,s.et)(),{isProPlan:t,isBizPlan:a}=(0,v.cb)(null==e?void 0:e.id);return e&&t?(0,r.jsx)(N,{scheduledPlan:e}):e&&a?(0,r.jsx)(k,{scheduledPlan:e}):void 0},y.Pro=N,y.Biz=k,y.Enterprise=()=>{let e=(0,s.et)(),{isEnterprisePlan:t}=(0,v.cb)(e.currentPlan.id);if(!e.showEnterprisePlan)return null;let a=t?{type:"button",text:"Your current plan",variant:"ghost",disabled:!0,onClick:void 0,loading:!1}:{type:"link",text:"Book a demo",variant:"decline",href:"https://enterpriseform.lovable.app/",disabled:!1,isExternal:!0,onClick:()=>{n.Ay.capture(o.aw.CONTACT_US_CLICKED,{plan_type:"enterprise",current_plan_id:e.currentPlan.id,current_plan_type:e.currentPlan.type,user_status:e.isLoggedOut?"logged_out":"logged_in"})}};return(0,r.jsx)(u.Mt,{name:"Enterprise",title:"Built for large orgs needing flexibility, scale, and governance.",className:(0,w.cn)("lg:col-span-1",{"sm:col-span-2":3===e.numberOfPlansShown}),plan:b.VL.ENTERPRISE,planType:e.planType,description:"Custom plans",hidePrice:!1,customPriceLabel:"Flexible billing",priceSuffix:"",children:(0,r.jsxs)(j,{children:[(0,r.jsx)(u.vi,{children:(0,r.jsx)(d.O,{...a})}),(0,r.jsx)(u.kp,{label:"Everything in Business, plus:",features:["Dedicated support","Onboarding services","Custom connections","Group-based access control","Custom design systems"]})]})})}},67017:(e,t,a)=>{"use strict";a.d(t,{A:()=>l});var r=a(92903),n=a(11405);let s={sm:640,md:768,lg:1024,xl:1280,"2xl":1536},l=e=>{if("number"==typeof e&&e<0)throw Error("Breakpoint value must be positive");let t=(0,r.A)(),a=(0,n.useMemo)(()=>"number"==typeof e?e:s[e],[e]);return(0,n.useMemo)(()=>void 0!==t.width&&t.width<a,[t.width,a])}},68939:(e,t,a)=>{"use strict";a.d(t,{D:()=>o});var r=a(83469),n=a(99605),s=a(97115),l=a(18883);let i=e=>e?"string"==typeof e?new Date(e):e.toDate():null,o=e=>{var t,a;let{billingPeriodCreditLimit:o,billingPeriodCreditsUsed:c,dailyCreditLimit:d,dailyCreditsUsed:u,bonusCredits:p,billingPeriodEndDate:m,totalCreditsUsedInBillingPeriod:g}=(0,r.$)(e),h=(null==e?void 0:e.plan)==="free"?Math.max(0,Math.min(n.le-(null!=g?g:0),null!=d?d:0)):null!=d?d:0,f={granted:(0,l.V)(null!=p?p:0),billing:(0,l.V)(null!=o?o:0),rollover:(0,l.V)(null!=(t=null==e?void 0:e.rollover_credits_limit)?t:0),daily:(0,l.V)(h)},x={granted:0,billing:(0,l.V)(Math.min(null!=c?c:0,f.billing)),rollover:(0,l.V)(Math.min(null!=(a=null==e?void 0:e.rollover_credits_used)?a:0,f.rollover)),daily:(0,l.V)(Math.min(null!=u?u:0,f.daily))},v=(e=>{if(!e)return!1;let{isLegacyPlan:t}=(0,s.cb)(e.plan),a="ambassador"===e.plan,r="ktlo"===e.plan;return(t||a||r)&&(0===e.billing_period_credits_limit||void 0===e.billing_period_credits_limit)})(e),b={granted:(0,l.V)(f.granted-x.granted),billing:v?0:(0,l.V)(f.billing-x.billing),rollover:(0,l.V)(f.rollover-x.rollover),daily:(0,l.V)(f.daily-x.daily)},_=(0,l.V)(b.granted+b.billing+b.rollover+b.daily),w=(0,l.V)(x.billing+x.rollover+x.daily),y=(0,l.V)(v?f.granted+f.rollover+f.daily:f.granted+f.billing+f.rollover+f.daily),j=[{name:"granted",remaining:b.granted,limit:f.granted},{name:"billing",remaining:b.billing,limit:f.billing},{name:"rollover",remaining:b.rollover,limit:f.rollover},{name:"daily",remaining:b.daily,limit:f.daily}].filter(e=>e.remaining>0);return{totalRemaining:_,totalAllocation:y,totalUsed:w,sources:j,hasCredits:y>0,currentlyConsuming:b.daily>0?"daily":b.rollover>0?"rollover":b.billing>0?"billing":b.granted>0?"granted":null,billingPeriodEndDate:m,creditsResetDate:(e=>{if(!e)return null;if("annual"===e.plan_type){let t=i(e.last_rollover_period||e.billing_period_start_date||e.billing_period_end_date);if(t){let e=t.getMonth()+1,a=t.getFullYear(),r=t.getDate(),n=new Date(a,e+1,0).getDate();return new Date(a,e,Math.min(r,n))}return null}return e.billing_period_end_date?i(e.billing_period_end_date):null})(e),totalCreditsUsedInBillingPeriod:null!=g?g:0}}},69201:(e,t,a)=>{"use strict";a.d(t,{D:()=>i});var r=a(11405),n=a(43328),s=a(73728),l=a(60802);let i=e=>{let{supabaseIntegrationData:t}=(0,l.U)(null==e?void 0:e.id),a=!!e,i=(0,s.Nn)(e=>e.projectWorkspace),o=(0,n.j4)(e=>e.currentWorkspace);return(0,r.useMemo)(()=>{var e,r;return null!=t&&!!t.is_managed_by_lovable||(a?!!(null==i||null==(e=i.experimental_features)?void 0:e.lovable_cloud):!!(null==o||null==(r=o.experimental_features)?void 0:r.lovable_cloud))},[null==t?void 0:t.is_managed_by_lovable,i,o,a])}},70999:(e,t,a)=>{"use strict";a.d(t,{RootDialog:()=>c,f:()=>o});var r=a(99289),n=a(11405),s=a(76918),l=a(6072);let i=(0,s.vt)(e=>({openDialog:null,setOpenDialog:t=>{e({openDialog:t})}}));function o(e){let t=i(e=>e.setOpenDialog);return(0,n.useCallback)(a=>{a?t({component:e,...a}):t(null)},[e,t])}let c=()=>{let e=i(e=>e.openDialog),t=i(e=>e.setOpenDialog);if((0,n.useEffect)(()=>{if(e){var t,a;null==(a=e.dialogProps)||null==(t=a.onOpen)||t.call(a)}},[e]),!e)return null;let{component:a,dialogProps:s,childProps:o}=e;return(0,r.jsx)(l.lG,{...s,open:!!e,onOpenChange:e=>{var a;e||t(null),null==s||null==(a=s.onOpenChange)||a.call(s,e)},children:(0,r.jsx)(a,{...o})})}},72384:(e,t,a)=>{"use strict";a.d(t,{y:()=>p});var r=a(32044),n=a(22803),s=a(33256),l=a(69147),i=a(273),o=a(26787),c=a(71302);function d(e){return"string"==typeof e&&Object.values(c.VL).includes(e)}function u(e){d(e.plan)||(null==e?void 0:e.reauth)||(l.logging.error("Workspace contains invalid/outdated plan ID. Defaulting to FREE. Please contact support to update your plan.",{workspace_id:e.id,received_plan:e.plan}),e.plan=c.VL.FREE),e.plan_scheduled&&!d(e.plan_scheduled)&&(l.logging.error("Workspace contains invalid/outdated scheduled plan ID. Removing scheduled plan. Please contact support to update your plan.",{workspace_id:e.id,received_scheduled_plan:e.plan_scheduled}),e.plan_scheduled=void 0)}let p={detail:e=>{let{workspaceId:t,projectId:a}=e;return(0,r.j)({queryKey:i.workspaceKeys.detail(null!=t?t:""),queryFn:async()=>{if(!t)return{workspace:null,is_member:!1,current_member:null};let e=(0,s.P)(),r=await e.get(a?"/projects/".concat(a,"/workspace"):"/workspaces/".concat(t));return r.workspace&&u(r.workspace),r}})},totalProjects:e=>{let{workspaceId:t}=e;return(0,r.j)({queryKey:i.workspaceKeys.totalProjects(t),queryFn:async()=>{let e=(0,n.P)((0,n.rJ)(o.db,"projects"),(0,n._M)("workspace_id","==",t));return(await (0,n.d_)(e)).data().count},enabled:!!t})},projects:e=>{let{workspaceId:t,userId:a,limit:n,isDraft:l=!1}=e;return(0,r.j)({queryKey:i.workspaceKeys.projects({workspaceId:null!=t?t:"",userId:a,limit:n,isDraft:l}),queryFn:async()=>{let e=(0,s.P)(),r=new URLSearchParams;a&&"all"!==a&&r.set("user_id",a),n&&r.set("limit",n.toString());let i=l?"/workspaces/".concat(t,"/projects/draft"):"/workspaces/".concat(t,"/projects"),o=r.toString()?"".concat(i,"?").concat(r.toString()):i;return await e.get(o)},staleTime:3e5,enabled:!!t})},workspaces:e=>{let{userId:t,disabled:a}=e;return(0,r.j)({queryKey:i.workspaceKeys.workspaces({userId:null!=t?t:""}),queryFn:async()=>{let e=(0,s.P)(),t=await e.get("/user/workspaces");return t.workspaces&&t.workspaces.forEach(u),t},enabled:!!t&&!a})},workspaceUsage:e=>{let{workspaceId:t,month:a,year:n}=e;return(0,r.j)({queryKey:i.workspaceKeys.workspaceUsage(t,a,n),queryFn:async()=>{let e=(0,s.P)();return await e.post("/workspaces/".concat(t,"/usage"),{month:a,year:n})}})},workspaceUserTotalUsage:e=>{let{workspaceId:t}=e;return(0,r.j)({queryKey:i.workspaceKeys.workspaceUserTotalUsage(t),queryFn:async()=>{let e=(0,s.P)();return(await e.get("/workspaces/".concat(t,"/user-total-usage"))).user_usages},enabled:!!t})},workspaceGithubInstallations:e=>{let{workspaceId:t}=e;return(0,r.j)({queryKey:i.workspaceKeys.workspaceGithubInstallations(t),queryFn:async()=>{let e=(0,s.P)();return await e.get("/workspaces/".concat(t,"/github-installations"))},enabled:!!t})},unacceptedInvites:()=>(0,r.j)({queryKey:i.workspaceKeys.unacceptedInvites(),queryFn:async()=>{let e=(0,s.P)();return(await e.get("/user/workspace-invitations")).invitations}}),referralCode:e=>{let{referralCode:t,workspaceId:a}=e;return(0,r.j)({queryKey:i.workspaceKeys.referralCode(a,t),queryFn:async()=>{if(t)return{referral_code:t};let e=(0,s.P)();return await e.post("/workspaces/".concat(a,"/referral-code"))}})},templates:e=>{let{workspaceId:t}=e;return(0,r.j)({queryKey:i.workspaceKeys.templates(t),queryFn:async()=>{let e=(0,s.P)();return await e.get("/workspaces/".concat(t,"/projects/templates"))},enabled:!!t})},workspaceMemberships:e=>{let{workspaceId:t}=e;return(0,r.j)({queryKey:i.workspaceKeys.memberships(null!=t?t:""),refetchInterval:3e5,queryFn:async()=>(0,s.P)().get("/workspaces/".concat(t,"/memberships/search?limit=").concat(20)),enabled:!!t})},searchWorkspaceMemberships:e=>{let{workspaceId:t,params:a}=e;return(0,r.j)({queryKey:i.workspaceKeys.memberships(t,a),staleTime:3e5,queryFn:async()=>{let e=(0,s.P)(),r=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"q",a=new URLSearchParams;return e.query&&a.set(t,e.query),e.status&&"all"!==e.status&&a.set("status",e.status),e.role&&a.set("role",e.role),e.limit&&a.set("limit",e.limit.toString()),e.offset&&a.set("offset",e.offset.toString()),a}(a),n="/workspaces/".concat(t,"/memberships/search?").concat(r.toString());return await e.get(n)},enabled:!!t})},integrationsOAuthStatus:e=>{let{workspaceId:t,integrations:a}=e;return(0,r.j)({queryKey:i.workspaceKeys.integrationsOAuthStatus(t,a),queryFn:async e=>{let{queryKey:a}=e,r=(0,s.P)(),n=a[a.length-1].integrations.join(","),l="/workspaces/".concat(t,"/integrations/oauth?integrations=").concat(n);return await r.get(l)}})},integrationOAuthStatus:e=>{let{workspaceId:t,integrationName:a}=e;return(0,r.j)({queryKey:i.workspaceKeys.integrationOAuthStatus(t,a),queryFn:async()=>{let e=(0,s.P)(),r="/workspaces/".concat(t,"/integrations/").concat(a,"/oauth");return await e.get(r)}})}}},73305:(e,t,a)=>{"use strict";a.d(t,{Mt:()=>u,kp:()=>g,oO:()=>p,vi:()=>m});var r=a(99289),n=a(11405),s=a(52170),l=a(53417),i=a(49944),o=a(97757),c=a(97115),d=a(26551);let u=e=>{let{name:t,title:a,plan:n,planType:i,description:o,discountedPrice:u,children:p,savingsAmount:m,showSavingsAsPercentage:g=!1,hidePrice:h=!1,isPopular:f=!1,customPriceLabel:x,priceSuffix:v,isScheduled:b,className:_,highlighted:w}=e,y=(0,c.jL)({id:n,type:i});return(0,r.jsxs)("div",{className:(0,d.cn)("flex h-full w-full max-w-[360px] flex-col gap-4 rounded-xl border border-muted-border p-4 pb-6 sm:max-w-none lg:max-w-[280px]",{"bg-muted":f},{"border-brand-twilight-primary bg-brand-twilight-primary/10":w},_),children:[(0,r.jsxs)("div",{className:"flex flex-col gap-1.5",children:[(0,r.jsx)("p",{className:"text-xl font-medium",children:t}),(0,r.jsx)("div",{className:"min-h-11 text-sm text-foreground lg:min-h-16",children:a})]}),(0,r.jsx)("div",{className:(0,d.cn)("flex items-baseline",{invisible:h}),children:x?(0,r.jsx)("span",{className:"flex min-h-11 items-center text-base tabular-nums text-muted-foreground",children:x}):(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)("div",{className:"flex min-h-11 items-center gap-2",children:[(0,r.jsxs)("p",{className:(0,d.cn)("text-3xl font-medium tabular-nums",u&&"text-muted-foreground line-through"),children:["$",y]}),u&&(0,r.jsxs)("p",{className:"px-1 text-3xl font-medium tabular-nums",children:["$",u]}),(0,r.jsx)("p",{className:"text-base text-muted-foreground",children:null!=v?v:"per month"})]})})}),(0,r.jsx)("div",{className:"-mx-4 flex h-16 items-center border-y border-muted-border px-4 py-2",children:(0,r.jsxs)("div",{className:"flex w-full items-center gap-2",children:["string"==typeof o?(0,r.jsx)("p",{className:"flex-1 text-sm text-muted-foreground",children:o}):(0,r.jsx)("div",{className:"flex-1",children:o}),m&&"Coming soon"!==o&&!b&&m>0&&(0,r.jsx)(l.E,{variant:"success",className:"rounded-full bg-success",children:(0,r.jsx)(s.F,{isShimmering:!0,variant:"success",className:(0,d.cn)("flex min-h-8 flex-col justify-center text-base font-normal text-success-foreground","md:text-sm xl:text-base",{"md:text-xs":m>=100}),children:(0,r.jsx)("div",{className:"text-center",children:g?"Save ".concat(m,"%"):"Save $".concat(m.toLocaleString())})})})]})}),p]})},p=e=>{let{children:t,onClick:a,className:s,...l}=e,[o,c]=(0,n.useState)(!1),u=async()=>{c(!0),await (null==a?void 0:a()),c(!1)};return(0,r.jsx)(i.$,{onClick:u,...l,loading:o,className:(0,d.cn)("w-full",s),children:t})},m=e=>{let{children:t,className:a}=e;return(0,r.jsx)("div",{className:(0,d.cn)("flex flex-col justify-start gap-2",a),children:t})},g=e=>{let{label:t,features:a}=e;return(0,r.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,r.jsx)("p",{className:"text-sm text-foreground",children:t}),(0,r.jsx)("ul",{className:"flex flex-col gap-4 text-base md:text-sm",children:a.map((e,t)=>(0,r.jsxs)("li",{className:"flex items-start gap-2",children:[(0,r.jsx)(o.A,{name:"check",size:"small",className:"relative top-[2px]"}),(0,r.jsx)("span",{className:"text-foreground",children:e})]},t))})]})}},73728:(e,t,a)=>{"use strict";a.d(t,{B5:()=>g,Nn:()=>h,oQ:()=>u,tY:()=>m});var r=a(99289),n=a(34363),s=a(11405),l=a(76918),i=a(72384),o=a(33063),c=a(9563);let d=(0,s.createContext)(null),u=e=>{let{children:t}=e,a=(0,s.useRef)((0,l.vt)(()=>({projectWorkspace:null,membership:null,permissions:{read:!1,write:!1,admin:!1},isLoading:!0,hasFetchedProjectWorkspace:!1,project:null}))),{workspaceId:u,project:p}=(0,c.Iw)(e=>{var t;return{workspaceId:null==(t=e.project)?void 0:t.workspace_id,project:e.project}}),[m,g]=(0,s.useState)(null),[h,f]=(0,s.useState)("idle"),{data:x}=(0,n.I)(i.y.detail({workspaceId:u,projectId:null==p?void 0:p.id})),[v,b]=(0,s.useState)(null);(0,s.useEffect)(()=>{if(!u){g(null),f("success"),b(null);return}if(f("loading"),x){var e,t;a.current.setState({projectWorkspace:x.workspace,membership:null!=(e=x.current_member)?e:null}),b(null!=(t=x.current_member)?t:null),g(x.workspace),f("success")}},[x,u]),(0,s.useEffect)(()=>{let e={read:!!v,write:!!v,admin:(null==v?void 0:v.role)==="admin"||(null==v?void 0:v.role)==="owner"};a.current.setState({project:p,projectWorkspace:m,membership:v,permissions:e,isLoading:"loading"===h})},[m,h,v,p]),(0,s.useEffect)(()=>{("success"===h||"error"===h)&&a.current.setState({hasFetchedProjectWorkspace:!0})},[h]);let _=(0,o.O)();(0,s.useEffect)(()=>(null==_||_.setProjectWorkspaceId(null!=u?u:null),()=>{null==_||_.setProjectWorkspaceId(null)}),[u,_]);let w={store:a.current};return(0,r.jsx)(d.Provider,{value:w,children:t})};function p(){return(0,s.useContext)(d)}function m(){return!!p()}function g(e){let{store:t}=function(){let e=(0,s.useContext)(d);if(!e)throw Error("useProjectWorkspaceContext must be used within a ProjectWorkspaceProvider");return e}();return t(e)}function h(e){let t=p(),a=null==t?void 0:t.store;return a?a(e):null}},76974:(e,t,a)=>{"use strict";a.d(t,{$M:()=>u,Mu:()=>m,k9:()=>p});var r=a(99289),n=a(34363),s=a(11405),l=a(76918),i=a(37079),o=a(72384),c=a(78316);let d=(0,s.createContext)(null);function u(e){let{children:t}=e,a=(0,s.useRef)((0,l.vt)(e=>({workspaces:[],error:null,isLoading:!0,showCreateWorkspaceDialog:!1,setShowCreateWorkspaceDialog:t=>{e({showCreateWorkspaceDialog:t})}}))),{authUser:u}=(0,i.Z2)(),{data:p,error:m,isFetching:g}=(0,n.I)(o.y.workspaces({userId:null==u?void 0:u.uid,disabled:!u||!(0,c.H)(u)}));return(0,s.useEffect)(()=>{(null==p?void 0:p.workspaces)&&a.current.setState({workspaces:p.workspaces}),a.current.setState({isLoading:g})},[p,g]),(0,s.useEffect)(()=>{m&&a.current.setState({error:m})},[m]),(0,r.jsx)(d.Provider,{value:{store:a.current},children:t})}function p(){let e=(0,s.useContext)(d);if(!e)throw Error("useWorkspaceContext must be used within a WorkspaceProvider");return e}function m(e){let{store:t}=p();if(!t)throw Error("useWorkspaceStore must be used within a WorkspaceProvider");return t(e)}},78103:(e,t,a)=>{"use strict";a.d(t,{R:()=>r});let r=e=>{if("undefined"==typeof document)return;let t="; ".concat(document.cookie).split("; ".concat(e,"="));if(2===t.length){var a;return null==(a=t.pop())?void 0:a.split(";").shift()}}},78316:(e,t,a)=>{"use strict";a.d(t,{H:()=>r});let r=e=>e.email_verified||"password"!==e.source_sign_in_provider},79312:(e,t,a)=>{"use strict";a.d(t,{RF:()=>i,Yq:()=>o,eZ:()=>n,mk:()=>l,ss:()=>s});var r=a(59404),n=function(e){return e.FeatureBadgeVisibility="feature:badge-visibility",e.FeatureCustomDomains="feature:custom-domains",e.FeatureProjectVisibility="feature:project-visibility",e.ViewProject="project:view",e.EditProject="project:edit",e.ManageProjectSettings="project:settings:manage",e.DeleteProject="project:delete",e.TransferProject="project:transfer",e.DownloadProject="project:download",e.ViewProjectUsage="project:usage:view",e.EditProjectVisibility="project:visibility:edit",e.EditProjectBadge="project:badge:edit",e.DeployProject="project:deploy",e.ViewProjectFiles="project:files:view",e.EditProjectFiles="project:files:edit",e.RemixProject="project:remix",e.ViewProjectCollaborators="project:collaborators:view",e.AddProjectOwners="project:collaborators:add:owner",e.AddProjectAdmins="project:collaborators:add:admin",e.AddProjectEditors="project:collaborators:add:editor",e.AddProjectViewers="project:collaborators:add:viewer",e.RemoveProjectOwners="project:collaborators:remove:owner",e.RemoveProjectAdmins="project:collaborators:remove:admin",e.RemoveProjectEditors="project:collaborators:remove:editor",e.RemoveProjectViewers="project:collaborators:remove:viewer",e.ManageMagicCodes="project:collaborators:magic-codes:manage",e.ManageProjectDomains="project:domains:manage",e.DisconnectProjectSupabase="project:supabase:disconnect",e.ManageProjectGit="project:git:manage",e.ManageProjectIntegrations="project:integrations:manage",e.HireExpert="project:expert:hire",e.SubmitProjectFeedback="project:feedback:submit",e.ManageProjectBookmarks="project:bookmarks:manage",e.UpdateProjectPresence="project:presence:update",e.CreateWorkspaces="workspace:create",e.ViewWorkspace="workspace:view",e.LeaveWorkspace="workspace:leave",e.EditWorkspaceSettings="workspace:settings:edit",e.ViewWorkspaceUsage="workspace:usage:view",e.ManageWorkspacePlan="workspace:plan:manage",e.UpdateWorkspaceCreditLimit="workspace:credit-limit:update",e.ViewWorkspaceMembers="workspace:members:view",e.AddWorkspaceOwners="workspace:roles:add:owner",e.AddWorkspaceAdmins="workspace:roles:add:admin",e.AddWorkspaceEditors="workspace:roles:add:editor",e.AddWorkspaceViewers="workspace:roles:add:viewer",e.RemoveWorkspaceOwners="workspace:roles:remove:owner",e.RemoveWorkspaceAdmins="workspace:roles:remove:admin",e.RemoveWorkspaceEditors="workspace:roles:remove:editor",e.RemoveWorkspaceViewers="workspace:roles:remove:viewer",e.ViewWorkspaceProjects="workspace:projects:view",e.CreateWorkspaceProjects="workspace:projects:create",e.ManageWorkspaceTemplates="workspace:templates:manage",e.ManageWorkspaceBilling="workspace:billing:manage",e.ManageWorkspaceGit="workspace:git:manage",e.ManageWorkspaceIntegrations="workspace:integrations:manage",e.ManageWorkspaceSupabase="workspace:supabase:manage",e.ManageWorkspaceIdentity="workspace:identity:manage",e.ManageBenchmarks="workspace:benchmarks:manage",e.ManageEvals="workspace:evals:manage",e.ManageInternalChat="workspace:internal-chat:manage",e.ManageAnalytics="workspace:analytics:manage",e.ManageFeaturedProjects="project:featured:manage",e.RemixProjectSnapshot="project:remix:snapshot",e.ManageProjectAnnotations="project:annotations:manage",e}({});let s=["workspace:roles:add:owner","workspace:roles:add:viewer","workspace:roles:add:editor","workspace:roles:add:admin"],l=(e,t,a)=>{if(t)return!1;switch(e){case"owner":return a.includes("workspace:roles:remove:owner");case"admin":return a.includes("workspace:roles:remove:admin");case"member":return a.includes("workspace:roles:remove:editor");case"viewer":return a.includes("workspace:roles:remove:viewer");default:return!1}},i=["project:collaborators:add:viewer","project:collaborators:add:editor","project:collaborators:add:admin","project:collaborators:add:owner"],o=(e,t,a)=>{if(e.id===t||e.access_level===r.h.OWNER)return!1;switch(e.access_level){case r.h.ADMIN:return a.includes("project:collaborators:remove:admin");case r.h.WRITE:return a.includes("project:collaborators:remove:editor");case r.h.READ:return a.includes("project:collaborators:remove:viewer");case r.h.NONE:default:return!1}}},80328:(e,t,a)=>{"use strict";a.d(t,{M:()=>c,l:()=>d});var r=a(99289),n=a(34363),s=a(11405),l=a(50088),i=a(37079);let o=(0,s.createContext)(null);function c(e){let{children:t}=e,{authUser:a}=(0,i.Z2)(),{data:c,isLoading:d}=(0,n.I)(l.Y.experimentalFeatures({user:a})),u=(0,s.useMemo)(()=>({features:c||null,isLoading:d}),[c,d]);return(0,r.jsx)(o.Provider,{value:u,children:t})}function d(){let e=(0,s.useContext)(o);if(!e)throw Error("LabsFeaturesContext not found");return e}},82162:(e,t,a)=>{"use strict";a.d(t,{Label:()=>c});var r=a(99289),n=a(46394),s=a(67312),l=a(11405),i=a(26551);let o=(0,s.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),c=l.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(n.b,{ref:t,className:(0,i.cn)(o(),a),...s})});c.displayName=n.b.displayName},83469:(e,t,a)=>{"use strict";a.d(t,{$:()=>d});var r=a(34363),n=a(11405),s=a(37079),l=a(23594),i=a(33256),o=a(273),c=a(79312);let d=e=>{var t,a,d,p,m;let{isAuthenticated:g,authUser:h}=(0,s.Z2)(),{permitted:f}=(0,l.J)(c.eZ.ViewWorkspaceUsage),{data:x}=(0,r.I)({queryKey:[...o.workspaceKeys.detail(null!=(t=null==e?void 0:e.id)?t:""),"users",null!=(a=null==h?void 0:h.uid)?a:"","monthly-usage"],queryFn:async()=>{if(!(null==e?void 0:e.id)||!(null==h?void 0:h.uid))return{user_monthly_usage:0,max_usage:null};try{let t=(0,i.P)();return await t.get("/workspaces/".concat(null==e?void 0:e.id,"/user-monthly-usage"))}catch(e){return{user_monthly_usage:0,max_usage:null}}},enabled:!!(null==e?void 0:e.id)&&!!(null==h?void 0:h.uid)&&f}),v=(0,n.useMemo)(()=>{var t;if(e&&g)return!!((null!=(t=e.credits_granted)?t:0)-e.credits_used>0)||!!(e.daily_credits_used<e.daily_credits_limit)||!!((e.billing_period_credits_used||0)<e.billing_period_credits_limit)},[e,g]),b=null==e?void 0:e.daily_credits_limit,_=null==e?void 0:e.daily_credits_used,w=null==e?void 0:e.billing_period_credits_limit,y=null==e?void 0:e.billing_period_credits_used,j=null==e?void 0:e.total_credits_used_in_billing_period,E=null!=(d=null==x?void 0:x.max_usage)?d:null;return{dailyCreditLimit:b,dailyCreditsUsed:_,billingPeriodCreditLimit:w,billingPeriodCreditsUsed:y,totalCreditsUsedInBillingPeriod:j,rolloverCredits:(null==e?void 0:e.rollover_credits_limit)!==void 0&&(null==e?void 0:e.rollover_credits_used)!==void 0?e.rollover_credits_limit-e.rollover_credits_used:void 0,bonusCredits:(null==e?void 0:e.credits_granted)!==void 0?e.credits_granted-(null!=(p=e.credits_used)?p:0):void 0,areCreditsAvailable:v,billingPeriodEndDate:u(null==e?void 0:e.billing_period_end_date),userMonthlyUsage:null!=(m=null==x?void 0:x.user_monthly_usage)?m:0,maxUserMonthlyUsage:E,hasCreditLimit:null!==E&&E>0,workspaceDefaultLimit:null==e?void 0:e.default_monthly_member_credit_limit}},u=e=>e?"string"==typeof e?new Date(e):e.toDate():null},88852:(e,t,a)=>{"use strict";a.d(t,{p:()=>l});var r=a(99289),n=a(11405),s=a(26551);let l=n.forwardRef((e,t)=>{let{className:a,type:n,...l}=e;return(0,r.jsx)("input",{type:n,className:(0,s.cn)("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),ref:t,...l})});l.displayName="Input"},90352:(e,t,a)=>{"use strict";a.d(t,{d:()=>i});var r=a(99289),n=a(23406),s=a(11405),l=a(26551);let i=s.forwardRef((e,t)=>{let{className:a,thumbClassName:s,size:i="default",...o}=e;return(0,r.jsx)(n.bL,{className:(0,l.cn)("peer inline-flex h-5 w-9 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent shadow-sm transition-colors data-[state=checked]:bg-primary data-[state=unchecked]:bg-input focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50","sm"===i&&"h-4 w-7","lg"===i&&"h-6 w-11",a),...o,ref:t,children:(0,r.jsx)(n.zi,{className:(0,l.cn)("pointer-events-none block h-4 w-4 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-4 data-[state=unchecked]:translate-x-0 dark:data-[state=unchecked]:bg-foreground","sm"===i&&"h-3 w-3 data-[state=checked]:translate-x-3","lg"===i&&"h-5 w-5 data-[state=checked]:translate-x-5",s)})})});i.displayName=n.bL.displayName},91352:(e,t,a)=>{"use strict";a.d(t,{n:()=>w});var r=a(99289),n=a(1596),s=a(74174),l=a(11405),i=a(43328),o=a(2906),c=a(49944),d=a(6072),u=a(97757),p=a(86077),m=a(97115),g=a(26551),h=a(13070),f=a(93652);let x=["Private projects","User roles & permissions","Custom domains","Remove the Lovable badge"],v=["SSO","Personal Projects","Opt out of data training","Design templates"],b=["Downgrade anytime","Credits rollover"],_=e=>{let{features:t}=e;return(0,r.jsx)("div",{className:"mt-3 space-y-3",children:t.map((e,t)=>(0,r.jsxs)("div",{className:"flex items-start gap-[6px]",children:[(0,r.jsx)(u.A,{name:"thick_check",size:"small",className:"relative top-[2px]"}),(0,r.jsx)("span",{className:"text-sm text-muted-foreground",children:e})]},t))})},w=e=>{let{targetPlan:t,availablePlans:a,title:u,subtitle:w,showCreditDifference:y=!0,showWhatsChanging:j=!0,showPlanFeatures:E=!0,showNextBillingCycle:N=!0,showPlanDropdown:k=!0}=e,{getDisplayPrice:C,handleUpgradeConfirmed:P,currentPlan:D,checkoutLoading:I}=(0,o.et)(),S=(0,m.RL)(D.id),A=(0,m.m6)(t),[T,L]=(0,l.useState)(t),R=(0,m.RL)(T),O=N&&!E,F=(0,i.j4)(e=>e.currentWorkspace),M=(null==F?void 0:F.billing_period_end_date)?(0,n.GP)((0,h.ay)(F.billing_period_end_date),"MMMM do"):(0,n.GP)((0,s.P)(new Date,1),"MMMM do"),K=(0,m.jL)(D),W=C(T),U=Math.max(0,W-K),G=R-S,B=C(T),V=async()=>{await P(T)};return(0,r.jsxs)(d.Cf,{className:"max-w-[425px]",children:[(0,r.jsxs)(d.c7,{className:"space-y-4",children:[(0,r.jsx)(p.Fy,{className:"size-9 shrink-0"}),(0,r.jsxs)("div",{children:[(0,r.jsx)(d.L3,{className:"mb-2 text-3xl font-medium",children:u}),(0,r.jsx)("p",{className:"text-sm text-foreground",children:w})]})]}),(0,r.jsxs)("div",{className:"flex flex-col gap-6",children:[(0,r.jsxs)("div",{className:"rounded-lg border-2 border-muted-border p-4",children:[(0,r.jsx)("div",{className:"text-lg font-medium",children:"Upgrade Fee"}),(0,r.jsxs)("div",{className:(0,g.cn)("flex items-center",{"mb-3":k}),children:[(0,r.jsxs)("span",{className:"text-4xl font-medium",children:["$",y?U:W]}),(0,r.jsx)("span",{className:"ml-2 text-base text-foreground",children:y?"due today":"per month"})]}),k&&(0,r.jsx)(f.h,{options:a,selectedOption:T,onSelect:L,showCreditDifference:y,currentPlanLimit:S})]}),j&&(0,r.jsxs)("div",{className:"rounded-lg bg-muted p-4",children:[(0,r.jsx)("p",{className:"text-sm font-medium",children:"What's changing?"}),(0,r.jsxs)("p",{className:"mt-1.5 text-sm text-muted-foreground",children:["You are unlocking all business features"," ",G?"and receiving ".concat(G," credits today"):"but your credits will stay the same"]})]}),E&&(0,r.jsxs)("div",{className:"rounded-lg bg-muted p-4",children:[(0,r.jsx)("p",{className:"text-sm font-medium",children:"You will unlock:"}),(0,r.jsx)(_,{features:[..."biz"===A?v:x,...O?[]:b]})]}),N&&(0,r.jsxs)("div",{children:[(0,r.jsxs)("p",{className:"text-sm font-medium",children:["Next billing cycle (",M,")"]}),(0,r.jsx)(_,{features:["Your plan will update to $".concat(B," / month for ").concat((0,m.RL)(T)," credits"),...O?b:[]]})]})]}),(0,r.jsxs)("div",{className:"flex gap-3 border-t pt-4",children:[(0,r.jsx)(d.HM,{asChild:!0,children:(0,r.jsx)(c.$,{variant:"decline",className:"flex-1",children:"Cancel"})}),(0,r.jsx)(c.$,{className:"flex-1",variant:"default",onClick:V,loading:!!I,children:W>K?"Upgrade":"Confirm"})]})]})}},92903:(e,t,a)=>{"use strict";a.d(t,{A:()=>n});var r=a(11405);let n=()=>{let[e,t]=(0,r.useState)({width:void 0,height:void 0});return(0,r.useEffect)(()=>{{let e=()=>{t({width:window.innerWidth,height:window.innerHeight})};return window.addEventListener("resize",e),e(),()=>window.removeEventListener("resize",e)}},[]),e}},93652:(e,t,a)=>{"use strict";a.d(t,{h:()=>c});var r=a(99289),n=a(5531),s=a(97757),l=a(97115),i=a(71302),o=a(26551);function c(e){let{options:t,selectedOption:a,onSelect:c,disabled:d=!1,disabledText:u,showCreditDifference:p=!1,currentPlanLimit:m}=e,g=e=>{let t=(0,l.RL)(e);if(p&&void 0!==m){let a=t-m;if(e===i.VL.KTLO)return"5 daily credits";if(a>0)return"+".concat(a," additional credits");if(0===a)return"No additional credits"}return"".concat(t," credits / month")},h=()=>g(a);if(d){let e=u||h();return e?(0,r.jsx)("div",{className:"flex w-full items-center justify-between rounded-md border border-muted-border bg-muted px-3 py-2 text-sm text-muted-foreground",children:e}):null}return(0,r.jsxs)(n.rI,{children:[(0,r.jsxs)(n.ty,{className:"flex w-full items-center justify-between rounded-md border border-muted-border bg-background px-3 py-2 text-sm focus:outline-none",children:[(0,r.jsx)("span",{children:h()}),(0,r.jsx)(s.A,{name:"chevron_right",className:"flex-shrink-0 rotate-90",size:"small"})]}),(0,r.jsx)(n.SQ,{className:"max-h-[300px] w-[var(--radix-dropdown-menu-trigger-width)] overflow-auto",align:"start",children:t.map(e=>(0,r.jsxs)(n._2,{onClick:()=>c(e),className:(0,o.cn)("flex w-full cursor-pointer items-center justify-between px-3 py-2 text-sm hover:bg-brand-twilight focus:bg-brand-twilight",a===e&&"bg-brand-twilight-primary text-affirmative-primary-foreground hover:bg-brand-twilight-primary hover:text-affirmative-primary-foreground focus:bg-brand-twilight-primary focus:text-affirmative-primary-foreground"),children:[(0,r.jsx)("span",{className:"block overflow-hidden text-ellipsis whitespace-nowrap",children:g(e)}),a===e&&(0,r.jsx)(s.A,{name:"check",size:"small",className:"ml-2 flex-shrink-0"})]},e))})]})}},99017:(e,t,a)=>{"use strict";a.d(t,{Bc:()=>i,PR:()=>u,ZI:()=>d,k$:()=>c,m_:()=>o});var r=a(99289),n=a(1571),s=a(11405),l=a(26551);let i=e=>{let{instant:t,delayDuration:a,skipDelayDuration:s=550,...l}=e;return(0,r.jsx)(n.Kq,{delayDuration:null!=a?a:700*!t,skipDelayDuration:s,...l})},o=e=>{let{instant:t,delayDuration:a,...s}=e;return(0,r.jsx)(n.bL,{delayDuration:null!=a?a:700*!t,...s})},c=n.l9,d=s.forwardRef((e,t)=>{let{className:a,sideOffset:s=4,...i}=e;return(0,r.jsx)(n.ZL,{children:(0,r.jsx)(n.UC,{ref:t,sideOffset:s,className:(0,l.cn)("z-[10000] overflow-hidden rounded-md bg-primary px-3 py-1.5 text-xs text-primary-foreground shadow-md","data-[state=delayed-open]:animate-in data-[state=delayed-open]:fade-in-0 data-[state=delayed-open]:zoom-in-95","data-[state=delayed-open]:data-[side=bottom]:slide-in-from-top-2 data-[state=delayed-open]:data-[side=left]:slide-in-from-right-2 data-[state=delayed-open]:data-[side=right]:slide-in-from-left-2 data-[state=delayed-open]:data-[side=top]:slide-in-from-bottom-2","data-[state=instant-open]:animate-in data-[state=instant-open]:fade-in-0","data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95",a),...i})})});d.displayName=n.UC.displayName;let u=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(n.i3,{ref:t,className:(0,l.cn)("fill-primary",a),...s})});u.displayName=n.i3.displayName},99280:(e,t,a)=>{"use strict";a.d(t,{Y:()=>n});var r=a(97115);function n(e){let{currentPlan:t,targetPlanCategory:a}=e,n=(0,r.m6)(t.id)===a;if(!["pro","biz"].includes(a))throw Error("Target plan category must be pro or biz");return n?(0,r.yQ)(t.id,a):(0,r.Bq)(t.id,a)}}}]);